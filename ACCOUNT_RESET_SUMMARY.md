# 账号重置完成报告

## 执行时间
2025-11-22

## 操作内容

### 1. 删除所有旧账号
- 删除了所有 `auth.users` 表中的用户数据
- 删除了所有 `profiles` 表中的用户配置文件
- 删除了所有关联数据（司机-仓库关联、管理员-仓库关联、考勤记录、计件记录等）

### 2. 创建新测试账号

#### 账号列表

| 序号 | 角色 | 姓名 | 登录账号 | 手机号 | 密码 | 司机类型 | 分配仓库 |
|------|------|------|----------|--------|------|----------|----------|
| 1 | 超级管理员 | 管理员 | admin | 13800000001 | 123456 | - | - |
| 2 | 普通管理员 | 管理员1 | admin1 | 13800000002 | 123456 | - | 北京仓库 |
| 3 | 司机 | 司机 | admin2 | 13800000003 | 123456 | 纯司机 | 北京仓库 |

### 3. 创建测试数据

#### 仓库数据
- 北京仓库（最大请假天数：10天）
- 上海仓库（最大请假天数：10天）

#### 考勤规则
- 北京仓库：09:00-18:00，迟到阈值15分钟，早退阈值15分钟
- 上海仓库：08:30-17:30，迟到阈值10分钟，早退阈值10分钟

#### 品类价格
每个仓库各有3个品类：
- 家电
- 家具
- 日用品

## 数据统计

| 表名 | 记录数 |
|------|--------|
| profiles | 3 |
| warehouses | 2 |
| driver_warehouses | 1 |
| manager_warehouses | 1 |
| attendance_rules | 2 |
| category_prices | 6 |

## 登录说明

### 超级管理员登录
- 登录账号：`admin` 或 `13800000001`
- 密码：`123456`
- 权限：可以管理所有数据，包括用户、仓库、考勤、计件等

### 普通管理员登录
- 登录账号：`admin1` 或 `13800000002`
- 密码：`123456`
- 权限：只能管理分配给自己的仓库（北京仓库）

### 司机登录
- 登录账号：`admin2` 或 `13800000003`
- 密码：`123456`
- 权限：只能查看和操作自己的数据（考勤、计件、请假等）

## 注意事项

1. **密码安全**：所有测试账号的密码都是 `123456`，这是测试密码，生产环境中应该使用更强的密码。

2. **数据隔离**：
   - 超级管理员可以看到所有数据
   - 普通管理员只能看到自己管理的仓库的数据
   - 司机只能看到自己的数据

3. **仓库分配**：
   - 管理员1 已分配到北京仓库
   - 司机 已分配到北京仓库
   - 超级管理员不需要分配仓库

4. **测试建议**：
   - 使用超级管理员账号测试系统管理功能
   - 使用普通管理员账号测试仓库管理功能
   - 使用司机账号测试司机端功能

## 后续操作

如需添加更多测试数据，可以：
1. 使用超级管理员账号登录系统
2. 在用户管理页面添加新用户
3. 在仓库管理页面分配用户到仓库
4. 在考勤规则页面配置考勤规则
5. 在品类价格页面配置价格

## 文件更新

已更新以下文件：
- `supabase/migrations/011_create_test_data.sql` - 测试数据创建脚本
