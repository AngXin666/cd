# 请假管理系统使用指南 v2.0

## 📱 司机端使用指南

### 1. 快捷请假（推荐）

快捷请假是最简单快速的请假方式，适合提前规划的请假申请。

#### 使用步骤
1. 进入"请假管理"页面
2. 点击"申请请假"按钮
3. 确保选中"快捷请假"标签（默认选中）
4. 选择请假类型（病假/事假/年假/其他）
5. 通过滚轮选择请假天数（1-上限天数）
6. 查看自动设置的起始日期（明天）和结束日期
7. 填写请假事由
8. 点击"提交申请"按钮

#### 特点
- ✅ **3步完成**：选类型 → 选天数 → 填事由
- ✅ **自动计算**：起始日期和结束日期自动设置
- ✅ **快速操作**：滚轮选择，操作简单
- ✅ **限制保护**：不能超过仓库设置的上限

#### 注意事项
- 起始日期固定为明天，不可修改
- 结束日期根据天数自动计算，不可修改
- 最多只能选择仓库设置的上限天数
- 如果需要请假更多天数，请使用"补请假"功能

### 2. 补请假

补请假功能用于补录过去的请假记录或申请超过上限的请假天数。

#### 使用步骤
1. 进入"请假管理"页面
2. 点击"申请请假"按钮
3. 点击"补请假"标签切换模式
4. 选择请假类型
5. 选择开始日期（可选今天及之前的日期）
6. 选择结束日期（可选开始日期及之后的日期）
7. 查看自动计算的请假天数
8. 如果超过上限，会显示警告提示
9. 填写请假事由
10. 点击"提交申请"按钮

#### 特点
- ✅ **灵活补录**：可以选择过去的日期
- ✅ **超限申请**：可以申请超过上限的天数
- ✅ **智能提示**：超限时显示警告但允许提交
- ✅ **管理员审批**：超限申请需要管理员手动审批

#### 注意事项
- 可以选择今天及之前的任意日期
- 超过上限的申请会显示橙色警告提示
- 超限申请需要管理员审批，可能需要更长时间
- 建议在事由中说明补假的原因

### 3. 离职申请

离职申请需要提前指定天数提交，具体天数由仓库设置决定。

#### 使用步骤
1. 进入"请假管理"页面
2. 点击"申请离职"按钮
3. 查看温馨提示（显示需要提前的天数）
4. 选择期望离职日期
5. 系统会限制最早可选日期
6. 填写离职原因
7. 点击"提交申请"按钮

#### 特点
- ✅ **提前控制**：强制提前N天申请
- ✅ **日期限制**：不能选择太近的日期
- ✅ **清晰提示**：显示最早可选日期
- ✅ **实时验证**：选择日期时立即验证

#### 注意事项
- 离职日期必须在最早可选日期之后
- 如果选择了不符合要求的日期，会显示红色错误提示
- 提前天数由仓库设置决定，不同仓库可能不同
- 建议提前规划，避免因时间不足无法提交

### 4. 草稿管理

草稿功能可以保存未完成的申请，随时继续填写。

#### 保存草稿
1. 在请假或离职申请页面填写部分信息
2. 点击"保存草稿"按钮（紫色）
3. 草稿保存成功，可以随时回来继续填写

#### 查看草稿
1. 进入"请假管理"页面
2. 点击"草稿箱"标签
3. 查看所有保存的草稿（包括请假和离职申请）

#### 编辑草稿
1. 在草稿箱中找到要编辑的草稿
2. 点击"编辑"按钮
3. 修改申请信息
4. 可以选择"保存草稿"或"提交申请"

#### 提交草稿
1. 在草稿箱中找到要提交的草稿
2. 点击"提交"按钮
3. 草稿转为正式申请，进入审批流程

#### 删除草稿
1. 在草稿箱中找到要删除的草稿
2. 点击"删除"按钮
3. 确认删除操作

### 5. 查看申请状态

#### 待审批申请
1. 进入"请假管理"页面
2. 默认显示"待审批"标签
3. 查看所有待审批的申请

#### 已审批申请
1. 进入"请假管理"页面
2. 点击"已审批"标签
3. 查看所有已审批的申请（通过/拒绝）

## 👨‍💼 超级管理员使用指南

### 1. 仓库请假与离职设置

超级管理员可以为每个仓库单独配置请假和离职规则。

#### 设置步骤
1. 进入"仓库管理"页面
2. 找到要设置的仓库
3. 点击"编辑"按钮
4. 在"请假与离职设置"区块中：
   - 设置"最大请假天数上限"（1-365天）
   - 设置"离职申请提前天数"（1-365天）
5. 点击"保存"按钮
6. 设置立即生效

#### 设置说明

**最大请假天数上限：**
- 司机使用"快捷请假"时，最多只能选择此天数
- 司机使用"补请假"时，可以超过此天数，但会显示警告
- 超过上限的申请需要管理员手动审批
- 建议根据仓库实际情况设置（如：7天、15天、30天）

**离职申请提前天数：**
- 司机离职申请必须提前此天数提交
- 离职日期必须 >= 当前日期 + 此天数
- 系统会自动限制日期选择范围
- 建议根据仓库交接流程设置（如：30天、60天、90天）

#### 注意事项
- 设置范围：1-365天
- 不同仓库可以有不同的设置
- 设置保存后立即生效
- 建议定期检查和调整设置

### 2. 审批权限说明

超级管理员只能审批未分配管理员的仓库申请：
- 当仓库未分配管理员时，超级管理员可以审批该仓库的申请
- 当仓库已分配管理员后，超级管理员自动失去该仓库的审批权限
- 这样确保了权限的清晰分层，避免权限冲突

## 👨‍💼 普通管理员使用指南

### 1. 审批权限说明

仓库管理员只能审批自己管辖仓库的申请：
- 可以查看自己仓库司机的请假申请
- 可以审批（通过/拒绝）自己仓库的申请
- 无法查看其他仓库的申请

### 2. 审批流程

1. 进入"请假审批"或"离职审批"页面
2. 查看待审批的申请列表
3. 点击申请卡片查看详情
4. 选择审批操作：
   - 点击"通过"按钮批准申请
   - 点击"拒绝"按钮拒绝申请
   - 可以填写审批意见
5. 确认审批操作
6. 申请状态更新，司机会看到审批结果

### 3. 超限申请处理

当司机提交超过上限的补请假申请时：
- 申请会显示"超限"标记
- 建议仔细审核申请事由
- 根据实际情况决定是否批准
- 可以在审批意见中说明原因

## 💡 使用技巧

### 1. 选择合适的请假方式

**使用快捷请假的场景：**
- 提前规划的请假（如：下周请假）
- 请假天数在上限范围内
- 需要快速提交申请

**使用补请假的场景：**
- 补录过去的请假记录
- 请假天数超过上限
- 需要灵活选择日期

### 2. 草稿功能的最佳实践

- 不确定请假时间时，先保存草稿
- 需要查询相关信息时，先保存草稿
- 避免重复填写，提高效率
- 定期清理不需要的草稿

### 3. 天数计算说明

- 系统自动计算请假天数
- 计算公式：结束日期 - 开始日期 + 1
- 包含起始日期和结束日期
- 例如：1月1日到1月3日 = 3天

### 4. 离职申请注意事项

- 提前查看仓库的提前天数要求
- 尽早提交离职申请
- 在事由中详细说明离职原因
- 保持与管理员的沟通

### 5. 审批权限说明

- 司机只能看到自己的申请
- 仓库管理员只能审批自己仓库的申请
- 超级管理员只能审批未分配管理员的仓库申请
- 权限在数据库层面强制执行，确保数据安全

## ❓ 常见问题

### Q1: 快捷请假和补请假有什么区别？
**A:** 
- **快捷请假**：起始日期固定为明天，天数不能超过上限，操作简单快速
- **补请假**：可以选择过去的日期，可以超过上限（需审批），更加灵活

### Q2: 为什么我不能选择超过7天的请假？
**A:** 这是因为您的仓库设置了最大请假天数上限为7天。如果需要请假更多天数，请使用"补请假"功能，但需要管理员审批。

### Q3: 草稿会被管理员看到吗？
**A:** 不会。草稿只有创建者可以看到，只有提交后才会进入审批流程。

### Q4: 可以修改已提交的申请吗？
**A:** 不可以。已提交的申请无法修改，如需修改请联系管理员撤回后重新提交。

### Q5: 为什么我看不到某个仓库的申请？
**A:** 因为权限限制。仓库管理员只能看到自己仓库的申请，超级管理员只能看到未分配管理员的仓库申请。

### Q6: 草稿会自动过期吗？
**A:** 不会。草稿会一直保存，直到您提交或删除。

### Q7: 可以同时保存多个草稿吗？
**A:** 可以。您可以保存多个请假申请草稿和离职申请草稿。

### Q8: 离职申请为什么不能选择近期的日期？
**A:** 这是因为仓库设置了离职申请需要提前的天数。例如，如果设置为30天，您只能选择30天后的日期。

### Q9: 超过上限的补请假申请一定会被拒绝吗？
**A:** 不一定。管理员会根据实际情况和您的请假事由来决定是否批准。建议在事由中详细说明原因。

### Q10: 如何知道我的仓库的请假上限和离职提前天数？
**A:** 
- 在"快捷请假"模式下，天数选择器会显示最大可选天数
- 在"离职申请"页面，温馨提示会显示需要提前的天数

## 🎨 界面说明

### 颜色标识
- **蓝色**：正式申请、提交按钮、快捷请假模式
- **紫色**：草稿、保存草稿按钮
- **灰色**：补请假模式（未选中状态）
- **绿色**：审批通过
- **红色**：审批拒绝、离职申请、错误提示
- **橙色**：超限警告
- **黄色**：待审批

### 图标说明
- 📝 请假申请
- 👋 离职申请
- 📋 草稿箱
- ✅ 审批通过
- ❌ 审批拒绝
- ⏳ 待审批
- 📅 日历
- 🕐 时钟
- ⚠️ 警告
- ℹ️ 信息

### 提示框类型
- **蓝色提示框**：信息提示、天数显示
- **橙色提示框**：警告提示、超限提示
- **红色提示框**：错误提示、验证失败

## 📞 技术支持

如有任何问题或建议，请联系系统管理员。

---

**版本**：v2.0  
**更新时间**：2025-01-06  
**适用范围**：车队管家小程序 - 请假管理系统
