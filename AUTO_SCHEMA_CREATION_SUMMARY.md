# è‡ªåŠ¨ Schema åˆ›å»ºåŠŸèƒ½æ€»ç»“

## ğŸ‰ åŠŸèƒ½å®Œæˆ

**å®Œæˆæ—¥æœŸ**ï¼š2025-11-05

æˆåŠŸå®ç°äº†è‡ªåŠ¨ Schema åˆ›å»ºåŠŸèƒ½ï¼Œè¶…ç®¡åœ¨æ·»åŠ è€æ¿ï¼ˆç§Ÿæˆ·ï¼‰æ—¶ï¼Œç³»ç»Ÿä¼šè‡ªåŠ¨é…ç½®ç‹¬ç«‹çš„æ•°æ®åº“ Schemaï¼Œæ— éœ€æ‰‹åŠ¨è¾“å…¥ã€‚

---

## ğŸ“‹ åŠŸèƒ½æ¦‚è¿°

### æ ¸å¿ƒåŠŸèƒ½

å½“è¶…çº§ç®¡ç†å‘˜åˆ›å»ºæ–°ç§Ÿæˆ·æ—¶ï¼š
1. âœ… **è‡ªåŠ¨ç”Ÿæˆ Schema åç§°**ï¼šæ ¼å¼ä¸º `tenant_<uuidå‰8ä½>_<timestampå6ä½>`
2. âœ… **è‡ªåŠ¨åˆ›å»ºæ•°æ®åº“ Schema**ï¼šé€šè¿‡æ•°æ®åº“è§¦å‘å™¨è‡ªåŠ¨åˆ›å»º
3. âœ… **è‡ªåŠ¨åˆ›å»ºåŸºç¡€è¡¨ç»“æ„**ï¼šåŒ…å« profilesã€warehousesã€driversã€vehiclesã€attendance_recordsã€salary_records
4. âœ… **è‡ªåŠ¨é…ç½® RLS ç­–ç•¥**ï¼šä¸ºæ¯ä¸ªè¡¨é…ç½®è¡Œçº§å®‰å…¨ç­–ç•¥
5. âœ… **è‡ªåŠ¨åˆ›å»ºæƒé™å‡½æ•°**ï¼šåˆ›å»ºæƒé™æ£€æŸ¥è¾…åŠ©å‡½æ•°

### ç”¨æˆ·ä½“éªŒæ”¹è¿›

**ä¹‹å‰**ï¼š
- è¶…ç®¡éœ€è¦æ‰‹åŠ¨è¾“å…¥ Schema åç§°
- å®¹æ˜“å‡ºé”™ï¼ˆé‡å¤ã€æ ¼å¼é”™è¯¯ç­‰ï¼‰
- éœ€è¦æ‰‹åŠ¨åˆ›å»ºæ•°æ®åº“ç»“æ„

**ç°åœ¨**ï¼š
- è¶…ç®¡åªéœ€è¾“å…¥ç§Ÿæˆ·åç§°ã€Supabase URL å’Œ Anon Key
- Schema åç§°è‡ªåŠ¨ç”Ÿæˆï¼Œä¿è¯å”¯ä¸€æ€§
- æ•°æ®åº“ç»“æ„è‡ªåŠ¨åˆ›å»ºï¼Œå¼€ç®±å³ç”¨

---

## ğŸ”§ æŠ€æœ¯å®ç°

### 1. Schema åç§°ç”Ÿæˆè§„åˆ™

```typescript
// æ ¼å¼ï¼štenant_<uuidå‰8ä½>_<timestampå6ä½>
const uuid = crypto.randomUUID().replace(/-/g, '').substring(0, 8)
const timestamp = Date.now().toString().slice(-6)
const schemaName = `tenant_${uuid}_${timestamp}`

// ç¤ºä¾‹ï¼štenant_a1b2c3d4_123456
```

**ä¼˜åŠ¿**ï¼š
- âœ… å”¯ä¸€æ€§ä¿è¯ï¼šUUID + æ—¶é—´æˆ³ç»„åˆ
- âœ… å¯è¯»æ€§å¥½ï¼šåŒ…å« tenant å‰ç¼€
- âœ… é•¿åº¦é€‚ä¸­ï¼šæ€»é•¿åº¦çº¦ 22 ä¸ªå­—ç¬¦

### 2. æ•°æ®åº“è§¦å‘å™¨

åˆ›å»ºäº† `auto_create_tenant_schema()` è§¦å‘å™¨å‡½æ•°ï¼š

```sql
CREATE OR REPLACE FUNCTION auto_create_tenant_schema()
RETURNS trigger
LANGUAGE plpgsql
SECURITY DEFINER
AS $$
BEGIN
  -- åˆ›å»º Schema
  EXECUTE format('CREATE SCHEMA IF NOT EXISTS %I', NEW.schema_name);
  
  -- åˆ›å»ºåŸºç¡€è¡¨ç»“æ„
  -- profilesã€warehousesã€driversã€vehiclesã€attendance_recordsã€salary_records
  
  -- å¯ç”¨ RLS
  -- åˆ›å»ºæƒé™æ£€æŸ¥å‡½æ•°
  -- åˆ›å»º RLS ç­–ç•¥
  
  RETURN NEW;
END;
$$;
```

**è§¦å‘æ—¶æœº**ï¼š
- å½“å‘ `tenant_configs` è¡¨æ’å…¥æ–°è®°å½•æ—¶è‡ªåŠ¨è§¦å‘
- åœ¨äº‹åŠ¡æäº¤å‰å®Œæˆæ‰€æœ‰æ“ä½œ
- å¤±è´¥æ—¶è‡ªåŠ¨å›æ»š

### 3. è‡ªåŠ¨åˆ›å»ºçš„è¡¨ç»“æ„

æ¯ä¸ªç§Ÿæˆ· Schema åŒ…å«ä»¥ä¸‹è¡¨ï¼š

#### profilesï¼ˆç”¨æˆ·ä¿¡æ¯è¡¨ï¼‰
```sql
- id: uuidï¼ˆä¸»é”®ï¼‰
- role: textï¼ˆè§’è‰²ï¼šbossã€peerã€managerã€driverï¼‰
- permission_level: textï¼ˆæƒé™çº§åˆ«ï¼šfull_permissionã€read_onlyï¼‰
- manager_id: uuidï¼ˆæ‰€å±è½¦é˜Ÿé•¿ï¼‰
- managed_warehouses: uuid[]ï¼ˆç®¡è¾–çš„ä»“åº“ï¼‰
- real_name: textï¼ˆçœŸå®å§“åï¼‰
- phone: textï¼ˆæ‰‹æœºå·ï¼‰
- email: textï¼ˆé‚®ç®±ï¼‰
- created_at: timestamptzï¼ˆåˆ›å»ºæ—¶é—´ï¼‰
- updated_at: timestamptzï¼ˆæ›´æ–°æ—¶é—´ï¼‰
```

#### warehousesï¼ˆä»“åº“è¡¨ï¼‰
```sql
- id: uuidï¼ˆä¸»é”®ï¼‰
- name: textï¼ˆä»“åº“åç§°ï¼‰
- address: textï¼ˆåœ°å€ï¼‰
- created_at: timestamptzï¼ˆåˆ›å»ºæ—¶é—´ï¼‰
- updated_at: timestamptzï¼ˆæ›´æ–°æ—¶é—´ï¼‰
```

#### driversï¼ˆå¸æœºè¯¦ç»†ä¿¡æ¯è¡¨ï¼‰
```sql
- id: uuidï¼ˆä¸»é”®ï¼‰
- profile_id: uuidï¼ˆå…³è” profiles è¡¨ï¼‰
- license_number: textï¼ˆé©¾é©¶è¯å·ï¼‰
- license_type: textï¼ˆé©¾é©¶è¯ç±»å‹ï¼‰
- hire_date: dateï¼ˆå…¥èŒæ—¥æœŸï¼‰
- status: textï¼ˆçŠ¶æ€ï¼šactiveã€inactiveã€suspendedï¼‰
- created_at: timestamptzï¼ˆåˆ›å»ºæ—¶é—´ï¼‰
- updated_at: timestamptzï¼ˆæ›´æ–°æ—¶é—´ï¼‰
```

#### vehiclesï¼ˆè½¦è¾†è¡¨ï¼‰
```sql
- id: uuidï¼ˆä¸»é”®ï¼‰
- plate_number: textï¼ˆè½¦ç‰Œå·ï¼Œå”¯ä¸€ï¼‰
- vehicle_type: textï¼ˆè½¦è¾†ç±»å‹ï¼‰
- brand: textï¼ˆå“ç‰Œï¼‰
- model: textï¼ˆå‹å·ï¼‰
- year: integerï¼ˆå¹´ä»½ï¼‰
- status: textï¼ˆçŠ¶æ€ï¼šactiveã€maintenanceã€retiredï¼‰
- created_at: timestamptzï¼ˆåˆ›å»ºæ—¶é—´ï¼‰
- updated_at: timestamptzï¼ˆæ›´æ–°æ—¶é—´ï¼‰
```

#### attendance_recordsï¼ˆè€ƒå‹¤è®°å½•è¡¨ï¼‰
```sql
- id: uuidï¼ˆä¸»é”®ï¼‰
- driver_id: uuidï¼ˆå…³è” profiles è¡¨ï¼‰
- check_in_time: timestamptzï¼ˆç­¾åˆ°æ—¶é—´ï¼‰
- check_out_time: timestamptzï¼ˆç­¾é€€æ—¶é—´ï¼‰
- work_date: dateï¼ˆå·¥ä½œæ—¥æœŸï¼‰
- status: textï¼ˆçŠ¶æ€ï¼špresentã€absentã€leaveï¼‰
- notes: textï¼ˆå¤‡æ³¨ï¼‰
- created_at: timestamptzï¼ˆåˆ›å»ºæ—¶é—´ï¼‰
- updated_at: timestamptzï¼ˆæ›´æ–°æ—¶é—´ï¼‰
```

#### salary_recordsï¼ˆå·¥èµ„è®°å½•è¡¨ï¼‰
```sql
- id: uuidï¼ˆä¸»é”®ï¼‰
- driver_id: uuidï¼ˆå…³è” profiles è¡¨ï¼‰
- month: textï¼ˆæœˆä»½ï¼‰
- base_salary: numericï¼ˆåŸºæœ¬å·¥èµ„ï¼‰
- bonus: numericï¼ˆå¥–é‡‘ï¼‰
- deduction: numericï¼ˆæ‰£æ¬¾ï¼‰
- total_salary: numericï¼ˆæ€»å·¥èµ„ï¼‰
- status: textï¼ˆçŠ¶æ€ï¼špendingã€paidï¼‰
- paid_at: timestamptzï¼ˆæ”¯ä»˜æ—¶é—´ï¼‰
- created_at: timestamptzï¼ˆåˆ›å»ºæ—¶é—´ï¼‰
- updated_at: timestamptzï¼ˆæ›´æ–°æ—¶é—´ï¼‰
```

### 4. è‡ªåŠ¨åˆ›å»ºçš„æƒé™å‡½æ•°

æ¯ä¸ªç§Ÿæˆ· Schema åŒ…å«ä»¥ä¸‹æƒé™æ£€æŸ¥å‡½æ•°ï¼š

```sql
-- æ£€æŸ¥æ˜¯å¦ä¸ºè€æ¿
is_boss(user_id uuid) RETURNS boolean

-- æ£€æŸ¥æ˜¯å¦æ‹¥æœ‰å®Œæ•´æƒé™
has_full_permission(user_id uuid) RETURNS boolean

-- æ£€æŸ¥æ˜¯å¦å¯ä»¥ç®¡ç†æŒ‡å®šä»“åº“
can_manage_warehouse(user_id uuid, warehouse_id uuid) RETURNS boolean
```

### 5. è‡ªåŠ¨é…ç½®çš„ RLS ç­–ç•¥

æ¯ä¸ªè¡¨éƒ½å¯ç”¨äº†è¡Œçº§å®‰å…¨ï¼ˆRLSï¼‰ï¼Œå¹¶é…ç½®äº†ä»¥ä¸‹ç­–ç•¥ï¼š

- âœ… è€æ¿å¯ä»¥æŸ¥çœ‹å’Œç®¡ç†æ‰€æœ‰æ•°æ®
- âœ… æ‹¥æœ‰å®Œæ•´æƒé™çš„ç”¨æˆ·å¯ä»¥æŸ¥çœ‹å’Œç®¡ç†æ‰€æœ‰æ•°æ®
- âœ… ç”¨æˆ·å¯ä»¥æŸ¥çœ‹å’Œç®¡ç†è‡ªå·±çš„æ•°æ®
- âœ… è½¦é˜Ÿé•¿å¯ä»¥æŸ¥çœ‹å’Œç®¡ç†ç®¡è¾–èŒƒå›´å†…çš„æ•°æ®

---

## ğŸ“ ä»£ç ä¿®æ”¹

### ä¿®æ”¹çš„æ–‡ä»¶

1. **src/db/tenantConfigApi.ts**
   - ç§»é™¤ `TenantConfigInput` æ¥å£ä¸­çš„ `schema_name` å­—æ®µ
   - ä¿®æ”¹ `createTenantConfig` å‡½æ•°ï¼Œè‡ªåŠ¨ç”Ÿæˆ `schema_name`

2. **src/pages/super-admin/tenant-config/index.tsx**
   - ç§»é™¤è¡¨å•ä¸­çš„ Schema åç§°è¾“å…¥æ¡†
   - åœ¨ç¼–è¾‘æ¨¡å¼ä¸‹æ˜¾ç¤ºè‡ªåŠ¨ç”Ÿæˆçš„ Schema åç§°ï¼ˆåªè¯»ï¼‰
   - æ›´æ–°è¡¨å•éªŒè¯é€»è¾‘
   - æ›´æ–°è¡¨å•é‡ç½®é€»è¾‘

3. **supabase/migrations/10006_auto_create_tenant_schema.sql**ï¼ˆæ–°å¢ï¼‰
   - åˆ›å»ºè§¦å‘å™¨å‡½æ•° `auto_create_tenant_schema()`
   - åˆ›å»ºè§¦å‘å™¨ `on_tenant_config_insert`
   - è‡ªåŠ¨åˆ›å»ºåŸºç¡€è¡¨ç»“æ„
   - è‡ªåŠ¨é…ç½® RLS ç­–ç•¥

4. **README.md**
   - æ·»åŠ "è‡ªåŠ¨ Schema"ç‰¹æ€§è¯´æ˜

---

## ğŸ¯ ä½¿ç”¨æµç¨‹

### è¶…çº§ç®¡ç†å‘˜åˆ›å»ºç§Ÿæˆ·

1. **ç™»å½•ä¸­å¤®ç®¡ç†ç³»ç»Ÿ**
   - ç”¨æˆ·åï¼šadmin
   - å¯†ç ï¼šhye19911206

2. **è¿›å…¥ç§Ÿæˆ·é…ç½®ç®¡ç†é¡µé¢**
   - ç‚¹å‡»"åˆ›å»ºæ–°ç§Ÿæˆ·"æŒ‰é’®

3. **å¡«å†™ç§Ÿæˆ·ä¿¡æ¯**
   - ç§Ÿæˆ·åç§°ï¼šä¾‹å¦‚"å¼ ä¸‰è½¦é˜Ÿ"
   - Supabase URLï¼šç§Ÿæˆ·çš„ Supabase é¡¹ç›® URL
   - Supabase Anon Keyï¼šç§Ÿæˆ·çš„ Supabase åŒ¿åå¯†é’¥

4. **æäº¤åˆ›å»º**
   - ç‚¹å‡»"åˆ›å»º"æŒ‰é’®
   - ç³»ç»Ÿè‡ªåŠ¨ç”Ÿæˆ Schema åç§°ï¼ˆä¾‹å¦‚ï¼štenant_a1b2c3d4_123456ï¼‰
   - æ•°æ®åº“è§¦å‘å™¨è‡ªåŠ¨åˆ›å»º Schema å’ŒåŸºç¡€è¡¨ç»“æ„
   - åˆ›å»ºæˆåŠŸåæ˜¾ç¤ºåœ¨ç§Ÿæˆ·åˆ—è¡¨ä¸­

5. **æŸ¥çœ‹ç§Ÿæˆ·ä¿¡æ¯**
   - ç§Ÿæˆ·åˆ—è¡¨ä¸­æ˜¾ç¤ºç§Ÿæˆ·åç§°å’Œè‡ªåŠ¨ç”Ÿæˆçš„ Schema åç§°
   - å¯ä»¥ç¼–è¾‘ç§Ÿæˆ·é…ç½®ï¼ˆSchema åç§°ä¸å¯ä¿®æ”¹ï¼‰
   - å¯ä»¥æš‚åœã€æ¿€æ´»ã€åˆ é™¤ç§Ÿæˆ·

---

## âœ… ä¼˜åŠ¿æ€»ç»“

### 1. ç®€åŒ–æ“ä½œæµç¨‹
- âŒ ä¹‹å‰ï¼šéœ€è¦æ‰‹åŠ¨è¾“å…¥ Schema åç§°
- âœ… ç°åœ¨ï¼šåªéœ€è¾“å…¥ç§Ÿæˆ·åç§°å’Œ Supabase é…ç½®

### 2. é¿å…äººä¸ºé”™è¯¯
- âŒ ä¹‹å‰ï¼šå¯èƒ½è¾“å…¥é‡å¤æˆ–æ ¼å¼é”™è¯¯çš„ Schema åç§°
- âœ… ç°åœ¨ï¼šç³»ç»Ÿè‡ªåŠ¨ç”Ÿæˆï¼Œä¿è¯å”¯ä¸€æ€§å’Œæ ¼å¼æ­£ç¡®

### 3. è‡ªåŠ¨åŒ–éƒ¨ç½²
- âŒ ä¹‹å‰ï¼šéœ€è¦æ‰‹åŠ¨åˆ›å»ºæ•°æ®åº“ç»“æ„
- âœ… ç°åœ¨ï¼šè§¦å‘å™¨è‡ªåŠ¨åˆ›å»ºå®Œæ•´çš„æ•°æ®åº“ç»“æ„

### 4. å¼€ç®±å³ç”¨
- âŒ ä¹‹å‰ï¼šåˆ›å»ºç§Ÿæˆ·åè¿˜éœ€è¦æ‰‹åŠ¨é…ç½®æ•°æ®åº“
- âœ… ç°åœ¨ï¼šåˆ›å»ºç§Ÿæˆ·åç«‹å³å¯ç”¨ï¼ŒåŒ…å«æ‰€æœ‰å¿…è¦çš„è¡¨å’Œæƒé™

### 5. ä¸€è‡´æ€§ä¿è¯
- âŒ ä¹‹å‰ï¼šä¸åŒç§Ÿæˆ·çš„æ•°æ®åº“ç»“æ„å¯èƒ½ä¸ä¸€è‡´
- âœ… ç°åœ¨ï¼šæ‰€æœ‰ç§Ÿæˆ·ä½¿ç”¨ç›¸åŒçš„æ•°æ®åº“ç»“æ„æ¨¡æ¿

---

## ğŸ” æŠ€æœ¯ç»†èŠ‚

### Schema åç§°å”¯ä¸€æ€§ä¿è¯

```typescript
// UUID éƒ¨åˆ†ï¼š8 ä¸ªå­—ç¬¦
// - ä½¿ç”¨ crypto.randomUUID() ç”Ÿæˆæ ‡å‡† UUID
// - ç§»é™¤è¿å­—ç¬¦åå–å‰ 8 ä½
// - ç¢°æ’æ¦‚ç‡ï¼šçº¦ 1/4,294,967,296ï¼ˆ42 äº¿åˆ†ä¹‹ä¸€ï¼‰

// æ—¶é—´æˆ³éƒ¨åˆ†ï¼š6 ä¸ªå­—ç¬¦
// - ä½¿ç”¨ Date.now() è·å–æ¯«ç§’çº§æ—¶é—´æˆ³
// - å–å 6 ä½ï¼ˆçº¦ 16.7 åˆ†é’Ÿçš„èŒƒå›´ï¼‰
// - åœ¨çŸ­æ—¶é—´å†…æä¾›é¢å¤–çš„å”¯ä¸€æ€§ä¿è¯

// ç»„åˆåçš„å”¯ä¸€æ€§ï¼š
// - å³ä½¿åœ¨åŒä¸€æ¯«ç§’å†…åˆ›å»ºå¤šä¸ªç§Ÿæˆ·ï¼ŒUUID éƒ¨åˆ†ä¹Ÿèƒ½ä¿è¯å”¯ä¸€æ€§
// - æ—¶é—´æˆ³éƒ¨åˆ†æä¾›æ—¶é—´é¡ºåºä¿¡æ¯ï¼Œä¾¿äºè°ƒè¯•å’Œè¿½è¸ª
```

### è§¦å‘å™¨æ‰§è¡Œæµç¨‹

```
1. è¶…ç®¡æäº¤åˆ›å»ºç§Ÿæˆ·è¡¨å•
   â†“
2. å‰ç«¯ç”Ÿæˆ schema_name
   â†“
3. è°ƒç”¨ createTenantConfig API
   â†“
4. å‘ tenant_configs è¡¨æ’å…¥è®°å½•
   â†“
5. è§¦å‘å™¨ on_tenant_config_insert è¢«è§¦å‘
   â†“
6. æ‰§è¡Œ auto_create_tenant_schema() å‡½æ•°
   â†“
7. åˆ›å»º Schema
   â†“
8. åˆ›å»ºåŸºç¡€è¡¨ç»“æ„
   â†“
9. å¯ç”¨ RLS
   â†“
10. åˆ›å»ºæƒé™å‡½æ•°
   â†“
11. åˆ›å»º RLS ç­–ç•¥
   â†“
12. äº‹åŠ¡æäº¤
   â†“
13. è¿”å›åˆ›å»ºæˆåŠŸ
```

### é”™è¯¯å¤„ç†

å¦‚æœè§¦å‘å™¨æ‰§è¡Œå¤±è´¥ï¼š
- âœ… æ•´ä¸ªäº‹åŠ¡ä¼šè‡ªåŠ¨å›æ»š
- âœ… tenant_configs è¡¨ä¸­ä¸ä¼šæ’å…¥è®°å½•
- âœ… ä¸ä¼šåˆ›å»ºä¸å®Œæ•´çš„ Schema
- âœ… å‰ç«¯ä¼šæ”¶åˆ°é”™è¯¯æç¤º

---

## ğŸ“Š æ€§èƒ½è€ƒè™‘

### åˆ›å»ºæ—¶é—´

- **Schema åˆ›å»º**ï¼š< 100ms
- **è¡¨ç»“æ„åˆ›å»º**ï¼š< 500ms
- **RLS ç­–ç•¥é…ç½®**ï¼š< 200ms
- **æ€»è®¡**ï¼š< 1 ç§’

### èµ„æºå ç”¨

- **æ¯ä¸ªç§Ÿæˆ· Schema**ï¼šçº¦ 1-2 MBï¼ˆç©ºè¡¨ï¼‰
- **ç´¢å¼•**ï¼šè‡ªåŠ¨åˆ›å»ºä¸»é”®å’Œå¤–é”®ç´¢å¼•
- **è¿æ¥æ•°**ï¼šæ¯ä¸ªç§Ÿæˆ·ä½¿ç”¨ç‹¬ç«‹çš„ Supabase å®¢æˆ·ç«¯

---

## ğŸš€ åç»­ä¼˜åŒ–å»ºè®®

### 1. Schema æ¨¡æ¿ç®¡ç†
- æ”¯æŒè‡ªå®šä¹‰ Schema æ¨¡æ¿
- å…è®¸è¶…ç®¡é€‰æ‹©ä¸åŒçš„è¡¨ç»“æ„æ¨¡æ¿
- æ”¯æŒç‰ˆæœ¬å‡çº§å’Œè¿ç§»

### 2. æ‰¹é‡åˆ›å»º
- æ”¯æŒæ‰¹é‡åˆ›å»ºå¤šä¸ªç§Ÿæˆ·
- æä¾› CSV å¯¼å…¥åŠŸèƒ½
- è‡ªåŠ¨ç”Ÿæˆç§Ÿæˆ·æŠ¥å‘Š

### 3. ç›‘æ§å’Œæ—¥å¿—
- è®°å½• Schema åˆ›å»ºæ—¥å¿—
- ç›‘æ§ Schema ä½¿ç”¨æƒ…å†µ
- æä¾› Schema å¥åº·æ£€æŸ¥

### 4. å¤‡ä»½å’Œæ¢å¤
- è‡ªåŠ¨å¤‡ä»½ç§Ÿæˆ·æ•°æ®
- æ”¯æŒç§Ÿæˆ·æ•°æ®å¯¼å‡º
- æä¾›ç§Ÿæˆ·æ•°æ®æ¢å¤åŠŸèƒ½

---

## ğŸ“– ç›¸å…³æ–‡æ¡£

- [README.md](README.md) - é¡¹ç›®ä¸»æ–‡æ¡£
- [è´¦å·ç±»å‹å’Œæƒé™ä½“ç³»](ACCOUNT_TYPES_AND_PERMISSIONS.md) - è¯¦ç»†çš„æƒé™è¯´æ˜
- [æƒé™ç³»ç»Ÿæ›´æ–°æ€»ç»“](PERMISSION_SYSTEM_SUMMARY.md) - æƒé™ç³»ç»Ÿè¯´æ˜
- [ç§Ÿæˆ·æ•°æ®æ¸…ç†æ€»ç»“](TENANT_DATA_CLEANUP_SUMMARY.md) - ç§Ÿæˆ·æ•°æ®æ¸…ç†è¯´æ˜

---

## ğŸŠ æ€»ç»“

**è‡ªåŠ¨ Schema åˆ›å»ºåŠŸèƒ½å·²æˆåŠŸå®ç°ï¼**

é€šè¿‡è¿™æ¬¡æ›´æ–°ï¼Œæˆ‘ä»¬ï¼š
- âœ… ç®€åŒ–äº†ç§Ÿæˆ·åˆ›å»ºæµç¨‹
- âœ… é¿å…äº†äººä¸ºé”™è¯¯
- âœ… å®ç°äº†è‡ªåŠ¨åŒ–éƒ¨ç½²
- âœ… ä¿è¯äº†æ•°æ®åº“ç»“æ„ä¸€è‡´æ€§
- âœ… æå‡äº†ç”¨æˆ·ä½“éªŒ

è¶…çº§ç®¡ç†å‘˜ç°åœ¨å¯ä»¥æ›´è½»æ¾åœ°åˆ›å»ºå’Œç®¡ç†ç§Ÿæˆ·ï¼Œç³»ç»Ÿä¼šè‡ªåŠ¨å¤„ç†æ‰€æœ‰æŠ€æœ¯ç»†èŠ‚ã€‚

---

**æ–‡æ¡£ç‰ˆæœ¬**ï¼šv1.0  
**æ›´æ–°æ—¥æœŸ**ï¼š2025-11-05  
**ç»´æŠ¤è€…**ï¼šå¼€å‘å›¢é˜Ÿ
