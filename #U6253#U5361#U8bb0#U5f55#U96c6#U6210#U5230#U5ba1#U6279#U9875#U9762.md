# 打卡记录功能集成到请假审批页面

## 功能概述

根据用户需求，将原本独立的打卡记录页面集成到请假审批管理页面中，通过标签页切换的方式访问，简化了导航流程。

## 实现内容

### 1. 页面结构调整

**请假审批管理页面现在包含三个标签页：**
- **待审批**：显示待处理的请假和离职申请
- **司机统计**：显示各司机的请假统计数据
- **打卡记录**：显示司机的打卡考勤记录（新增）

### 2. 打卡记录标签页功能

#### 2.1 筛选功能
支持三个维度的数据筛选：
- **月份筛选**：选择要查看的月份
- **仓库筛选**：选择特定仓库或全部仓库
- **司机筛选**：选择特定司机或全部司机

#### 2.2 统计数据展示
显示当前筛选条件下的打卡统计：
- 总记录数
- 正常打卡次数
- 迟到次数
- 早退次数

#### 2.3 打卡记录列表
详细展示每条打卡记录：
- 司机姓名和所属仓库
- 打卡状态（正常/迟到/早退）
- 工作日期
- 上班打卡时间
- 下班打卡时间
- 工作时长
- 备注信息

### 3. 删除的内容

- 移除了独立的打卡记录页面（`src/pages/manager/attendance-records/`）
- 移除了快捷入口按钮
- 从路由配置中移除了打卡记录页面路由

## 技术实现

### 修改的文件

1. **src/pages/manager/leave-approval/index.tsx**
   - 扩展了 `activeTab` 类型，添加 `'attendance'` 选项
   - 添加了打卡记录相关的状态变量
   - 实现了打卡记录的数据加载逻辑
   - 添加了打卡记录的筛选和统计功能
   - 实现了打卡记录标签页的UI

2. **src/app.config.ts**
   - 移除了打卡记录页面的路由配置

### 新增的辅助函数

```typescript
// 初始化当前月份
initCurrentMonth(): string

// 格式化时间显示
formatTime(timeStr: string): string

// 获取打卡状态信息
getStatusInfo(record: AttendanceRecord): { text: string; color: string; bg: string }

// 获取可见的打卡记录
getVisibleAttendanceRecords(): AttendanceRecord[]

// 计算打卡统计数据
calculateAttendanceStats(): { totalRecords: number; normalCount: number; lateCount: number; earlyCount: number }

// 生成月份选项
generateMonthOptions(): string[]

// 获取司机列表
getDriverList(): Array<{ id: string; name: string }>
```

## 用户体验优化

1. **简化导航**：不再需要点击按钮跳转到单独页面，直接在标签页中切换即可
2. **统一界面**：所有管理功能集中在一个页面，界面更加统一
3. **快速切换**：通过标签页可以快速在不同功能之间切换
4. **数据筛选**：支持多维度筛选，方便管理员查找特定数据
5. **统计概览**：一目了然地查看打卡统计数据

## 权限控制

打卡记录标签页遵循与其他标签页相同的权限控制：
- 只显示管理员管辖仓库的打卡记录
- 支持按仓库筛选，只能选择管辖的仓库
- 司机筛选列表只包含管辖仓库的司机

## 测试建议

1. **标签页切换**：测试三个标签页之间的切换是否流畅
2. **数据筛选**：测试月份、仓库、司机三个筛选器的联动效果
3. **统计准确性**：验证统计数据是否准确
4. **权限验证**：确认只能看到管辖仓库的数据
5. **空数据处理**：测试没有打卡记录时的显示效果

## 后续优化建议

1. 可以考虑添加导出功能，导出打卡记录为Excel
2. 可以添加日期范围筛选，不仅限于按月筛选
3. 可以添加打卡异常的快速筛选（只看迟到/早退记录）
4. 可以添加打卡记录的详细查看功能，显示打卡位置等信息
