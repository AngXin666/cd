# RLS 策略备份说明

## 备份时间
2025-12-01 16:11:10

## 备份原因
进行权限系统重构，采用策略模板引擎替代现有的硬编码 RLS 策略

## 备份内容
1. 当前所有表的 RLS 策略定义
2. 权限辅助函数
3. 系统表和 RLS 策略完整分析文档

## 重构目标
1. 创建权限映射表（permission_mappings）
2. 定义策略模板（all_access, managed_resources, own_data_only）
3. 统一资源归属字段（manager_id, driver_id）
4. 实现动态权限验证引擎

## 回滚方法
如果重构后出现问题，可以执行以下 SQL 恢复原有策略：
```sql
-- 查看备份的策略定义
\i backup/rls_policies_backup_20251201_161110/current_rls_policies.sql
```

## 注意事项
- 重构期间建议在测试环境先验证
- 确保所有角色的权限都经过测试
- 保持数据完整性和一致性
