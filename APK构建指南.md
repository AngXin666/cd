# è½¦é˜Ÿç®¡å®¶ APK æ„å»ºæŒ‡å—

## ğŸ“± å¿«é€Ÿæ„å»ºAPKï¼ˆ5åˆ†é’Ÿå®Œæˆï¼‰

### æ–¹æ³•ä¸€ï¼šè‡ªåŠ¨æ„å»ºï¼ˆæ¨èï¼‰â­

#### æ­¥éª¤1ï¼šå®‰è£…Java JDK 17
1. æ‰“å¼€ä¸‹è½½é¡µé¢ï¼šhttps://adoptium.net/zh-CN/temurin/releases/
2. é€‰æ‹©ï¼š
   - ç‰ˆæœ¬ï¼š17 - LTS
   - æ“ä½œç³»ç»Ÿï¼šWindows
   - æ¶æ„ï¼šx64
   - åŒ…ç±»å‹ï¼šJDK
   - æ ¼å¼ï¼šMSI
3. ä¸‹è½½å¹¶åŒå‡»å®‰è£…ï¼ˆä½¿ç”¨é»˜è®¤è®¾ç½®å³å¯ï¼‰

#### æ­¥éª¤2ï¼šè¿è¡Œè‡ªåŠ¨æ„å»ºè„šæœ¬
æ‰“å¼€PowerShellï¼ˆåœ¨é¡¹ç›®ç›®å½•å³é”® -> "åœ¨ç»ˆç«¯ä¸­æ‰“å¼€"ï¼‰ï¼Œè¿è¡Œï¼š
```powershell
.\build-apk.ps1
```

**å°±è¿™ä¹ˆç®€å•ï¼** è„šæœ¬ä¼šè‡ªåŠ¨ï¼š
- âœ… æ£€æŸ¥Javaç¯å¢ƒ
- âœ… æ„å»ºH5é¡¹ç›®
- âœ… åŒæ­¥åˆ°Android
- âœ… æ„å»ºAPK
- âœ… è‡ªåŠ¨æ‰“å¼€APKæ–‡ä»¶ä½ç½®

æ„å»ºå®Œæˆåï¼ŒAPKä¼šä¿å­˜åœ¨ï¼š`VehicleManager.apk`

---

### æ–¹æ³•äºŒï¼šä½¿ç”¨Android Studioï¼ˆå›¾å½¢åŒ–ï¼‰

#### æ­¥éª¤1ï¼šå®‰è£…ç¯å¢ƒ
- Java JDK 17ï¼ˆåŒæ–¹æ³•ä¸€ï¼‰
- Android Studioï¼šhttps://developer.android.com/studio

#### æ­¥éª¤2ï¼šæ‰“å¼€é¡¹ç›®
```powershell
npx cap open android
```

#### æ­¥éª¤3ï¼šåœ¨Android Studioä¸­æ„å»º
1. ç­‰å¾…GradleåŒæ­¥å®Œæˆ
2. ç‚¹å‡»èœå•ï¼šBuild â†’ Build Bundle(s) / APK(s) â†’ Build APK(s)
3. ç­‰å¾…æ„å»ºå®Œæˆï¼ˆçº¦2-5åˆ†é’Ÿï¼‰
4. ç‚¹å‡»å¼¹çª—ä¸­çš„ "locate" æŸ¥çœ‹APKä½ç½®

APKä½ç½®ï¼š`android\app\build\outputs\apk\debug\app-debug.apk`

---

### æ–¹æ³•ä¸‰ï¼šæ‰‹åŠ¨å‘½ä»¤è¡Œæ„å»º

#### å‰ææ¡ä»¶
- å·²å®‰è£…Java JDK 17
- å·²é…ç½®JAVA_HOMEç¯å¢ƒå˜é‡

#### æ„å»ºæ­¥éª¤
```powershell
# 1. æ„å»ºH5é¡¹ç›®
pnpm run build:h5

# 2. åŒæ­¥åˆ°Android
npx cap sync android

# 3. æ„å»ºAPK
cd android
.\gradlew assembleDebug

# 4. APKä½ç½®
# android\app\build\outputs\apk\debug\app-debug.apk
```

---

## ğŸ”§ ç¯å¢ƒé…ç½®è¯´æ˜

### Javaç¯å¢ƒå˜é‡ï¼ˆé€šå¸¸å®‰è£…æ—¶è‡ªåŠ¨é…ç½®ï¼‰
å¦‚éœ€æ‰‹åŠ¨é…ç½®ï¼š
```
JAVA_HOME = C:\Program Files\Eclipse Adoptium\jdk-17.0.9.9-hotspot
Path = %JAVA_HOME%\bin;å…¶ä»–è·¯å¾„...
```

### éªŒè¯Javaå®‰è£…
```powershell
java -version
```
åº”æ˜¾ç¤ºï¼š`openjdk version "17.0.x"`

---

## ğŸ“¦ æ„å»ºäº§ç‰©è¯´æ˜

### Debugç‰ˆæœ¬ï¼ˆå¼€å‘æµ‹è¯•ç”¨ï¼‰
- æ–‡ä»¶åï¼š`app-debug.apk`  
- ç­¾åï¼šä½¿ç”¨debugç­¾å
- å¤§å°ï¼šçº¦25-35MB
- ç”¨é€”ï¼šå†…éƒ¨æµ‹è¯•

### Releaseç‰ˆæœ¬ï¼ˆç”Ÿäº§å‘å¸ƒç”¨ï¼‰
éœ€è¦é…ç½®ç­¾åè¯ä¹¦åä½¿ç”¨ï¼š
```powershell
.\gradlew assembleRelease
```

---

## â“ å¸¸è§é—®é¢˜

### Q1ï¼šJAVA_HOMEæœªè®¾ç½®
**é”™è¯¯**ï¼š`ERROR: JAVA_HOME is not set`
**è§£å†³**ï¼šé‡æ–°å®‰è£…Java JDK 17ï¼Œæˆ–æ‰‹åŠ¨é…ç½®ç¯å¢ƒå˜é‡

### Q2ï¼šGradleä¸‹è½½æ…¢
**è§£å†³**ï¼šé…ç½®å›½å†…é•œåƒæºï¼Œç¼–è¾‘ `android/build.gradle`

### Q3ï¼šæ„å»ºå¤±è´¥
**æ£€æŸ¥**ï¼š
1. Javaç‰ˆæœ¬æ˜¯å¦ä¸º17
2. æ˜¯å¦å·²è¿è¡Œ`pnpm run build:h5`
3. æ˜¯å¦å·²è¿è¡Œ`npx cap sync android`

---

## ğŸ“ å½“å‰çŠ¶æ€

âœ… **å·²å®Œæˆ**ï¼š
- H5é¡¹ç›®å·²æ„å»º
- ä»£ç å·²åŒæ­¥åˆ°Androidé¡¹ç›®  
- æ„å»ºè„šæœ¬å·²åˆ›å»º

â³ **å¾…å®Œæˆ**ï¼š
- å®‰è£…Java JDK 17
- è¿è¡Œæ„å»ºè„šæœ¬

---

## ğŸ’¡ æç¤º

- é¦–æ¬¡æ„å»ºä¼šä¸‹è½½Gradleä¾èµ–ï¼Œéœ€è¦5-10åˆ†é’Ÿ
- åç»­æ„å»ºåªéœ€1-2åˆ†é’Ÿ
- APKå¯ç›´æ¥å®‰è£…åˆ°Androidæ‰‹æœºæµ‹è¯•
- è®°å¾—å¼€å¯"å…è®¸å®‰è£…æœªçŸ¥æ¥æºåº”ç”¨"

---

## ğŸ“ éœ€è¦å¸®åŠ©ï¼Ÿ

å¦‚é‡åˆ°é—®é¢˜ï¼Œè¯·æä¾›ï¼š
1. é”™è¯¯ä¿¡æ¯æˆªå›¾
2. Javaç‰ˆæœ¬ï¼ˆ`java -version`ï¼‰
3. æ„å»ºæ—¥å¿—

ç¥æ„å»ºé¡ºåˆ©ï¼ğŸ‰
