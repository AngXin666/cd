# è½¦é˜Ÿç®¡å®¶å°ç¨‹åº

ä¸€æ¬¾ä¸“ä¸ºè½¦é˜Ÿç®¡ç†æ‰“é€ çš„å¾®ä¿¡å°ç¨‹åºï¼Œæä¾›å¤šè§’è‰²æƒé™ç®¡ç†ï¼ŒåŒ…å«å¸æœºç«¯ã€æ™®é€šç®¡ç†ç«¯å’Œè¶…çº§ç®¡ç†ç«¯ä¸‰ä¸ªä¸åŒç•Œé¢ï¼Œæ»¡è¶³è½¦é˜Ÿè¿è¥çš„åˆ†å±‚ç®¡ç†éœ€æ±‚ã€‚

---

## åŠŸèƒ½ç‰¹æ€§

### å¤šè§’è‰²æƒé™ç®¡ç†
- **å¸æœºç«¯**ï¼šä¸ªäººå·¥ä½œå°ã€åŸºç¡€ä¿¡æ¯å±•ç¤ºã€ä»Šæ—¥ç»Ÿè®¡
- **æ™®é€šç®¡ç†ç«¯**ï¼šç®¡ç†å‘˜å·¥ä½œå°ã€å¸æœºç®¡ç†ã€åŸºç¡€ç®¡ç†åŠŸèƒ½
- **è¶…çº§ç®¡ç†ç«¯**ï¼šè¶…çº§ç®¡ç†å‘˜æ§åˆ¶å°ã€ç³»ç»Ÿç®¡ç†ã€ç”¨æˆ·æƒé™ç®¡ç†

### ç”¨æˆ·è®¤è¯ç³»ç»Ÿ
- åŸºäº Supabase Auth çš„ç™»å½•è®¤è¯
- æ”¯æŒæ‰‹æœºå·+éªŒè¯ç ç™»å½•
- æ”¯æŒè´¦å·/æ‰‹æœºå·+å¯†ç ç™»å½•ï¼ˆå¯ä½¿ç”¨è´¦å·åæˆ–æ‰‹æœºå·ç™»å½•ï¼‰
- é¦–ä½æ³¨å†Œç”¨æˆ·è‡ªåŠ¨æˆä¸ºè¶…çº§ç®¡ç†å‘˜

### ç™»å½•æ–¹å¼
ç™»å½•ç•Œé¢æä¾›ä¸¤ç§ç™»å½•æ–¹å¼ï¼Œå¯è‡ªç”±åˆ‡æ¢ï¼š

1. **å¯†ç ç™»å½•**ï¼ˆé»˜è®¤ï¼Œæ¨èï¼‰
   - æ”¯æŒè´¦å·åç™»å½•ï¼ˆå¦‚ï¼šadminã€admin1ã€admin2ï¼‰
   - æ”¯æŒæ‰‹æœºå·ç™»å½•ï¼ˆ11ä½æ‰‹æœºå·æ ¼å¼ï¼‰
   - è¾“å…¥å¯†ç åç‚¹å‡»ç™»å½•æŒ‰é’®
   - ç³»ç»Ÿä¼šè‡ªåŠ¨è¯†åˆ«è¾“å…¥ç±»å‹å¹¶ä½¿ç”¨å¯¹åº”çš„è®¤è¯æ–¹å¼

2. **éªŒè¯ç ç™»å½•**
   - ä»…æ”¯æŒæ‰‹æœºå·ç™»å½•
   - è¾“å…¥æ‰‹æœºå·åç‚¹å‡»"å‘é€éªŒè¯ç "æŒ‰é’®
   - è¾“å…¥æ”¶åˆ°çš„éªŒè¯ç 
   - ç‚¹å‡»ç™»å½•æŒ‰é’®

### æµ‹è¯•è´¦å·
ç³»ç»Ÿå·²é¢„ç½®3ä¸ªæµ‹è¯•è´¦å·ï¼Œå¯ç›´æ¥ä½¿ç”¨å¯†ç ç™»å½•ï¼š

| è´¦å· | å¯†ç  | è§’è‰² | é‚®ç®± | è¯´æ˜ |
|------|------|------|------|------|
| admin | 123456 | è¶…çº§ç®¡ç†å‘˜ | admin@fleet.com | æ‹¥æœ‰æ‰€æœ‰æƒé™ |
| admin2 | 123456 | æ™®é€šç®¡ç†å‘˜ | admin2@fleet.com | å¯ç®¡ç†å¸æœº |
| admin1 | 123456 | å¸æœº | admin1@fleet.com | åŸºç¡€æƒé™ |

**å¿«é€Ÿç™»å½•æ­¥éª¤**ï¼š
1. åœ¨ç™»å½•é¡µé¢é€‰æ‹©"å¯†ç ç™»å½•"ï¼ˆé»˜è®¤å·²é€‰ä¸­ï¼‰
2. åœ¨è´¦å·è¾“å…¥æ¡†ä¸­è¾“å…¥è´¦å·åï¼ˆå¦‚ï¼š`admin`ï¼‰
3. åœ¨å¯†ç è¾“å…¥æ¡†ä¸­è¾“å…¥å¯†ç ï¼š`123456`
4. ç‚¹å‡»"ç™»å½•"æŒ‰é’®
5. ç™»å½•æˆåŠŸåè‡ªåŠ¨è·³è½¬åˆ°å¯¹åº”è§’è‰²çš„å·¥ä½œå°

**é‡è¦æç¤º**ï¼š
- âœ… å¯†ç å·²ä½¿ç”¨ PostgreSQL çš„ `crypt()` å‡½æ•°æ­£ç¡®åŠ å¯†
- âœ… æ‰€æœ‰æµ‹è¯•è´¦å·å‡å¯æ­£å¸¸ç™»å½•
- âœ… æ”¯æŒä½¿ç”¨è´¦å·åï¼ˆadminï¼‰æˆ–é‚®ç®±ï¼ˆadmin@fleet.comï¼‰ç™»å½•
- ğŸ“– è¯¦ç»†ç™»å½•æŒ‡å—è¯·æŸ¥çœ‹ï¼š[docs/LOGIN_GUIDE.md](docs/LOGIN_GUIDE.md)

### æƒé™æ§åˆ¶
- è¶…çº§ç®¡ç†å‘˜ï¼šæ‹¥æœ‰æ‰€æœ‰æƒé™ï¼Œå¯ç®¡ç†æ‰€æœ‰ç”¨æˆ·å’Œä¿®æ”¹ä»»ä½•è§’è‰²
- æ™®é€šç®¡ç†å‘˜ï¼šå¯æŸ¥çœ‹æ‰€æœ‰ç”¨æˆ·ï¼Œå¯ä¿®æ”¹å¸æœºè§’è‰²
- å¸æœºï¼šåªèƒ½æŸ¥çœ‹å’Œä¿®æ”¹è‡ªå·±çš„ä¿¡æ¯

---

## é¡µé¢è·¯ç”±

| è·¯ç”± | é¡µé¢åç§° | è¯´æ˜ |
|------|---------|------|
| `/pages/login/index` | ç™»å½•é¡µ | ç”¨æˆ·ç™»å½•å…¥å£ |
| `/pages/driver/index` | å¸æœºå·¥ä½œå° | å¸æœºç«¯ä¸»é¡µï¼ˆtabBarï¼‰ |
| `/pages/manager/index` | ç®¡ç†å‘˜å·¥ä½œå° | æ™®é€šç®¡ç†ç«¯ä¸»é¡µï¼ˆtabBarï¼‰ |
| `/pages/super-admin/index` | è¶…çº§ç®¡ç†å‘˜æ§åˆ¶å° | è¶…çº§ç®¡ç†ç«¯ä¸»é¡µï¼ˆtabBarï¼‰ |
| `/pages/profile/index` | ä¸ªäººä¸­å¿ƒ | ç”¨æˆ·ä¸ªäººä¿¡æ¯ç®¡ç†ï¼ˆtabBarï¼‰ |
| `/pages/admin-dashboard/index` | ç”¨æˆ·ç®¡ç† | è¶…çº§ç®¡ç†å‘˜ç”¨æˆ·ç®¡ç†é¡µé¢ |

---

## æŠ€æœ¯æ ˆ

- **å‰ç«¯æ¡†æ¶**ï¼šTaro + React + TypeScript
- **æ ·å¼æ–¹æ¡ˆ**ï¼šTailwind CSS
- **åç«¯æœåŠ¡**ï¼šSupabaseï¼ˆæ•°æ®åº“ + è®¤è¯ï¼‰
- **çŠ¶æ€ç®¡ç†**ï¼šReact Hooks
- **åŒ…ç®¡ç†å™¨**ï¼špnpm

---

## é¡¹ç›®ç»“æ„

```
â”œâ”€â”€ src/
â”‚   â”œâ”€â”€ app.config.ts               # Taroåº”ç”¨é…ç½®ï¼Œå®šä¹‰è·¯ç”±å’ŒtabBar
â”‚   â”œâ”€â”€ app.tsx                     # åº”ç”¨å…¥å£ï¼Œé…ç½®AuthProvider
â”‚   â”œâ”€â”€ app.scss
â”‚   â”œâ”€â”€ assets/
â”‚   â”‚   â””â”€â”€ images/                 # å›¾ç‰‡èµ„æº
â”‚   â”‚       â”œâ”€â”€ selected/           # tabBaré€‰ä¸­æ€å›¾æ ‡
â”‚   â”‚       â””â”€â”€ unselected/         # tabBaræœªé€‰ä¸­æ€å›¾æ ‡
â”‚   â”œâ”€â”€ client/
â”‚   â”‚   â””â”€â”€ supabase.ts             # Supabaseå®¢æˆ·ç«¯é…ç½®
â”‚   â”œâ”€â”€ db/                         # æ•°æ®åº“æ“ä½œ
â”‚   â”‚   â”œâ”€â”€ api.ts                  # æ•°æ®åº“APIå°è£…
â”‚   â”‚   â””â”€â”€ types.ts                # æ•°æ®åº“ç±»å‹å®šä¹‰
â”‚   â”œâ”€â”€ pages/                      # é¡µé¢ç›®å½•
â”‚   â”‚   â”œâ”€â”€ login/                  # ç™»å½•é¡µ
â”‚   â”‚   â”œâ”€â”€ driver/                 # å¸æœºå·¥ä½œå°
â”‚   â”‚   â”œâ”€â”€ manager/                # ç®¡ç†å‘˜å·¥ä½œå°
â”‚   â”‚   â”œâ”€â”€ super-admin/            # è¶…çº§ç®¡ç†å‘˜æ§åˆ¶å°
â”‚   â”‚   â”œâ”€â”€ profile/                # ä¸ªäººä¸­å¿ƒ
â”‚   â”‚   â””â”€â”€ admin-dashboard/        # ç”¨æˆ·ç®¡ç†
â”‚   â””â”€â”€ types/                      # TypeScriptç±»å‹å®šä¹‰
â””â”€â”€ supabase/
    â””â”€â”€ migrations/                 # æ•°æ®åº“è¿ç§»æ–‡ä»¶
        â””â”€â”€ 01_create_profiles_table.sql
```

---

## æ•°æ®åº“è®¾è®¡

### profiles è¡¨
| å­—æ®µ | ç±»å‹ | è¯´æ˜ |
|------|------|------|
| id | uuid | ä¸»é”®ï¼Œç”¨æˆ·ID |
| phone | text | æ‰‹æœºå·ï¼ˆå”¯ä¸€ï¼‰ |
| email | text | é‚®ç®±ï¼ˆå”¯ä¸€ï¼‰ |
| name | text | ç”¨æˆ·å§“å |
| role | user_role | ç”¨æˆ·è§’è‰²ï¼ˆdriver/manager/super_adminï¼‰ |
| created_at | timestamptz | åˆ›å»ºæ—¶é—´ |
| updated_at | timestamptz | æ›´æ–°æ—¶é—´ |

---

## å®‰è£…å’Œè¿è¡Œ

```bash
# å®‰è£…ä¾èµ–
pnpm install

# ä»£ç æ£€æŸ¥
pnpm run lint

# å¼€å‘ç¯å¢ƒè¿è¡Œï¼ˆå¾®ä¿¡å°ç¨‹åºï¼‰
pnpm run dev:weapp

# å¼€å‘ç¯å¢ƒè¿è¡Œï¼ˆH5ï¼‰
pnpm run dev:h5

# æ„å»ºç”Ÿäº§ç‰ˆæœ¬
pnpm run build:weapp
pnpm run build:h5
```

---

## è®¾è®¡é£æ ¼

- **ä¸»è‰²è°ƒ**ï¼šæ·±è“è‰² (#1E3A8A)
- **è¾…åŠ©è‰²**ï¼šæ©™è‰² (#F97316)
- **èƒŒæ™¯è‰²**ï¼šæµ…ç°è‰² (#F8FAFC)
- **åœ†è§’**ï¼š8px
- **å¸ƒå±€**ï¼šå¡ç‰‡å¼å¸ƒå±€ï¼Œè½»å¾®é˜´å½±æ•ˆæœ
- **å›¾æ ‡**ï¼šMaterial Design Icons (mdi)

---

## ç¯å¢ƒå˜é‡

åœ¨ `.env` æ–‡ä»¶ä¸­é…ç½®ä»¥ä¸‹å˜é‡ï¼š

```
TARO_APP_SUPABASE_URL=your_supabase_url
TARO_APP_SUPABASE_ANON_KEY=your_supabase_anon_key
TARO_APP_NAME=è½¦é˜Ÿç®¡å®¶
TARO_APP_APP_ID=app-7cdqf07mbu9t
```
