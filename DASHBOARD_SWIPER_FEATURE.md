# 计件报表仪表盘滑动切换功能

## 功能概述
git config --global user.name miaoda`src/pages/manager/piece-work-report/index.tsx`
- ✅ 超级管理员端：`src/pages/super-admin/piece-work-report/index.tsx`

## 功能特性

### 1. 双页面展示
git config --global user.name miaoda

#### 第一页：达标率和出勤率
- **今天达标率**：显示当天的完成率和目标对比
- **月度达标率**：显示本月的整体达标情况
- **司机总数**：当前仓库分配的司机总数
- **今天出勤率**：今天出勤司机占总司机的百分比

#### 第二页：件数统计
- **今天总件数**：当天所有司机完成的总件数
- **本周总件数**：本周累计完成的总件数
- **本月总件数**：本月累计完成的总件数
- **司机总数**：当前仓库的司机总数（保持布局一致）

### 2. 自动切换功能
- **切换间隔**：10秒自动切换到下一页
- **循环播放**：支持循环滚动，第二页后自动回到第一页
- **手动控制**：用户可以随时手动滑动切换页面

### 3. 视觉指示器
- **指示点**：底部显示当前页面位置
- **未激活颜色**：白色半透明（30%透明度）
- **激活颜色**：白色高亮（90%透明度）

## 技术实现

### 核心组件
`Swiper` 和 `SwiperItem` 组件实现滑动效果：

```tsx
<Swiper
  className="h-48"
  autoplay                    // 启用自动播放
  interval={10000}            // 10秒切换间隔
  circular                    // 循环播放
  indicatorDots              // 显示指示器
  indicatorColor="rgba(255, 255, 255, 0.3)"
  indicatorActiveColor="rgba(255, 255, 255, 0.9)">
  <SwiperItem>
    {/* 第一页内容 */}
  </SwiperItem>
  <SwiperItem>
    {/* 第二页内容 */}
  </SwiperItem>
</Swiper>
```

### 数据计算
- **今天总件数**：使用已有的 `todayQuantity` 变量
- **本周总件数**：通过 `driverSummaries.reduce()` 累加所有司机的 `weeklyQuantity`
- **本月总件数**：通过 `driverSummaries.reduce()` 累加所有司机的 `monthlyQuantity`
- **司机总数**：使用 `dashboardData.totalDrivers`

### 布局设计
- **容器高度**：固定 192px（h-48）
- **网格布局**：2x2 网格（grid-cols-2）
- **卡片间距**：4个单位间距（gap-4）
- **响应式**：自适应不同屏幕尺寸

## 用户体验优化

### 1. 自动与手动结合
- 自动切换让用户无需操作即可查看所有数据
- 手动滑动满足用户主动查看特定数据的需求

### 2. 视觉反馈
- 清晰的指示器显示当前页面位置
- 平滑的切换动画提升体验

### 3. 数据完整性
- 第一页关注效率指标（达标率、出勤率）
- 第二页关注数量指标（件数统计）
- 两页互补，提供全面的数据视图

## 使用场景

### 管理员端
- 快速了解当前仓库的运营状况
- 监控司机的工作效率和出勤情况
- 查看不同时间维度的件数统计

### 超级管理员端
- 全局监控所有仓库的运营数据
- 对比不同仓库的表现
- 制定管理决策的数据支持

## 注意事项

1. **数据实时性**：仪表盘数据会随着页面刷新或仓库切换而更新
2. **自动切换**：在用户手动滑动后，自动切换会继续工作
3. **性能优化**：使用 `reduce` 计算总件数时已考虑性能，数据量大时不会卡顿

## 未来扩展建议

1. **更多页面**：可以添加第三页显示趋势图表
2. **自定义间隔**：允许用户设置自动切换的时间间隔
3. **数据导出**：添加导出当前显示数据的功能
4. **对比分析**：添加不同时间段的数据对比功能

## 相关文件
- `/workspace/app-7cdqf07mbu9t/src/pages/manager/piece-work-report/index.tsx`
- `/workspace/app-7cdqf07mbu9t/src/pages/super-admin/piece-work-report/index.tsx`

## 修改日期
2025-11-05
