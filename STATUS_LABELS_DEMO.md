# 考勤管理状态标签功能演示

## 功能位置

状态标签显示在以下两个页面中：

1. **管理端考勤管理页面**
   - 路径：`/pages/manager/leave-approval/index`
   - 访问方式：管理端首页 → 考勤管理

2. **超级管理端考勤管理页面**
   - 路径：`/pages/super-admin/leave-approval/index`
   - 访问方式：超级管理端首页 → 考勤管理

## 状态标签展示

在司机统计列表中，每个司机卡片的顶部会显示以下标签：

**布局结构：**
```
[司机姓名] [司机类型] [新司机]                    [今日状态]
```

状态标签显示在最右边，与左侧的其他标签分开，便于快速识别。

### 标签示例

#### 1. 上班中状态
```
张三 [纯司机] [上班中]
```
- **颜色**：绿色渐变
- **图标**：✓ 勾选图标
- **含义**：今天已正常打卡，未迟到

#### 2. 迟到状态
```
李四 [带车司机] [迟到]
```
- **颜色**：橙色渐变
- **图标**：⏰ 时钟警告图标
- **含义**：今天已打卡但迟到了

#### 3. 休假状态
```
王五 [纯司机] [休假]
```
- **颜色**：蓝色渐变
- **图标**：🏖️ 沙滩图标
- **含义**：今天在已批准的请假期间内

#### 4. 未打卡状态
```
赵六 [带车司机] [未打卡]
```
- **颜色**：灰色渐变
- **图标**：⚠️ 警告图标
- **含义**：今天还没有打卡记录

#### 5. 新司机 + 状态组合
```
孙七 [纯司机] [新司机] [上班中]
```
- 新入职7天内的司机会同时显示"新司机"和状态标签

## 测试场景

### 场景1：正常上班
1. 司机在规定时间内打卡
2. 状态显示为"上班中"（绿色）

### 场景2：迟到打卡
1. 司机在规定时间后打卡
2. 打卡记录的 status 字段为 'late'
3. 状态显示为"迟到"（橙色）

### 场景3：请假中
1. 司机提交请假申请
2. 管理员批准请假
3. 在请假期间内，状态显示为"休假"（蓝色）
4. 即使司机打卡了，也优先显示"休假"状态

### 场景4：未打卡
1. 司机今天还没有打卡
2. 也不在请假期间内
3. 状态显示为"未打卡"（灰色）

## 状态更新时机

状态会在以下情况下自动更新：

1. **页面加载时**
   - 进入考勤管理页面时自动计算所有司机的状态

2. **数据刷新时**
   - 切换月份筛选时
   - 切换仓库筛选时
   - 审批请假申请后

3. **页面显示时**
   - 使用 `useDidShow` 钩子，页面重新显示时会刷新数据

## 技术实现要点

### 1. 状态判断优先级
```
休假 > 打卡状态 > 未打卡
```

### 2. 日期比较
- 使用 ISO 格式日期字符串（YYYY-MM-DD）
- 避免时区问题

### 3. 性能优化
- 使用 `useMemo` 缓存计算结果
- 只在依赖项变化时重新计算

### 4. 视觉设计
- 使用渐变色背景
- 圆角设计
- 图标 + 文字组合
- 与其他标签保持一致的视觉风格

## 用户价值

1. **快速识别**
   - 管理员可以一眼看出所有司机的当前状态
   - 不需要点击进入详情页

2. **及时处理**
   - 快速发现未打卡的司机
   - 及时跟进迟到情况

3. **人员调度**
   - 了解可用人力资源
   - 根据状态进行工作安排

4. **数据可视化**
   - 直观的颜色和图标
   - 降低认知负担

## 注意事项

1. **时间同步**
   - 确保服务器时间准确
   - 客户端时间可能不准确，以服务器时间为准

2. **状态实时性**
   - 状态基于当前数据库中的数据
   - 如果司机刚打卡，需要刷新页面才能看到最新状态

3. **请假优先级**
   - 即使司机在请假期间打卡，也显示"休假"状态
   - 这是设计决策，表示司机处于休假状态

4. **未来扩展**
   - 可以添加更多状态类型（如：外出、培训等）
   - 可以添加状态筛选功能
   - 可以添加状态统计图表
