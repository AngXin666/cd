# 车队管理小程序 - 系统账号分布报告

生成时间：2025-11-26

---

## 📊 总体统计

### 账号类型分布

| 账号类型 | 主账号 | 平级账号 | 合计 |
|---------|--------|----------|------|
| 👑 老板账号（super_admin） | 3 | 1 | 4 |
| 👨‍💼 车队长（manager） | 2 | 0 | 2 |
| 🚗 司机（driver） | 9 | 0 | 9 |
| **总计** | **14** | **1** | **15** |

### 关键数据

- **租户总数**：8 个（不同的 boss_id）
- **老板账号总数**：4 个（3 个主账号 + 1 个平级账号）
- **车队长总数**：2 个
- **司机总数**：9 个
- **总账号数**：15 个

---

## 🏢 按租户分组统计

### 租户 1：测试2（最大租户）

**Boss ID**: `BOSS_1764145957063_29235549`  
**公司名称**: 测试2  
**总账号数**: 8 个

| 账号类型 | 姓名 | 电话 | 创建时间 | 备注 |
|---------|------|------|----------|------|
| 👑 老板（主账号） | 测试2 | 13700000001 | 2025-11-25 19:47:56 | 主账号 |
| 👨‍💼 车队长 | 邱吉兴 | 15766121963 | 2025-11-22 17:01:08 | - |
| 👨‍💼 车队长 | 测试2 | 13222222221 | 2025-11-25 23:07:16 | - |
| 🚗 司机 | 邱吉兴 | 13800000003 | 2025-11-22 17:01:08 | - |
| 🚗 司机 | 发发奶粉哦啊 | 13322736482 | 2025-11-24 19:22:56 | - |
| 🚗 司机 | 测试2 | 13799910281 | 2025-11-25 20:31:25 | - |
| 🚗 司机 | 测试111 | 13876578765 | 2025-11-26 11:59:06 | - |
| 🚗 司机 | 测试11111 | 13498789877 | 2025-11-26 12:36:28 | - |

**账号结构**：
- 1 个老板主账号
- 2 个车队长
- 5 个司机

---

### 租户 2：管理员

**Boss ID**: `BOSS_1764145957063_52128391`  
**公司名称**: 无  
**总账号数**: 1 个

| 账号类型 | 姓名 | 电话 | 创建时间 |
|---------|------|------|----------|
| 👑 老板（主账号） | 管理员 | 13800000001 | 2025-11-22 17:01:08 |

**账号结构**：
- 1 个老板主账号
- 0 个车队长
- 0 个司机

---

### 租户 3：测试3

**Boss ID**: `BOSS_1764145957063_60740476`  
**公司名称**: 测试3  
**总账号数**: 1 个

| 账号类型 | 姓名 | 电话 | 创建时间 |
|---------|------|------|----------|
| 👑 老板（主账号） | 测试3 | 13300000001 | 2025-11-25 22:27:57 |

**账号结构**：
- 1 个老板主账号
- 0 个车队长
- 0 个司机

---

### 租户 4-8：独立司机账号

这些租户只有一个司机账号，没有老板主账号（可能是数据异常）：

| Boss ID | 账号类型 | 姓名 | 电话 | 创建时间 |
|---------|---------|------|------|----------|
| BOSS_1764145957063_53451525 | 🚗 司机 | 喊喊 | 15766121960 | 2025-11-24 19:21:57 |
| BOSS_1764145957063_15972313 | 🚗 司机 | 黄秒了 | 13677675671 | 2025-11-24 18:15:51 |
| BOSS_1764145957063_25287353 | 🚗 司机 | (无) | (无) | 2025-11-25 21:10:43 |
| BOSS_1764145957063_24625243 | 🚗 司机 | (无) | (无) | 2025-11-25 22:15:42 |

---

### 平级账号

**Boss ID**: `BOSS_1764145957063_90173298`  
**账号类型**: 👑 老板（平级账号）  
**总账号数**: 1 个

| 账号类型 | 姓名 | 电话 | 主账号ID | 创建时间 |
|---------|------|------|----------|----------|
| 👑 老板（平级账号） | 测试22 | 13566666661 | 29659703-7b22-40c3-b9c0-b56b05060fa0 | 2025-11-25 21:20:32 |

**说明**：这是一个平级账号，关联到主账号 ID `29659703-7b22-40c3-b9c0-b56b05060fa0`

---

## 📈 数据分析

### 1. 租户规模分布

| 租户规模 | 租户数量 | 占比 |
|---------|---------|------|
| 大型（5+ 账号） | 1 | 12.5% |
| 小型（1 账号） | 7 | 87.5% |

### 2. 账号类型占比

| 账号类型 | 数量 | 占比 |
|---------|------|------|
| 🚗 司机 | 9 | 60% |
| 👑 老板 | 4 | 26.7% |
| 👨‍💼 车队长 | 2 | 13.3% |

### 3. 平级账号使用情况

- **平级账号总数**：1 个
- **使用率**：25%（1/4 老板账号）
- **说明**：平级账号功能使用率较低

### 4. 车队长配置情况

- **有车队长的租户**：1 个（测试2）
- **车队长总数**：2 个
- **平均每租户车队长数**：0.25 个

### 5. 司机分布情况

- **有司机的租户**：5 个
- **司机总数**：9 个
- **平均每租户司机数**：1.13 个
- **最大租户司机数**：5 个（测试2）

---

## ⚠️ 数据异常

### 1. 孤立司机账号

发现 4 个司机账号没有对应的老板主账号：

| Boss ID | 姓名 | 电话 | 问题 |
|---------|------|------|------|
| BOSS_1764145957063_53451525 | 喊喊 | 15766121960 | 没有老板主账号 |
| BOSS_1764145957063_15972313 | 黄秒了 | 13677675671 | 没有老板主账号 |
| BOSS_1764145957063_25287353 | (无) | (无) | 没有老板主账号，且信息不完整 |
| BOSS_1764145957063_24625243 | (无) | (无) | 没有老板主账号，且信息不完整 |

**建议**：
1. 检查这些司机账号的创建流程
2. 确认是否需要为这些司机创建对应的老板账号
3. 或者将这些司机账号关联到现有的老板账号

### 2. 信息不完整的账号

发现 2 个账号没有姓名和电话信息：

| Boss ID | 账号类型 | 创建时间 |
|---------|---------|----------|
| BOSS_1764145957063_25287353 | 司机 | 2025-11-25 21:10:43 |
| BOSS_1764145957063_24625243 | 司机 | 2025-11-25 22:15:42 |

**建议**：
1. 要求用户完善个人信息
2. 在创建账号时强制要求填写姓名和电话

---

## 🎯 系统使用情况

### 活跃租户

**测试2**（BOSS_1764145957063_29235549）是系统中最活跃的租户：
- ✅ 有完整的组织架构（老板 → 车队长 → 司机）
- ✅ 有 2 个车队长管理团队
- ✅ 有 5 个司机
- ✅ 总共 8 个账号

### 新建租户

**测试3**（BOSS_1764145957063_60740476）是最新创建的租户：
- 创建时间：2025-11-25 22:27:57
- 目前只有老板主账号
- 尚未添加车队长和司机

---

## 📝 账号类型说明

### 👑 老板账号（super_admin）

**权限**：
- ✅ 查看和管理同租户所有用户
- ✅ 创建车队长和司机账号
- ✅ 管理车辆和仓库
- ✅ 查看所有数据和报表

**类型**：
- **主账号**：每个租户的第一个老板账号
- **平级账号**：与主账号权限相同，但关联到主账号

### 👨‍💼 车队长账号（manager）

**权限**：
- ✅ 查看同租户所有用户
- ✅ 管理司机
- ✅ 管理车辆和仓库
- ✅ 查看团队数据和报表
- ❌ 不能创建其他车队长

### 🚗 司机账号（driver）

**权限**：
- ✅ 查看自己的信息
- ✅ 查看分配给自己的车辆
- ✅ 查看分配给自己的仓库
- ❌ 不能查看其他用户信息
- ❌ 不能管理车辆和仓库

---

## 🔐 数据隔离验证

### 租户隔离

- ✅ 租户 A（测试2）的用户无法查看租户 B（管理员）的数据
- ✅ 租户 B（管理员）的用户无法查看租户 A（测试2）的数据
- ✅ 跨租户数据完全隔离

### 角色权限隔离

- ✅ 司机只能查看自己的信息
- ✅ 车队长可以查看同租户所有用户
- ✅ 老板可以管理同租户所有用户

---

## 📊 统计图表

### 租户规模分布

```
测试2         ████████ (8 个账号)
管理员        █ (1 个账号)
测试3         █ (1 个账号)
其他租户      █ (1 个账号) × 5
```

### 账号类型分布

```
司机          ████████████ (9 个，60%)
老板          ████████ (4 个，26.7%)
车队长        ████ (2 个，13.3%)
```

---

## 💡 建议和改进

### 1. 数据清理

- 清理或修复孤立的司机账号
- 要求用户完善信息不完整的账号
- 删除测试账号（如果不再需要）

### 2. 功能优化

- 增加批量导入司机功能
- 增加车队长管理界面
- 增加租户数据统计看板

### 3. 权限管理

- 考虑增加更细粒度的权限控制
- 增加审计日志功能
- 增加账号活跃度统计

### 4. 用户体验

- 优化账号创建流程
- 增加账号信息完整性检查
- 增加账号关系可视化展示

---

**报告生成时间**：2025-11-26  
**数据来源**：Supabase profiles 表  
**报告状态**：✅ 完成
