# 普通管理端司机管理UI优化

## 更新日期
2025-11-05

## 更新内容

### 1. 新增功能
- **司机详细信息展示**：在司机列表中直接显示司机的详细信息
- **司机类型标签**：自动识别并显示"纯司机"或"带车司机"标签
- **完整信息展示**：包括年龄、手机号、车牌、驾驶证类型、驾龄、住址等

### 2. UI优化
- **卡片式设计**：采用圆角卡片布局，带有渐变色和阴影效果
- **信息分组**：将司机信息分为头部信息、详细信息和操作按钮三个区域
- **视觉层次**：使用不同的背景色和图标区分不同类型的信息
- **响应式布局**：信息卡片采用网格布局，自动适应屏幕大小

### 3. 技术实现

#### 3.1 新增API函数
```typescript
// src/db/api.ts
export async function getDriverDetailInfo(driverId: string)
```
该函数获取司机的完整信息，包括：
- 基本资料（profile）
- 驾驶证信息（license）
- 车辆信息（vehicles）
- 计算得出的年龄（age）
- 计算得出的驾龄（drivingYears）
- 司机类型（driverType）

#### 3.2 司机类型判断逻辑
- **带车司机**：拥有至少一辆车辆的司机
- **纯司机**：没有车辆的司机

#### 3.3 信息展示规则
- **年龄**：从身份证出生日期计算得出
- **驾龄**：从驾驶证初次领证日期计算得出
- **车牌号**：如果有多辆车，用顿号（、）分隔显示
- **住址**：显示身份证上的地址信息

### 4. 显示的信息字段

#### 4.1 头部信息
- 司机姓名（优先显示实名）
- 实名认证状态标签
- 司机类型标签（纯司机/带车司机）
- 手机号码

#### 4.2 详细信息（网格布局）
- **年龄**：显示岁数（如果有身份证信息）
- **驾龄**：显示年数（如果有驾驶证信息）
- **准驾车型**：显示驾驶证类型（如C1、B2等）
- **车辆数量**：显示拥有的车辆数量

#### 4.3 附加信息
- **车牌号**：橙色渐变背景，显示所有车辆的车牌号
- **住址**：蓝色背景，显示身份证上的详细地址

### 5. 视觉设计

#### 5.1 颜色方案
- **主色调**：蓝色（#1E3A8A）- 用于主要元素
- **辅助色**：
  - 绿色 - 实名认证标签、驾龄图标
  - 橙色 - 带车司机标签、车辆相关信息
  - 紫色 - 驾驶证类型图标
  - 灰色 - 背景和边框

#### 5.2 图标使用
- 账户图标（i-mdi-account）：司机头像
- 蛋糕图标（i-mdi-cake-variant）：年龄
- 方向盘图标（i-mdi-steering）：驾龄
- 卡片图标（i-mdi-card-account-details）：驾驶证类型
- 汽车图标（i-mdi-car）：车辆信息
- 地图标记图标（i-mdi-home-map-marker）：住址

### 6. 功能保持不变
- 司机选择功能
- 仓库分配功能
- 查看个人信息功能
- 查看车辆管理功能
- 添加司机功能
- 搜索司机功能

### 7. 性能优化
- 在加载司机列表时，同时加载所有司机的详细信息
- 使用Map数据结构存储司机详细信息，提高查询效率
- 详细信息缓存在组件状态中，避免重复请求

## 效果展示

### 司机卡片布局
```
┌─────────────────────────────────────────┐
│ 👤 张三 [已实名] [带车司机]              │
│    13800138000                          │
├─────────────────────────────────────────┤
│ 🎂 年龄    🚗 驾龄                       │
│   35岁        10年                      │
│                                         │
│ 📋 准驾车型  🚙 车辆                     │
│   C1          2辆                       │
│                                         │
│ 🚗 车牌号：京A12345、京B67890            │
│                                         │
│ 📍 住址：北京市朝阳区xxx街道xxx号         │
├─────────────────────────────────────────┤
│ [个人信息]  [车辆管理]                   │
└─────────────────────────────────────────┘
```

## 注意事项
1. 如果司机没有录入驾驶证信息，将不显示年龄、驾龄、准驾车型等字段
2. 如果司机没有车辆，将显示"纯司机"标签，车辆数量显示为"无车辆"
3. 所有信息都是只读的，不能在列表页面直接编辑
4. 需要修改司机信息时，点击"个人信息"或"车辆管理"按钮进入详情页面

## 后续优化建议
1. 可以考虑添加司机照片显示
2. 可以添加司机工作状态（在岗/休假）
3. 可以添加司机评分或评价信息
4. 可以添加司机最近工作记录摘要
