# 普通管理员数据报表功能说明

## 功能概述

普通管理员可以通过"数据汇总"页面查看所管辖仓库的计件数据报表和统计分析。该页面提供了强大的筛选功能和快捷操作，帮助管理员快速了解运营情况。

## 主要功能

### 1. 多维度筛选

#### 1.1 仓库筛选
- **所有仓库**：查看所有管辖仓库的数据汇总
- **特定仓库**：选择单个仓库查看该仓库的数据

#### 1.2 司机筛选
- **所有司机**：查看所有司机的数据汇总
- **特定司机**：选择单个司机查看该司机的工作数据

#### 1.3 日期范围筛选
- **开始日期**：设置查询的起始日期
- **结束日期**：设置查询的截止日期
- **手动选择**：可以自由选择任意日期范围

### 2. 快捷筛选按钮

为了提高查询效率，系统提供了三个常用的快捷筛选按钮：

#### 2.1 前一天 📅
- **颜色**：蓝色
- **功能**：一键查看昨天的数据
- **使用场景**：快速了解昨天的运营情况

#### 2.2 本周 📅
- **颜色**：绿色
- **功能**：一键查看本周（周一到今天）的数据
- **使用场景**：查看本周的工作进度和累计数据

#### 2.3 本月 📅
- **颜色**：橙色
- **功能**：一键查看本月（1号到今天）的数据
- **使用场景**：查看本月的运营统计（默认选中）
- **默认状态**：页面打开时默认显示本月数据

### 3. 数据统计

#### 3.1 总体统计
- **总件数**：所选时间段内的总计件数
- **总金额**：所选时间段内的总收入金额

#### 3.2 品类统计
- **品类名称**：显示每个品类的名称
- **品类数量**：该品类的总件数
- **品类金额**：该品类的总金额
- **可视化展示**：使用卡片式布局，清晰展示各品类数据

### 4. 计件记录列表

#### 4.1 记录信息
每条记录显示以下信息：
- **司机信息**：司机姓名或手机号
- **工作日期**：计件的日期
- **仓库名称**：工作的仓库
- **品类名称**：计件的品类
- **是否上楼**：如果需要上楼，会显示标签
- **数量**：计件数量
- **单价**：单件价格
- **上楼费**：如果需要上楼，显示上楼费用
- **总金额**：该条记录的总金额
- **备注**：如果有备注信息，会显示在底部

#### 4.2 排序功能
- **排序按钮**：点击右上角的排序按钮可以切换排序方式
- **降序（默认）**：最新的记录在前
- **升序**：最早的记录在前
- **图标提示**：
  - 降序：显示日历降序图标
  - 升序：显示日历升序图标

### 5. 实时数据更新

#### 5.1 自动更新机制
当您进行以下操作时，数据会自动更新：
- 切换仓库筛选
- 切换司机筛选
- 修改日期范围
- 点击快捷筛选按钮
- 切换排序方式

#### 5.2 数据同步
- 统计数据（总件数、总金额）会实时更新
- 品类统计会实时重新计算
- 计件记录列表会实时刷新

## 使用场景

### 场景 1：日常数据查看
**目标**：快速了解今天或本周的运营情况

**操作步骤**：
1. 打开"数据汇总"页面
2. 点击"本周"快捷按钮
3. 查看总件数和总金额
4. 查看品类统计，了解各品类的业务量

### 场景 2：特定仓库分析
**目标**：分析某个仓库的运营数据

**操作步骤**：
1. 在仓库筛选中选择目标仓库
2. 点击"本月"快捷按钮
3. 查看该仓库本月的总体数据
4. 查看品类统计，了解该仓库的业务结构
5. 查看计件记录列表，了解详细情况

### 场景 3：司机绩效评估
**目标**：评估某个司机的工作表现

**操作步骤**：
1. 在司机筛选中选择目标司机
2. 选择评估的时间范围（如本月）
3. 查看该司机的总件数和总收入
4. 查看计件记录列表，了解工作详情
5. 如需对比不同时间段，可以切换快捷筛选按钮

### 场景 4：品类业务分析
**目标**：了解各品类的业务量和收入情况

**操作步骤**：
1. 选择"所有仓库"和"所有司机"
2. 点击"本月"快捷按钮
3. 重点查看品类统计区域
4. 对比各品类的数量和金额
5. 根据数据调整业务策略

### 场景 5：历史数据查询
**目标**：查询特定日期范围的数据

**操作步骤**：
1. 手动选择开始日期和结束日期
2. 选择需要查询的仓库和司机（可选）
3. 查看该时间段的统计数据
4. 导出或记录关键数据

## 界面布局

```
┌─────────────────────────────────────┐
│         数据汇总（页面标题）          │
│    查看计件数据报表和统计分析         │
└─────────────────────────────────────┘

┌─────────────────────────────────────┐
│  🔍 筛选条件                         │
│                                     │
│  仓库: [所有仓库 ▼]                  │
│  司机: [所有司机 ▼]                  │
│                                     │
│  开始日期: [2025-01-01 📅]           │
│  结束日期: [2025-01-31 📅]           │
│                                     │
│  [前一天] [本周] [本月]              │
└─────────────────────────────────────┘

┌──────────────────┬──────────────────┐
│  📦 总件数        │  💰 总金额        │
│  1,234          │  ¥12,345.67      │
└──────────────────┴──────────────────┘

┌─────────────────────────────────────┐
│  📊 品类统计                         │
│                                     │
│  ┌─────────────────────────────┐   │
│  │ 家电类        ¥5,000.00     │   │
│  │ 📦 数量: 500                │   │
│  └─────────────────────────────┘   │
│                                     │
│  ┌─────────────────────────────┐   │
│  │ 家具类        ¥7,345.67     │   │
│  │ 📦 数量: 734                │   │
│  └─────────────────────────────┘   │
└─────────────────────────────────────┘

┌─────────────────────────────────────┐
│  📋 计件记录          共 X 条 [排序] │
│                                     │
│  ┌─────────────────────────────┐   │
│  │ 👤 张三          1/15       │   │
│  │ 🏢 仓库A                    │   │
│  │ 🏷️ 家电类 [需上楼]          │   │
│  │ 数量: 10  单价: ¥10.00      │   │
│  │ 上楼: ¥5.00    ¥150.00     │   │
│  │ ─────────────────────────  │   │
│  │ 备注: 重物，需小心搬运       │   │
│  └─────────────────────────────┘   │
│                                     │
│  ┌─────────────────────────────┐   │
│  │ 👤 李四          1/14       │   │
│  │ ...                         │   │
│  └─────────────────────────────┘   │
└─────────────────────────────────────┘
```

## 操作说明

### 1. 筛选数据

#### 步骤 1：选择仓库
1. 点击"仓库"下拉框
2. 选择"所有仓库"或特定仓库
3. 系统自动刷新数据

#### 步骤 2：选择司机
1. 点击"司机"下拉框
2. 选择"所有司机"或特定司机
3. 系统自动刷新数据

#### 步骤 3：选择日期范围
**方式一：使用快捷按钮**
1. 点击"前一天"、"本周"或"本月"按钮
2. 系统自动设置日期范围并刷新数据
3. 选中的按钮会高亮显示

**方式二：手动选择日期**
1. 点击"开始日期"选择器
2. 选择起始日期
3. 点击"结束日期"选择器
4. 选择截止日期
5. 系统自动刷新数据
6. 所有快捷按钮恢复为未选中状态

### 2. 查看统计数据

#### 总体统计
- 在页面顶部的统计卡片中查看总件数和总金额
- 数据会根据筛选条件实时更新

#### 品类统计
- 在品类统计区域查看各品类的详细数据
- 每个品类显示名称、数量和金额
- 品类按照添加顺序排列

### 3. 查看计件记录

#### 浏览记录
- 向下滚动查看所有计件记录
- 每条记录显示完整的信息

#### 排序记录
1. 点击右上角的排序按钮
2. 在"降序"和"升序"之间切换
3. 记录列表会立即重新排序

### 4. 理解数据

#### 空数据提示
如果某个筛选条件下没有数据，会显示：
- "暂无计件记录"提示
- 灰色的包裹图标
- 此时统计数据显示为 0

#### 数据含义
- **总件数**：所有记录的数量总和
- **总金额**：所有记录的金额总和（包括基础费用、上楼费、分拣费等）
- **品类数量**：该品类的所有记录的数量总和
- **品类金额**：该品类的所有记录的金额总和

## 权限说明

### 普通管理员权限
- ✅ 查看所管辖仓库的数据
- ✅ 查看所有司机的数据
- ✅ 查看所有品类的数据
- ✅ 使用所有筛选和排序功能
- ❌ 不能编辑或删除计件记录
- ❌ 不能查看其他管理员管辖的仓库数据

### 数据范围
- 只能查看自己管辖的仓库的数据
- 如果没有管辖任何仓库，页面会显示空数据
- 超级管理员可以查看所有仓库的数据

## 注意事项

### 1. 数据准确性
- 所有统计数据都是实时计算的
- 数据来源于计件记录表
- 如果发现数据异常，请联系超级管理员

### 2. 性能优化
- 建议使用快捷筛选按钮，避免查询过长的时间范围
- 如果数据量很大，加载可能需要几秒钟
- 尽量缩小筛选范围以提高查询速度

### 3. 日期选择
- 开始日期不能晚于结束日期
- 建议查询时间范围不超过3个月
- 使用快捷按钮可以避免日期选择错误

### 4. 筛选组合
- 可以同时使用仓库、司机和日期筛选
- 筛选条件是"与"的关系（同时满足）
- 选择"所有仓库"或"所有司机"表示不限制该条件

## 常见问题

### Q1：为什么看不到某个仓库的数据？
**A**：可能的原因：
1. 您没有该仓库的管理权限
2. 该仓库在选定的时间范围内没有计件记录
3. 请联系超级管理员确认您的权限

### Q2：统计数据和记录列表不一致？
**A**：请检查：
1. 是否选择了特定的仓库或司机筛选
2. 是否修改了日期范围
3. 刷新页面重新加载数据
4. 如果问题持续，请联系技术支持

### Q3：快捷筛选按钮不起作用？
**A**：请尝试：
1. 检查是否已经选中该按钮（按钮会高亮显示）
2. 查看日期选择器的值是否已更新
3. 刷新页面重试
4. 如果问题持续，请联系技术支持

### Q4：如何导出数据报表？
**A**：当前版本暂不支持数据导出功能。如需导出数据，请：
1. 截图保存统计数据
2. 手动记录关键信息
3. 联系超级管理员获取数据导出

### Q5：能否查看更详细的数据分析？
**A**：当前版本提供的数据分析包括：
- 总体统计（总件数、总金额）
- 品类统计（各品类的数量和金额）
- 详细的计件记录列表

如需更高级的数据分析功能，请联系超级管理员提出需求。

### Q6：排序功能如何使用？
**A**：
1. 点击计件记录列表右上角的排序按钮
2. 按钮会显示当前的排序方式（升序或降序）
3. 点击按钮可以在升序和降序之间切换
4. 降序：最新的记录在前（默认）
5. 升序：最早的记录在前

### Q7：快捷筛选按钮的日期范围是什么？
**A**：
- **前一天**：昨天的日期（开始日期 = 结束日期 = 昨天）
- **本周**：本周一到今天（如果今天是周日，则从上周一开始）
- **本月**：本月1号到今天

### Q8：手动修改日期后，快捷按钮为什么变灰了？
**A**：
- 这是正常的设计
- 当您手动修改日期时，系统会自动切换到"自定义"模式
- 所有快捷按钮会恢复为未选中状态
- 如果您想使用快捷筛选，只需再次点击对应的按钮即可

## 技术说明

### 数据加载流程
1. 用户选择筛选条件
2. 系统根据条件查询数据库
3. 对数据进行排序和统计
4. 更新界面显示

### 统计计算方式
- **总件数** = Σ(所有记录的 quantity)
- **总金额** = Σ(所有记录的 total_amount)
- **品类数量** = Σ(该品类所有记录的 quantity)
- **品类金额** = Σ(该品类所有记录的 total_amount)

### 排序规则
- 按工作日期排序
- 降序：日期从新到旧
- 升序：日期从旧到新
- 相同日期的记录按创建时间排序

## 更新日志

### 2025-01-XX
- ✨ 新增快捷筛选按钮（前一天、本周、本月）
- ✨ 新增排序功能（升序/降序）
- 🎨 优化界面布局和视觉效果
- 🐛 修复日期选择器的交互问题
- ⚡ 优化数据加载性能

### 初始版本
- ✅ 基础的数据汇总功能
- ✅ 仓库和司机筛选
- ✅ 日期范围筛选
- ✅ 总体统计和品类统计
- ✅ 计件记录列表展示

## 总结

普通管理员数据报表功能为管理员提供了强大的数据查询和分析工具。通过多维度筛选、快捷操作和实时统计，管理员可以快速了解运营情况，做出数据驱动的决策。

**核心优势**：
- 🚀 快捷筛选，一键查询常用时间段
- 📊 多维度统计，全面了解业务情况
- 🔍 灵活筛选，精准定位目标数据
- 📱 响应式设计，支持移动端访问
- ⚡ 实时更新，数据始终保持最新

如有任何问题或建议，请及时反馈给技术团队。
