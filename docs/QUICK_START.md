# 车队管家快速开始指南

## 🚀 快速体验打卡功能

### 第一步：登录系统

使用测试账号登录：

**司机账号：**
- 账号：`driver` 或 `driver@fleet.com`
- 密码：`123456`

### 第二步：添加仓库（超级管理员操作）

如果您是超级管理员，需要先添加仓库：

1. 使用超级管理员账号登录（`admin` / `123456`）
2. 点击"仓库管理"
3. 点击"+ 添加仓库"
4. 填写仓库信息：
   - 仓库名称：测试仓库
   - 仓库地址：您当前的位置地址
   - 纬度/经度：使用地图工具获取
   - 打卡范围：1000米（测试时可以设置大一些）
5. 设置考勤规则：
   - 上班时间：09:00
   - 下班时间：18:00
   - 迟到阈值：15分钟
   - 早退阈值：15分钟
6. 点击"保存"

### 第三步：司机打卡

1. 使用司机账号登录
2. 在工作台点击"上下班打卡"
3. 确保手机GPS已开启
4. 点击"上班打卡"按钮
5. 系统会：
   - 获取您的GPS位置
   - 调用百度地图API获取详细地址
   - 查找最近的仓库
   - 检查是否在打卡范围内
   - 保存打卡记录

### 第四步：查看考勤记录

1. 在工作台点击"当月考勤"
2. 查看考勤统计和详细记录

---

## 📍 关于GPS定位和地址解析

### 新功能亮点

✅ **自动获取详细地址**
- 不再只显示经纬度坐标
- 自动转换为详细地址（省市区街道门牌号）
- 包含POI信息（如"百度大厦"）

✅ **智能错误提示**
- 清晰的错误信息
- 针对性的解决建议
- 友好的用户体验

### 使用百度地图API

系统已集成百度地图逆地理编码API，打卡时会自动：

1. 获取GPS坐标（gcj02坐标系）
2. 调用百度地图API
3. 将坐标转换为详细地址
4. 显示在打卡记录中

**示例：**
- 原来：`39.904200, 116.407400`
- 现在：`北京市海淀区上地十街10号百度大厦`

---

## ⚠️ 常见问题

### Q: 打卡时提示"获取位置失败"

**解决方法：**
1. 检查手机GPS是否开启
2. 检查小程序位置权限是否授予
3. 到室外或窗边重试（室内信号可能较弱）
4. 重启小程序

### Q: 打卡时提示"超出打卡范围"

**解决方法：**
1. 确认您是否在仓库附近
2. 查看提示信息中的距离
3. 到仓库更近的位置重试
4. 联系管理员调整打卡范围

### Q: 打卡时提示"地址解析失败"

**解决方法：**
1. 检查网络连接
2. 稍后重试
3. 如果持续失败，联系技术支持

### Q: 地址显示不准确

**原因：**
- GPS定位存在10-50米的误差
- 室内定位误差可能更大

**建议：**
- 在室外或窗边打卡
- 等待GPS信号稳定后再打卡

---

## 🔧 测试建议

### 测试前准备

1. **设置大范围**：测试时将打卡范围设置为1000米或更大
2. **获取坐标**：使用地图工具获取您当前位置的坐标
3. **创建仓库**：使用您当前位置创建测试仓库

### 测试步骤

1. **基础功能测试**
   - ✅ 上班打卡
   - ✅ 下班打卡
   - ✅ 查看考勤记录
   - ✅ 查看考勤统计

2. **地址解析测试**
   - ✅ 检查地址是否详细
   - ✅ 检查地址是否准确
   - ✅ 检查是否包含POI信息

3. **边界测试**
   - ✅ 在范围边缘打卡
   - ✅ 超出范围打卡（应该失败）
   - ✅ 网络异常时打卡

---

## 📱 权限说明

### 位置权限

小程序需要获取您的位置信息用于：
- 上下班打卡定位
- 验证是否在仓库范围内
- 记录打卡位置

**隐私保护：**
- 位置信息仅用于打卡功能
- 不会在后台获取位置
- 不会分享给第三方

---

## 📞 获取帮助

如有任何问题：

1. 查看 [仓库考勤系统使用指南](./WAREHOUSE_ATTENDANCE_GUIDE.md)
2. 查看 [百度地图API集成说明](./GEOCODING_INTEGRATION.md)
3. 联系系统管理员

---

## 🎯 下一步

- 📖 阅读完整的 [使用指南](./WAREHOUSE_ATTENDANCE_GUIDE.md)
- 🔧 了解 [技术实现](./GEOCODING_INTEGRATION.md)
- 💡 提出改进建议
