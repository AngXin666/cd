# 拼音搜索功能测试示例

## 测试数据

假设系统中有以下司机：

| 姓名 | 手机号 | 拼音 | 拼音首字母 |
|------|--------|------|-----------|
| 张三 | 13800138000 | zhangsan | zs |
| 张四 | 13800138001 | zhangsi | zs |
| 李四 | 13900139000 | lisi | ls |
| 王五 | 13700137000 | wangwu | ww |
| 赵六 | 13600136000 | zhaoliu | zl |
| 周七 | 13500135000 | zhouqi | zq |
| 吴八 | 13400134000 | wuba | wb |
| 郑九 | 13300133000 | zhengjiu | zj |
| 孙十 | 13200132000 | sunshi | ss |

---

## 测试用例

### 用例1：完整姓名搜索

| 输入 | 匹配结果 | 说明 |
|------|---------|------|
| 张三 | 张三 | 精确匹配 |
| 李四 | 李四 | 精确匹配 |
| 王五 | 王五 | 精确匹配 |

### 用例2：拼音首字母搜索

| 输入 | 匹配结果 | 说明 |
|------|---------|------|
| zs | 张三、张四 | 匹配所有拼音首字母为zs的司机 |
| ls | 李四 | 匹配拼音首字母为ls的司机 |
| ww | 王五 | 匹配拼音首字母为ww的司机 |
| zl | 赵六 | 匹配拼音首字母为zl的司机 |
| zq | 周七 | 匹配拼音首字母为zq的司机 |
| wb | 吴八 | 匹配拼音首字母为wb的司机 |
| zj | 郑九 | 匹配拼音首字母为zj的司机 |
| ss | 孙十 | 匹配拼音首字母为ss的司机 |

### 用例3：部分拼音首字母搜索

| 输入 | 匹配结果 | 说明 |
|------|---------|------|
| z | 张三、张四、赵六、周七、郑九 | 匹配所有姓氏拼音首字母为z的司机 |
| w | 王五、吴八 | 匹配所有姓氏拼音首字母为w的司机 |
| l | 李四 | 匹配所有姓氏拼音首字母为l的司机 |
| s | 孙十 | 匹配所有姓氏拼音首字母为s的司机 |

### 用例4：完整拼音搜索

| 输入 | 匹配结果 | 说明 |
|------|---------|------|
| zhangsan | 张三 | 完整拼音匹配 |
| zhang | 张三、张四 | 部分拼音匹配 |
| lisi | 李四 | 完整拼音匹配 |
| wangwu | 王五 | 完整拼音匹配 |
| wang | 王五 | 部分拼音匹配 |

### 用例5：手机号搜索

| 输入 | 匹配结果 | 说明 |
|------|---------|------|
| 138 | 张三、张四 | 匹配手机号包含138的司机 |
| 139 | 李四 | 匹配手机号包含139的司机 |
| 137 | 王五 | 匹配手机号包含137的司机 |
| 136 | 赵六 | 匹配手机号包含136的司机 |
| 135 | 周七 | 匹配手机号包含135的司机 |
| 134 | 吴八 | 匹配手机号包含134的司机 |
| 133 | 郑九 | 匹配手机号包含133的司机 |
| 132 | 孙十 | 匹配手机号包含132的司机 |

### 用例6：混合搜索

| 输入 | 匹配结果 | 说明 |
|------|---------|------|
| 张 | 张三、张四 | 匹配姓氏为张的司机 |
| san | 张三 | 匹配名字拼音为san的司机 |
| 00138 | 张三、张四 | 匹配手机号包含00138的司机 |

### 用例7：大小写不敏感

| 输入 | 匹配结果 | 说明 |
|------|---------|------|
| ZS | 张三、张四 | 大写字母，匹配结果相同 |
| Zs | 张三、张四 | 混合大小写，匹配结果相同 |
| zS | 张三、张四 | 混合大小写，匹配结果相同 |
| ZHANGSAN | 张三 | 大写字母，匹配结果相同 |

### 用例8：空格处理

| 输入 | 匹配结果 | 说明 |
|------|---------|------|
| ` zs ` | 张三、张四 | 自动去除首尾空格 |
| ` zhang ` | 张三、张四 | 自动去除首尾空格 |

---

## 实际操作步骤

### 步骤1：准备测试环境
1. 确保系统中有上述测试数据
2. 登录系统，进入计件报表页面

### 步骤2：测试拼音首字母搜索
1. 在司机搜索框中输入 `zs`
2. 观察司机列表是否显示：张三、张四
3. 点击下拉框，确认列表中只有这两个司机

### 步骤3：测试部分拼音搜索
1. 在司机搜索框中输入 `z`
2. 观察司机列表是否显示：张三、张四、赵六、周七、郑九
3. 点击下拉框，确认列表中有这些司机

### 步骤4：测试完整拼音搜索
1. 在司机搜索框中输入 `zhangsan`
2. 观察司机列表是否只显示：张三
3. 点击下拉框，确认列表中只有张三

### 步骤5：测试手机号搜索
1. 在司机搜索框中输入 `138`
2. 观察司机列表是否显示：张三、张四
3. 点击下拉框，确认列表中只有这两个司机

### 步骤6：测试选择司机
1. 在司机搜索框中输入 `zs`
2. 从下拉框中选择"张三"
3. 观察记录列表是否只显示张三的记录
4. 观察统计数据是否只包含张三的数据

### 步骤7：测试搜索关键词变化
1. 在司机搜索框中输入 `zs`
2. 从下拉框中选择"张三"
3. 修改搜索关键词为 `ls`
4. 观察选中的司机是否自动重置为"所有司机"
5. 观察司机列表是否只显示李四

---

## 预期结果

### 功能正常的标志

1. **搜索功能**
   - ✅ 输入拼音首字母能正确匹配司机
   - ✅ 输入完整拼音能正确匹配司机
   - ✅ 输入手机号能正确匹配司机
   - ✅ 大小写不敏感
   - ✅ 自动去除首尾空格

2. **筛选功能**
   - ✅ 选择司机后，记录列表只显示该司机的记录
   - ✅ 统计数据准确
   - ✅ 搜索关键词变化时，选中的司机自动重置

3. **用户体验**
   - ✅ 搜索响应速度快
   - ✅ 界面显示正常
   - ✅ 操作流畅

---

## 常见问题排查

### 问题1：搜索不到司机

**可能原因：**
1. 司机姓名或手机号输入错误
2. 该司机不在系统中
3. 拼音转换失败

**排查步骤：**
1. 检查输入的关键词是否正确
2. 尝试使用完整姓名搜索
3. 尝试使用手机号搜索
4. 检查浏览器控制台是否有错误信息

### 问题2：搜索结果不准确

**可能原因：**
1. 多音字识别错误
2. 姓名中包含特殊字符
3. 拼音库版本问题

**排查步骤：**
1. 检查司机姓名是否包含多音字
2. 尝试使用不同的搜索方式
3. 检查拼音库是否正确安装

### 问题3：选中司机后数据不对

**可能原因：**
1. 司机ID获取错误
2. 数据筛选逻辑错误
3. 缓存问题

**排查步骤：**
1. 刷新页面重试
2. 检查浏览器控制台是否有错误信息
3. 检查网络请求是否正常

---

## 性能测试

### 测试场景1：大量司机

**测试数据：**
- 司机数量：1000人

**测试步骤：**
1. 在司机搜索框中输入 `z`
2. 观察搜索响应时间
3. 观察界面是否卡顿

**预期结果：**
- 搜索响应时间 < 100ms
- 界面流畅，无卡顿

### 测试场景2：频繁搜索

**测试步骤：**
1. 快速连续输入多个字符
2. 观察搜索响应
3. 观察内存使用情况

**预期结果：**
- 每次搜索都能正确响应
- 内存使用稳定，无泄漏

---

## 总结

本测试示例提供了全面的拼音搜索功能测试用例，涵盖了：

1. ✅ 完整姓名搜索
2. ✅ 拼音首字母搜索
3. ✅ 部分拼音搜索
4. ✅ 完整拼音搜索
5. ✅ 手机号搜索
6. ✅ 混合搜索
7. ✅ 大小写不敏感
8. ✅ 空格处理

通过这些测试用例，可以全面验证拼音搜索功能的正确性和稳定性。

---

**文档编写日期：** 2025-11-05  
**文档版本：** v1.0  
**编写人员：** 开发团队
