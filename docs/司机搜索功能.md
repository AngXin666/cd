# 司机搜索功能

## 功能概述
在管理端的数据汇总和计件管理页面添加了司机快速检索功能，支持通过司机名字或电话号码进行实时搜索。

## 修改的页面

### 1. 普通管理端 - 数据汇总页面
**文件路径**: `src/pages/manager/data-summary/index.tsx`

**功能特性**:
- 添加了司机搜索输入框，支持输入司机名字或电话号码
- 实时过滤司机列表，显示匹配的司机
- 搜索关键词变化时自动重置司机选择为"所有司机"
- 显示搜索图标和清除按钮
- 当搜索无结果时显示提示信息

### 2. 普通管理端 - 计件管理页面
**文件路径**: `src/pages/manager/piece-work/index.tsx`

**功能特性**:
- 添加了司机搜索输入框，支持输入司机名字或电话号码
- 实时过滤司机列表，显示匹配的司机
- 搜索关键词变化时自动重置司机选择为"所有司机"
- 显示搜索图标和清除按钮
- 当搜索无结果时显示提示信息

### 3. 超级管理端 - 计件管理页面
**文件路径**: `src/pages/super-admin/piece-work/index.tsx`

**功能特性**:
- 添加了司机搜索输入框，支持输入司机名字或电话号码
- 实时过滤司机列表，显示匹配的司机
- 搜索关键词变化时自动重置司机选择为"所有司机"
- 显示搜索图标和清除按钮
- 当搜索无结果时显示提示信息

## 技术实现

### 状态管理
```typescript
const [driverSearchKeyword, setDriverSearchKeyword] = useState('')
```

### 司机过滤逻辑
```typescript
const filteredDrivers = drivers.filter((driver) => {
  if (!driverSearchKeyword.trim()) return true
  const keyword = driverSearchKeyword.toLowerCase()
  const name = (driver.name || '').toLowerCase()
  const phone = (driver.phone || '').toLowerCase()
  return name.includes(keyword) || phone.includes(keyword)
})
```

### 自动重置选择
```typescript
useEffect(() => {
  setSelectedDriverIndex(0)
}, [driverSearchKeyword])
```

## UI 组件

### 搜索输入框
- 使用 Material Design Icons 的搜索图标 (`i-mdi-magnify`)
- 输入框占据剩余空间 (`flex-1`)
- 显示清除按钮（当有输入内容时）
- 使用清除图标 (`i-mdi-close-circle`)

### 司机选择器
- 保留原有的下拉选择功能
- 选项列表根据搜索关键词动态过滤
- 显示"所有司机"选项

### 提示信息
- 当搜索无结果时显示橙色提示文字
- 提示内容："未找到匹配的司机"

## 用户体验优化

1. **实时搜索**: 输入时立即过滤结果，无需点击搜索按钮
2. **清除功能**: 点击清除按钮快速清空搜索内容
3. **自动重置**: 搜索关键词变化时自动重置为"所有司机"，避免选择错误
4. **无结果提示**: 搜索无结果时显示友好的提示信息
5. **大小写不敏感**: 搜索时不区分大小写
6. **多字段匹配**: 同时支持按名字和电话号码搜索

## 搜索规则

- **名字匹配**: 支持部分匹配，例如输入"张"可以匹配"张三"、"张四"等
- **电话号码匹配**: 支持部分匹配，例如输入"138"可以匹配所有以138开头的电话号码
- **空格处理**: 自动去除首尾空格
- **大小写处理**: 统一转换为小写进行匹配

## 注意事项

1. 搜索功能只影响司机选择器的选项列表，不影响其他筛选条件
2. 搜索关键词变化时会自动重置司机选择，确保数据一致性
3. 过滤后的司机列表会影响计件记录的加载逻辑
4. 所有修改都保持了原有的数据加载和筛选逻辑
