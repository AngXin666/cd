# 登录指南

## 测试账号信息

系统已预置3个测试账号，密码均为 `123456`：

| 账号 | 密码 | 角色 | 邮箱 | 说明 |
|------|------|------|------|------|
| admin | 123456 | 超级管理员 | admin@fleet.com | 拥有所有权限，可管理所有用户 |
| admin2 | 123456 | 普通管理员 | admin2@fleet.com | 可管理司机信息 |
| admin1 | 123456 | 司机 | admin1@fleet.com | 基础权限，只能查看自己的信息 |

## 登录方式

### 方式一：密码登录（推荐）

这是最简单快捷的登录方式，适合测试账号使用。

**步骤**：
1. 打开登录页面
2. 确保选中"密码登录"标签（默认已选中）
3. 在账号输入框中输入账号名，例如：`admin`
4. 在密码输入框中输入：`123456`
5. 点击"登录"按钮
6. 登录成功后会自动跳转到对应角色的工作台

**支持的输入格式**：
- 账号名：admin、admin1、admin2
- 邮箱地址：admin@fleet.com、admin1@fleet.com、admin2@fleet.com
- 手机号：如果注册时使用了手机号，也可以使用手机号登录

### 方式二：验证码登录

需要真实的手机号才能使用此方式。

**步骤**：
1. 打开登录页面
2. 点击"验证码登录"标签
3. 输入手机号
4. 点击"发送验证码"按钮
5. 输入收到的验证码
6. 点击"登录"按钮

**注意**：测试账号使用的是账号名而非真实手机号，因此无法使用验证码登录方式。

## 登录后的页面

根据不同的角色，登录后会跳转到不同的工作台：

### 超级管理员（admin）
- 跳转到：超级管理端工作台
- 可以访问：
  - 系统概览
  - 用户管理（可修改所有用户的角色）
  - 司机管理
  - 车辆管理
  - 所有统计数据

### 普通管理员（admin2）
- 跳转到：普通管理端工作台
- 可以访问：
  - 管理员工作台
  - 司机管理（可查看和编辑司机信息）
  - 基础统计数据

### 司机（admin1）
- 跳转到：司机端工作台
- 可以访问：
  - 个人工作台
  - 今日统计
  - 个人信息（只能查看和编辑自己的信息）

## 常见问题

### Q: 输入账号密码后提示"登录失败，请检查账号密码"？
**A**: 请确认：
1. 账号名输入正确（区分大小写）
2. 密码为 `123456`（6个数字）
3. 没有多余的空格

### Q: 可以使用邮箱登录吗？
**A**: 可以！系统会自动识别输入的是账号名还是邮箱地址。例如：
- 输入 `admin` 或 `admin@fleet.com` 都可以登录超级管理员账号

### Q: 忘记密码怎么办？
**A**: 测试账号的密码固定为 `123456`。如果是自己注册的账号忘记密码，目前系统暂不支持密码重置功能。

### Q: 如何切换账号？
**A**: 
1. 点击右上角的退出登录按钮
2. 返回登录页面
3. 使用其他账号登录

## 技术说明

### 密码加密方式
系统使用 PostgreSQL 的 `crypt()` 函数配合 bcrypt 算法对密码进行加密存储，确保密码安全。

### 登录认证流程
1. 用户输入账号和密码
2. 系统判断输入的是账号名、邮箱还是手机号
3. 如果是账号名，自动转换为对应的邮箱地址（格式：账号名@fleet.com）
4. 调用 Supabase Auth API 进行身份验证
5. 验证成功后，从 profiles 表获取用户角色信息
6. 根据角色跳转到对应的工作台页面

### 安全提示
⚠️ **重要**：这些测试账号仅用于开发和测试环境，生产环境中应该：
1. 删除所有测试账号
2. 使用更强的密码策略（至少8位，包含大小写字母、数字和特殊字符）
3. 启用双因素认证
4. 定期更换密码
