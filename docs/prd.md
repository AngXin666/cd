# 车队管理小程序需求文档（更新版）

## 1. 小程序概述
### 1.1 小程序名称
车队管家

### 1.2 小程序描述
一款专为车队管理打造的微信小程序，提供多角色权限管理，包含司机端、普通管理端和超级管理员端三个不同界面，满足车队运营的分层管理需求。

## 2. 权限层级定义
### 2.1 权限角色划分
- **超级管理员**：拥有系统的完整权限，包括所有操作的查看、修改、删除和新增
- **普通管理端**：权限严格限定于查看计件考勤数据，不具备任何新增、修改或删除数据的权限
- **司机端（特定角色）**：允许修改自身历史计件数据，但无权修改或删除其他用户的数据

### 2.2 核心权限控制规则
- **计件考勤数据模块权限**
  - 普通管理端：仅开放「查看/读取」权限
  - 禁止普通管理端进行数据的新增、修改（编辑）、删除操作
- **用户历史数据修改权限**
  - 司机本人有权修改属于自己的过往计件记录
  - 司机可删除错误的计件记录（仅限本人数据）
- **删除操作安全机制**
  - 系统中所有删除操作（尤其是由超级管理员执行时）必须触发二次确认流程，弹出确认对话框，以防止误删
  - 司机删除记录前需输入验证信息进行身份确认
- **请假离职审批权限（更新）**
  - **动态权限分配规则**：
    - 当仓库未分配管理员时，超级管理员具备该仓库所有司机的请假与离职审批权限
    - 当仓库已分配管理员后，超级管理员不再具备该仓库的请假与离职审批权限，权限转移至仓库管理员
  - **普通管理端权限**：可审批管辖范围内司机的请假与离职申请
  - **司机端权限**：仅可提交申请和查看自己的申请状态
  - **权限一致性**：请假审批权限与离职审批权限采用相同的分配规则

## 3. 功能架构
### 3.1 司机端界面
- 司机个人工作台
- 基础信息展示模块
- gps打卡功能
  - 实时gps检测
  - 打卡状态显示
  - 打卡记录查询
  - 仓库范围提示
- 计件数据管理
  - 个人计件数据录入
  - 计件记录修改和确认（仅限自己的历史数据）
  - 计件历史记录查看
  - **优化后的计件记录展示功能**
    - 完整显示每条记录的日期信息（年-月-日格式）
    - 支持按日期范围筛选功能
    - 支持按日期正序/倒序排列
    - 记录编辑和删除操作权限
    - 操作日志记录和查看
    - **精确时间记录功能**：支持添加具体时间（小时:分钟）到计件记录中
    - **费用明细展示**：详细显示基础费用、上楼费用、总费用的组成明细
- **请假管理模块（全面升级版）**
  - **快捷请假功能（新增）**
    - **滚轮选择器**：通过滚轮滑动快速选择请假天数（1-30天）
    - **智能日期设置**：默认起始日期自动设置为第二天
    - **快速申请模式**：选择天数后自动计算结束日期
    - **一键提交**：快捷请假支持一键快速提交
  - **补请假功能（新增）**
    - **历史日期选择**：允许手动选择当天及之前的日期进行补假申请
    - **补假标识**：补请假申请带有特殊标识「补假」
    - **补假说明**：必填补假原因和详细说明
    - **审批提醒**：补假申请会特别提醒审批人员注意
  - **标准请假申请功能**
    - 请假类型选择（事假、病假、年假、调休等）
    - 开始时间与结束时间选择（支持日期时间选择器）
    - **智能天数计算**：根据选择的起始日期和结束日期自动计算总天数，实时显示计算结果
    - **天数限制验证**：根据所属仓库设置的请假天数上限进行验证，超过上限时显示提示信息
    - 请假事由填写（文本输入框，支持多行输入）
    - 附件上传功能（支持图片上传，如病假条等证明材料）
    - **草稿管理功能**：
      - 支持请假申请草稿保存，允许用户中途保存未完成的申请
      - 草稿列表展示，显示保存时间和申请类型
      - 支持草稿的编辑、续填和正式提交操作
      - 草稿自动保存机制，防止数据丢失
    - 申请提交与撤销功能
  - **离职申请功能（优化版）**
    - **智能日期限制**：离职申请日期只能选择距当前日期指定天数后的日期（根据仓库设置）
    - **提前天数提示**：界面显示当前仓库要求的离职申请提前天数
    - **最早可选日期计算**：系统自动计算并显示最早可选的离职日期
    - 离职原因填写（下拉选择+自定义输入）
    - 工作交接说明（可选）
    - **草稿管理功能**：支持离职申请的草稿保存和续填
    - 申请提交功能
  - **申请状态查看**
    - 显示所有提交的请假与离职申请列表
    - 申请状态标识（审批中、已通过、已驳回）
    - 申请详情查看（包含审批意见）
    - 驳回申请的重新提交功能
    - **超限提示**：当请假天数超过仓库设置上限时，显示「需管理员手动审批」提示

### 3.2 普通管理端界面
- 管理员工作台
- 基础管理功能模块
- 打卡管理功能
  - 司机打卡记录查看
  - 打卡异常提醒
- **多仓库管理功能**
  - **仓库选择器**：当管理员管辖多个仓库时，页面顶部显示仓库选择下拉框
  - **动态数据更新**：选择仓库后，下方所有数据实时动态更新显示
  - **仓库切换记忆**：系统记住管理员最后选择的仓库，下次登录时自动选中
- 司机管理页面
  - **快速检索功能**
    - 页面顶部提供司机快速检索输入框
    - 支持按司机工号、姓名、手机号进行模糊搜索
    - 支持快速检索特定司机（如：A电话号码）
    - 检索结果实时显示，支持一键gps到目标司机
    - 检索历史记录保存，方便重复查询
  - 仓库列表展示（每个仓库提供可点击入口）
  - 仓库详情页面
    - 考勤统计区域
      - 出勤日期记录
      - 工作时长统计
      - 迟到/早退记录
      - 考勤率统计
    - 计件统计区域
      - 完成订单数统计
      - 计件类型分类
      - 计件单价展示
      - 总金额汇总
    - 数据筛选功能
      - 按日期范围筛选
      - 按统计维度切换（日/周/月）
- **增强的计件记录功能**
  - **完整功能对等**：具备与司机端相同的完整计件记录功能
    - 精确时间记录查看（显示具体时间：小时:分钟）
    - 详细费用明细展示（基础费用+上楼费用=总费用）
    - 完整的记录信息展示
  - **记录详情查看**
    - 每条计件记录支持点击操作
    - 点击后弹出详情窗口，展示该记录的完整详细信息
    - 详情窗口包含：司机信息、时间详情、品类信息、数量明细、费用组成、备注信息等
  - **实时数据同步**
    - 确保数据实时同步更新
    - 页面响应速度满足实时操作需求
- 数据汇总功能
  - 数据汇总查看权限（仅查看，无编辑权限）
    - 查看指定单个司机的计件数据
    - 查看所管辖仓库内所有司机的汇总计件数据
- **请假离职审批管理（增强版）**
  - **审批工作台**
    - 待审批申请列表（请假与离职申请）
    - 申请类型标识和紧急程度标记
    - 申请时间排序显示
    - **智能天数显示**：请假申请自动显示计算后的总天数
    - **超限标识**：超过仓库设置天数上限的申请特殊标记
  - **审批操作功能**
    - 申请详情查看（包含司机信息、申请内容、附件等）
    - 通过/驳回操作按钮
    - 驳回时必填驳回理由
    - 审批意见填写（可选）
    - **超限审批**：对于超过天数上限的申请，需要特殊审批流程
  - **审批记录管理**
    - 已审批申请历史记录
    - 审批统计数据（通过率、处理时长等）
    - 按司机、时间范围筛选审批记录

### 3.3 超级管理员端界面
- 超级管理员控制台
- 系统管理功能模块
- 仓库gps管理
  - 仓库信息设置
  - gps范围配置（支持设置仓库坐标和允许打卡的范围半径）
  - 打卡时间段设置（可为不同仓库设置不同的有效打卡时间）
  - 仓库列表管理
- **仓库请假离职规则管理（新增）**
  - **请假天数上限设置**
    - 为每个独立仓库分别设置允许的请假天数上限（1-30天）
    - 支持按请假类型设置不同上限（事假、病假、年假等）
    - 超过上限的申请需要超级管理员手动审批
    - 设置历史记录和变更日志
  - **离职提前天数设置**
    - 为每个独立仓库分别设置离职申请需提前的天数要求（7-90天）
    - 支持按司机级别设置不同要求（普通司机、资深司机等）
    - 特殊情况下的例外处理规则设置
    - 设置变更需要二次确认
  - **规则管理界面**
    - 仓库规则一览表，显示所有仓库的当前设置
    - 批量设置功能，支持将规则应用到多个仓库
    - 规则模板功能，预设常用的规则组合
    - 规则生效时间设置，支持延迟生效
- 计件管理功能
  - 全部仓库计件数据查看和管理
  - 品类设置和管理
  - 计件数据统计和报表
  - 上楼单价配置
- **管理功能**
  - **计件报表**
    - **全局数据查看权限**
      - 可查看所有司机的数据汇总
      - 具备全局数据查看权限
    - **计件记录展示优化**
      - 完整显示每条记录的日期信息（YYYY-MM-DD格式）
      - 日期信息使用16px加粗字体和深色显示，确保醒目易读
      - 当日记录使用特殊标识（如「今日」标签）
      - **精确时间显示**：显示具体录入时间（YYYY-MM-DD HH:mm格式）
      - **详细费用明细**：清晰展示基础费用、上楼费用、总费用的详细组成
    - **筛选和排序功能**
      - 提供日期范围选择器，支持自定义起止日期
      - 快捷筛选选项：今日、前一天、近7天、本周、近30天、本月、上月
      - 支持按日期正序（最早在前）和倒序（最新在前）排列
      - 支持按司机、仓库、品类等维度筛选
      - 筛选结果实时更新，显示匹配记录数量
    - **数据管理操作**
      - 具备全部计件记录的编辑、删除权限
      - 编辑操作需进行二次确认，弹窗显示修改前后数据对比
      - 删除操作触发二次确认，明确显示即将删除的记录详情
      - 所有操作自动记录操作日志
    - **统计分析功能**
      - 计件数量统计（按司机、仓库、品类分组）
      - 收入金额统计和趋势分析
      - 品类分布统计和占比分析
      - 上楼服务统计和费用分析
      - 支持数据导出功能（Excel格式）
    - **界面布局设计**
      - 采用卡片式布局展示计件记录
      - 日期信息采用卡片顶部显示
      - 操作按钮（编辑、删除）布局在记录卡片右侧
      - 编辑按钮使用蓝色，删除按钮使用红色，视觉区分明确
- 权限分配管理
  - 灵活的权限分配界面
  - 为不同角色精确配置权限
- **动态请假离职管理（更新版）**
  - **智能权限管理**
    - **权限状态监控**：实时监控仓库管理员分配状态
    - **动态权限切换**：
      - 当仓库未分配管理员时，超级管理员自动获得该仓库的审批权限
      - 当仓库分配管理员后，超级管理员自动失去该仓库的审批权限
    - **权限提示机制**：
      - 界面明确显示当前具备审批权限的仓库列表
      - 无权限操作时显示明确的权限说明和联系方式
  - **全公司审批管理**
    - 查看全公司所有司机的请假与离职申请（仅限有权限的仓库）
    - 具备有权限仓库内所有申请的审批权限（通过/驳回）
    - 支持批量审批操作
    - **智能天数计算显示**：所有请假申请自动显示计算后的总天数
    - **超限申请处理**：对于超过仓库设置天数上限的申请，超级管理员可进行手动审批
  - **审批流程监控**
    - 审批流程可视化展示
    - 审批时效监控和提醒
    - 异常申请标记和处理
  - **数据统计分析**
    - 请假计件报表（按部门、时间、类型分析）
    - 离职率统计和趋势分析
    - 审批效率统计
    - 数据导出功能

## 4. 打卡功能详细说明
### 4.1 gps打卡机制
- 司机必须在管理员预设的仓库gps范围内才能成功打卡
- 系统自动获取司机当前gps位置并与仓库范围进行匹配
- 超出范围时显示距离最近仓库的方向和距离提示

### 4.2 仓库管理
- 管理员可添加多个仓库位置
- 每个仓库可独立设置gps范围（半径）
- 每个仓库可设置不同的打卡有效时间段

### 4.3 打卡时间控制
- 支持设置每日打卡时间段
- 可为不同仓库设置不同的时间规则
- 非有效时间段内无法进行打卡操作

## 5. 仓库详情页面功能说明
### 5.1 页面布局
- 顶部仓库基本信息展示
- 中部分为考勤统计区域和计件统计区域
- 底部提供数据筛选和导出功能

### 5.2 考勤统计功能
- 展示司机在该仓库的详细考勤记录
- 支持查看具体出勤日期、上下班时间
- 自动计算工作时长并标注异常情况
- 统计迟到、早退次数及时长

### 5.3 计件统计功能
- 展示司机在该仓库的计件工作数据
- 按计件类型分类统计完成数量
- 显示各类型计件单价和对应收入
- 提供总计件数和总金额汇总

### 5.4 数据筛选
- 支持按日期范围自定义筛选
- 提供快捷时间选项（今日、本周、本月）
- 数据实时更新，筛选结果即时展示

## 6. 计件管理功能模块
### 6.1 核心数据字段
- 件数（必填项）：记录具体的计件数量
- 单价（必填项）：每件商品的基础单价
- 品类（必填项）：商品分类，可由管理员预设
- 是否需要上楼（默认值为「否」）：标识是否需要额外的上楼服务
- 上楼单价（当选择需要上楼时必填）：上楼服务的额外费用
- **精确时间记录**：支持记录具体的工作时间（小时:分钟格式）
- **费用明细组成**：自动计算并显示基础费用、上楼费用、总费用的详细组成

### 6.2 功能实现要求
- **前端界面权限控制**
  - 根据用户角色动态显示或隐藏对应的操作按钮（如「新增」、「编辑」、「删除」）
  - 普通管理端界面不显示任何编辑、删除按钮
- **二次确认机制**
  - 二次确认弹窗需清晰提示即将删除的数据内容，并确认操作
  - 删除确认对话框包含具体删除内容的详细信息
- **司机端计件数据录入界面**
  - 提供所有核心数据字段的输入表单
  - 品类下拉选择（由管理员预设）
  - 上楼选项联动显示上楼单价输入框
  - 时间选择器支持精确到分钟的时间录入
  - 自动计算总金额（件数×单价+上楼费用）
  - 实时显示费用明细组成
  - 支持修改已录入的计件记录（仅限本人数据）
  - 提供数据确认和提交功能
- **管理端数据查看功能**
  - 基于管理员权限的数据范围控制
  - 支持按仓库、日期、品类等维度筛选
  - 只读模式展示司机计件数据
  - **记录详情弹窗功能**：点击记录弹出详情窗口，展示完整信息
- **统计和报表生成**
  - 计件数量统计
  - 收入金额统计
  - 品类分布统计
  - 上楼服务统计

### 6.3 数据库结构设计
- 计件记录表：包含件数、单价、品类、是否上楼、上楼单价、总金额、创建时间、修改时间、**精确工作时间**、仓库ID、司机ID、确认状态等字段
- 品类管理表：存储品类名称、状态等信息
- 权限关联表：管理员与仓库的关联关系
- 用户权限表：存储用户角色和对应权限配置
- **操作日志表**：记录司机对计件记录的修改和删除操作，包含操作类型、操作时间、操作前后数据对比等
- **数据备份表**：保存被删除记录的完整信息，支持数据恢复功能
- **请假申请表**：包含申请ID、司机ID、请假类型、开始时间、结束时间、**计算天数**、请假事由、附件路径、申请状态、提交时间、审批时间、审批人ID、审批意见、**申请方式**（快捷/标准/补假）等字段
- **离职申请表**：包含申请ID、司机ID、预计离职日期、离职原因、工作交接说明、申请状态、提交时间、审批时间、审批人ID、审批意见等字段
- **审批流程表**：记录审批操作的详细流程，包含申请ID、申请类型、审批人ID、审批操作、审批时间、审批意见、操作IP等字段
- **草稿申请表**：包含草稿ID、司机ID、申请类型、草稿内容（JSON格式）、保存时间、最后修改时间等字段
- **仓库管理员关联表**：记录仓库与管理员的分配关系，包含仓库ID、管理员ID、分配时间、状态等字段
- **仓库规则配置表（新增）**：包含仓库ID、请假天数上限、离职提前天数、规则生效时间、创建时间、修改时间、操作人员等字段
- **规则变更日志表（新增）**：记录仓库规则的所有变更历史，包含变更ID、仓库ID、变更类型、变更前值、变更后值、变更时间、操作人员等字段

## 7. 司机端快捷请假功能详细设计
### 7.1 快捷请假界面设计
- **滚轮选择器实现**
  - 采用微信小程序原生picker-view组件实现滚轮效果
  - 天数选择范围：1-30天，支持滚动选择
  - 滚轮样式：中间选中项高亮显示，上下项目半透明
  - 选择过程中实时显示对应的结束日期
- **智能日期计算**
  - **默认起始日期**：自动设置为当前日期的第二天
  - **结束日期计算**：起始日期 + 选择天数 - 1天
  - **工作日提示**：显示所选时间段包含的工作日天数
  - **节假日标识**：如果包含法定节假日，特别标注
- **天数限制验证**
  - 实时检查选择天数是否超过仓库设置的上限
  - 超过上限时滚轮选择器显示红色警告
  - 提示信息：「超过X天需要标准申请流程」
- **一键提交功能**
  - 选择天数后显示「一键请假」按钮
  - 点击后弹出确认对话框，显示请假详情
  - 确认后直接提交申请，无需填写详细表单

### 7.2 补请假功能详细设计
- **历史日期选择器**
  - 支持选择当天及之前最多30天的日期
  - 日期选择器禁用未来日期
  - 已请假的日期显示灰色不可选状态
- **补假申请表单**
  - **补假标识**：页面顶部显示「补请假申请」标题
  - **必填字段**：
    - 补假日期范围（起始日期不能晚于当天）
    - 补假原因（必填，下拉选择：突发疾病、家庭紧急事务、交通意外等）
    - 详细说明（必填，文本框，最少20字）
    - 证明材料（可选，支持上传图片）
  - **特殊验证**：
    - 补假天数同样受仓库设置上限限制
    - 补假申请需要更详细的说明和理由
- **补假审批流程**
  - 补假申请在审批列表中带有「补假」特殊标识
  - 审批时系统自动提醒管理员这是补假申请
  - 补假申请的审批记录单独统计

### 7.3 离职功能优化详细设计
- **智能日期限制**
  - 根据司机所属仓库的设置，自动计算最早可选离职日期
  - 公式：当前日期 + 仓库设置的提前天数 = 最早离职日期
  - 日期选择器自动禁用不符合要求的日期
- **提前天数提示**
  - 页面顶部显示：「根据仓库规定，离职申请需提前X天」
  - 显示最早可选日期：「最早可选离职日期：YYYY-MM-DD」
  - 如果选择了不符合要求的日期，显示红色错误提示
- **特殊情况处理**
  - 提供「紧急离职」选项，可选择提前天数不足的日期
  - 紧急离职需要填写紧急原因和详细说明
  - 紧急离职申请需要更高级别的审批权限

## 8. 超级管理员端仓库规则管理详细设计
### 8.1 请假天数上限设置功能
- **设置界面设计**
  - 仓库列表展示，每个仓库显示当前的天数上限设置
  - 点击仓库进入详细设置页面
  - 支持按请假类型设置不同上限：
    - 事假上限：1-15天
    - 病假上限：1-30天
    - 年假上限：1-30天
    - 其他类型上限：1-10天
- **设置验证机制**
  - 天数设置范围：1-30天
  - 不同类型上限不能相互冲突
  - 设置变更需要填写变更原因
  - 二次确认弹窗显示变更前后对比
- **批量设置功能**
  - 支持选择多个仓库进行批量设置
  - 提供常用设置模板（严格、标准、宽松）
  - 批量设置前显示影响的仓库列表和司机数量

### 8.2 离职提前天数设置功能
- **设置界面设计**
  - 为每个仓库设置离职申请的最少提前天数
  - 设置范围：7-90天
  - 支持按司机级别设置不同要求：
    - 普通司机：7-30天
    - 资深司机：14-45天
    - 管理司机：30-90天
- **特殊规则设置**
  - 试用期司机离职提前天数（通常较短）
  - 关键岗位司机的特殊要求
  - 淡旺季不同的提前天数要求
- **例外处理规则**
  - 设置允许紧急离职的特殊情况
  - 紧急离职的审批流程和权限要求
  - 例外情况的记录和统计

### 8.3 规则管理界面设计
- **规则一览表**
  - 表格形式显示所有仓库的当前规则设置
  - 列包含：仓库名称、请假天数上限、离职提前天数、最后修改时间、操作人员
  - 支持按仓库名称、设置时间等条件筛选
  - 支持导出规则设置报表
- **规则模板功能**
  - 预设三种模板：
    - 严格模板：请假上限较低，离职提前天数较多
    - 标准模板：中等设置，适合大部分仓库
    - 宽松模板：请假上限较高，离职提前天数较少
  - 支持自定义模板保存和应用
  - 模板应用时可选择性覆盖部分设置
- **规则生效时间设置**
  - 支持设置规则的生效时间（立即生效或指定日期生效）
  - 延迟生效的规则显示倒计时
  - 生效前可以修改或取消规则变更

### 8.4 规则变更日志与审计
- **变更日志记录**
  - 记录所有规则变更的详细信息
  - 包含：变更时间、操作人员、变更内容、变更原因
  - 支持按仓库、时间范围、操作人员筛选日志
- **变更影响分析**
  - 规则变更前显示影响分析报告
  - 包含：受影响司机数量、当前待审批申请影响、历史数据统计
  - 提供变更建议和风险提示
- **规则回滚功能**
  - 支持将规则回滚到历史版本
  - 回滚操作需要更高权限确认
  - 回滚后自动通知相关管理员和司机

## 9. 技术实现方案
### 9.1 前端技术架构
- **框架选择**：采用微信小程序原生开发框架
- **状态管理**：使用Vuex或MobX进行全局状态管理
- **UI组件库**：基于WeUI或Vant Weapp构建统一UI组件
- **数据请求**：封装统一的API请求模块，支持请求拦截和错误处理

### 9.2 滚轮选择器技术实现
- **组件选择**：使用微信小程序picker-view组件
- **数据绑定**：实时监听滚轮变化，更新选中值
- **样式定制**：自定义滚轮样式，实现高亮和渐变效果
- **性能优化**：虚拟滚动技术，支持大数据量选择

### 9.3 日期计算与验证
- **日期库选择**：使用Day.js轻量级日期处理库
- **工作日计算**：集成法定节假日数据，准确计算工作日
- **实时验证**：前端实时验证 + 后端二次验证
- **缓存策略**：节假日数据本地缓存，定期更新

### 9.4 规则引擎设计
- **规则存储**：JSON格式存储复杂规则配置
- **规则解析**：统一的规则解析引擎，支持动态规则
- **规则缓存**：Redis缓存热点规则，提升查询性能
- **规则版本管理**：支持规则版本控制和回滚

### 9.5 实时数据同步技术
- **WebSocket连接**：建立持久化连接，实现数据实时推送
- **数据缓存策略**：本地缓存 + 服务端缓存，提升数据访问速度
- **增量更新机制**：仅传输变更数据，减少网络带宽消耗
- **离线数据处理**：支持离线数据暂存，网络恢复后自动同步

### 9.6 性能优化方案
- **分页加载**：大数据量采用分页加载，每页50条记录
- **虚拟滚动**：长列表使用虚拟滚动技术，提升渲染性能
- **图片优化**：图片压缩 + 懒加载 + CDN加速
- **代码分包**：按功能模块进行代码分包，减少首屏加载时间

### 9.7 数据安全保障
- **权限验证**：前后端双重权限验证，确保数据安全
- **数据加密**：敏感数据传输采用HTTPS + AES加密
- **操作审计**：完整的操作日志记录，支持数据追溯
- **数据备份**：定时数据备份 + 实时增量备份

## 10. 界面交互设计方案
### 10.1 快捷请假界面交互
- **滚轮交互设计**
  - 滚轮高度：200px，显示5个选项
  - 中间选中项：18px字体，深色显示
  - 上下项目：14px字体，50%透明度
  - 滚动动画：缓动效果，滚动结束后自动对齐
- **实时反馈机制**
  - 选择天数时，右侧实时显示结束日期
  - 超过上限时，滚轮边框变红，显示警告图标
  - 底部显示计算结果：「请假X天，从YYYY-MM-DD到YYYY-MM-DD」
- **按钮状态设计**
  - 一键请假按钮：主题蓝色，圆角8px
  - 超限时按钮变灰，显示「需标准流程」
  - 按钮点击有缩放动画效果

### 10.2 补请假界面交互
- **日期选择器定制**
  - 未来日期显示灰色不可选
  - 已请假日期显示红色标记
  - 当天日期显示特殊边框
  - 选择日期后显示绿色确认动画
- **表单验证反馈**
  - 必填项未填写时显示红色边框
  - 字数不足时实时显示剩余字数
  - 表单验证通过时显示绿色对勾
- **补假标识设计**
  - 页面顶部显示橙色「补假」标签
  - 提交按钮文字为「提交补假申请」
  - 成功提交后显示「补假申请已提交」

### 10.3 离职申请界面交互
- **日期限制提示**
  - 页面顶部显示蓝色提示条
  - 提示内容：「离职需提前X天申请，最早可选YYYY-MM-DD」
  - 选择不符合要求的日期时弹出错误提示
- **紧急离职选项**
  - 提供「紧急离职」开关
  - 开启后日期限制放宽，但需要额外说明
  - 紧急离职申请显示红色警告标识

### 10.4 规则设置界面交互
- **设置卡片设计**
  - 每个仓库一个设置卡片
  - 卡片显示仓库名称、当前设置、最后修改时间
  - 点击卡片展开详细设置选项
- **滑动调节器**
  - 天数设置使用滑动调节器
  - 滑动过程中实时显示数值
  - 滑动结束后显示确认按钮
- **批量操作界面**
  - 支持多选仓库，选中后显示批量操作按钮
  - 批量设置弹窗显示影响范围
  - 操作确认前显示详细的变更清单

### 10.5 响应式设计适配
- **屏幕尺寸适配**
  - 支持不同屏幕尺寸的自适应布局
  - 小屏幕设备优化触摸操作区域
  - 横屏模式下的布局调整
- **交互反馈优化**
  - 触摸反馈：按钮点击有震动反馈
  - 视觉反馈：操作成功显示绿色Toast
  - 声音反馈：重要操作播放提示音

## 11. 设计风格
### 11.1 配色方案
主色调采用深蓝色(#1E3A8A)，辅助色为橙色(#F97316)，背景色为浅灰色(#F8FAFC)，警告色为红色(#EF4444)，成功色为绿色(#10B981)

### 11.2 视觉细节
采用8px圆角设计，卡片式布局带有轻微阴影效果，图标风格统一使用线性图标，滚轮选择器采用渐变透明效果

### 11.3 整体布局
采用卡片式布局，顶部导航栏固定，内容区域可滚动，底部标签栏区分不同角色入口，快捷操作按钮采用悬浮设计

## 参考文件
1. 用户上传图片：image.png