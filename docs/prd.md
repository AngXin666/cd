# 车队管理小程序需求文档

## 1. 小程序概述
### 1.1 小程序名称
车队管家

### 1.2 小程序描述
一款专为车队管理打造的微信小程序，提供多角色权限管理，包含司机端、普通管理端和超级管理员端三个不同界面，满足车队运营的分层管理需求。

## 2. 权限层级定义
### 2.1 权限角色划分
- **超级管理员**：拥有系统的完整权限，包括所有操作的查看、修改、删除和新增
- **普通管理端**：权限严格限定于查看计件考勤数据，不具备任何新增、修改或删除数据的权限
- **司机端（特定角色）**：允许修改自身历史计件数据，但无权修改或删除其他用户的数据

### 2.2 核心权限控制规则
- **计件考勤数据模块权限**
  - 普通管理端：仅开放「查看/读取」权限
  - 禁止普通管理端进行数据的新增、修改（编辑）、删除操作
- **用户历史数据修改权限**
  - 司机本人有权修改属于自己的过往计件记录
  - 司机可删除错误的计件记录（仅限本人数据）
- **删除操作安全机制**
  - 系统中所有删除操作（尤其是由超级管理员执行时）必须触发二次确认流程，弹出确认对话框，以防止误删
  - 司机删除记录前需输入验证信息进行身份确认
- **请假离职审批权限**
  - 普通管理端：可审批管辖范围内司机的请假与离职申请
  - 超级管理员：可审批全公司所有司机的请假与离职申请
  - 司机端：仅可提交申请和查看自己的申请状态

## 3. 功能架构
### 3.1 司机端界面
- 司机个人工作台
- 基础信息展示模块
- gps打卡功能
  - 实时gps检测
  - 打卡状态显示
  - 打卡记录查询
  - 仓库范围提示
- 计件数据管理
  - 个人计件数据录入
  - 计件记录修改和确认（仅限自己的历史数据）
  - 计件历史记录查看
  - **优化后的计件记录展示功能**
    - 完整显示每条记录的日期信息（年-月-日格式）
    - 支持按日期范围筛选功能
    - 支持按日期正序/倒序排列
    - 记录编辑和删除操作权限
    - 操作日志记录和查看
    - **精确时间记录功能**：支持添加具体时间（小时:分钟）到计件记录中
    - **费用明细展示**：详细显示基础费用、上楼费用、总费用的组成明细
- **请假管理模块**
  - **请假申请功能**
    - 请假类型选择（事假、病假、年假、调休等）
    - 开始时间与结束时间选择（支持日期时间选择器）
    - 请假事由填写（文本输入框，支持多行输入）
    - 附件上传功能（支持图片上传，如病假条等证明材料）
    - 申请提交与撤销功能
  - **离职申请功能**
    - 预计离职日期选择
    - 离职原因填写（下拉选择+自定义输入）
    - 工作交接说明（可选）
    - 申请提交功能
  - **申请状态查看**
    - 显示所有提交的请假与离职申请列表
    - 申请状态标识（审批中、已通过、已驳回）
    - 申请详情查看（包含审批意见）
    - 驳回申请的重新提交功能

### 3.2 普通管理端界面
- 管理员工作台
- 基础管理功能模块
- 打卡管理功能
  - 司机打卡记录查看
  - 打卡异常提醒
- **多仓库管理功能**
  - **仓库选择器**：当管理员管辖多个仓库时，页面顶部显示仓库选择下拉框
  - **动态数据更新**：选择仓库后，下方所有数据实时动态更新显示
  - **仓库切换记忆**：系统记住管理员最后选择的仓库，下次登录时自动选中
- 司机管理页面
  - **快速检索功能**
    - 页面顶部提供司机快速检索输入框
    - 支持按司机工号、姓名、手机号进行模糊搜索
    - 支持快速检索特定司机（如：A电话号码）
    - 检索结果实时显示，支持一键gps到目标司机
    - 检索历史记录保存，方便重复查询
  - 仓库列表展示（每个仓库提供可点击入口）
  - 仓库详情页面
    - 考勤统计区域
      - 出勤日期记录
      - 工作时长统计
      - 迟到/早退记录
      - 考勤率统计
    - 计件统计区域
      - 完成订单数统计
      - 计件类型分类
      - 计件单价展示
      - 总金额汇总
    - 数据筛选功能
      - 按日期范围筛选
      - 按统计维度切换（日/周/月）
- **增强的计件记录功能**
  - **完整功能对等**：具备与司机端相同的完整计件记录功能
    - 精确时间记录查看（显示具体时间：小时:分钟）
    - 详细费用明细展示（基础费用+上楼费用=总费用）
    - 完整的记录信息展示
  - **记录详情查看**
    - 每条计件记录支持点击操作
    - 点击后弹出详情窗口，展示该记录的完整详细信息
    - 详情窗口包含：司机信息、时间详情、品类信息、数量明细、费用组成、备注信息等
  - **实时数据同步**
    - 确保数据实时同步更新
    - 页面响应速度满足实时操作需求
- 数据汇总功能
  - 数据汇总查看权限（仅查看，无编辑权限）
    - 查看指定单个司机的计件数据
    - 查看所管辖仓库内所有司机的汇总计件数据
- **请假离职审批管理**
  - **审批工作台**
    - 待审批申请列表（请假与离职申请）
    - 申请类型标识和紧急程度标记
    - 申请时间排序显示
  - **审批操作功能**
    - 申请详情查看（包含司机信息、申请内容、附件等）
    - 通过/驳回操作按钮
    - 驳回时必填驳回理由
    - 审批意见填写（可选）
  - **审批记录管理**
    - 已审批申请历史记录
    - 审批统计数据（通过率、处理时长等）
    - 按司机、时间范围筛选审批记录

### 3.3 超级管理员端界面
- 超级管理员控制台
- 系统管理功能模块
- 仓库gps管理
  - 仓库信息设置
  - gps范围配置（支持设置仓库坐标和允许打卡的范围半径）
  - 打卡时间段设置（可为不同仓库设置不同的有效打卡时间）
  - 仓库列表管理
- 计件管理功能
  - 全部仓库计件数据查看和管理
  - 品类设置和管理
  - 计件数据统计和报表
  - 上楼单价配置
- **管理功能**
  - **计件报表**
    - **全局数据查看权限**
      - 可查看所有司机的数据汇总
      - 具备全局数据查看权限
    - **计件记录展示优化**
      - 完整显示每条记录的日期信息（YYYY-MM-DD格式）
      - 日期信息使用16px加粗字体和深色显示，确保醒目易读
      - 当日记录使用特殊标识（如「今日」标签）
      - **精确时间显示**：显示具体录入时间（YYYY-MM-DD HH:mm格式）
      - **详细费用明细**：清晰展示基础费用、上楼费用、总费用的详细组成
    - **筛选和排序功能**
      - 提供日期范围选择器，支持自定义起止日期
      - 快捷筛选选项：今日、前一天、近7天、本周、近30天、本月、上月
      - 支持按日期正序（最早在前）和倒序（最新在前）排列
      - 支持按司机、仓库、品类等维度筛选
      - 筛选结果实时更新，显示匹配记录数量
    - **数据管理操作**
      - 具备全部计件记录的编辑、删除权限
      - 编辑操作需进行二次确认，弹窗显示修改前后数据对比
      - 删除操作触发二次确认，明确显示即将删除的记录详情
      - 所有操作自动记录操作日志
    - **统计分析功能**
      - 计件数量统计（按司机、仓库、品类分组）
      - 收入金额统计和趋势分析
      - 品类分布统计和占比分析
      - 上楼服务统计和费用分析
      - 支持数据导出功能（Excel格式）
    - **界面布局设计**
      - 采用卡片式布局展示计件记录
      - 日期信息采用卡片顶部显示
      - 操作按钮（编辑、删除）布局在记录卡片右侧
      - 编辑按钮使用蓝色，删除按钮使用红色，视觉区分明确
- 权限分配管理
  - 灵活的权限分配界面
  - 为不同角色精确配置权限
- **全局请假离职管理**
  - **全公司审批管理**
    - 查看全公司所有司机的请假与离职申请
    - 具备所有申请的审批权限（通过/驳回）
    - 支持批量审批操作
  - **审批流程监控**
    - 审批流程可视化展示
    - 审批时效监控和提醒
    - 异常申请标记和处理
  - **数据统计分析**
    - 请假计件报表（按部门、时间、类型分析）
    - 离职率统计和趋势分析
    - 审批效率统计
    - 数据导出功能

## 4. 打卡功能详细说明
### 4.1 gps打卡机制
- 司机必须在管理员预设的仓库gps范围内才能成功打卡
- 系统自动获取司机当前gps位置并与仓库范围进行匹配
- 超出范围时显示距离最近仓库的方向和距离提示

### 4.2 仓库管理
- 管理员可添加多个仓库位置
- 每个仓库可独立设置gps范围（半径）
- 每个仓库可设置不同的打卡有效时间段

### 4.3 打卡时间控制
- 支持设置每日打卡时间段
- 可为不同仓库设置不同的时间规则
- 非有效时间段内无法进行打卡操作

## 5. 仓库详情页面功能说明
### 5.1 页面布局
- 顶部仓库基本信息展示
- 中部分为考勤统计区域和计件统计区域
- 底部提供数据筛选和导出功能

### 5.2 考勤统计功能
- 展示司机在该仓库的详细考勤记录
- 支持查看具体出勤日期、上下班时间
- 自动计算工作时长并标注异常情况
- 统计迟到、早退次数及时长

### 5.3 计件统计功能
- 展示司机在该仓库的计件工作数据
- 按计件类型分类统计完成数量
- 显示各类型计件单价和对应收入
- 提供总计件数和总金额汇总

### 5.4 数据筛选
- 支持按日期范围自定义筛选
- 提供快捷时间选项（今日、本周、本月）
- 数据实时更新，筛选结果即时展示

## 6. 计件管理功能模块
### 6.1 核心数据字段
- 件数（必填项）：记录具体的计件数量
- 单价（必填项）：每件商品的基础单价
- 品类（必填项）：商品分类，可由管理员预设
- 是否需要上楼（默认值为「否」）：标识是否需要额外的上楼服务
- 上楼单价（当选择需要上楼时必填）：上楼服务的额外费用
- **精确时间记录**：支持记录具体的工作时间（小时:分钟格式）
- **费用明细组成**：自动计算并显示基础费用、上楼费用、总费用的详细组成

### 6.2 功能实现要求
- **前端界面权限控制**
  - 根据用户角色动态显示或隐藏对应的操作按钮（如「新增」、「编辑」、「删除」）
  - 普通管理端界面不显示任何编辑、删除按钮
- **二次确认机制**
  - 二次确认弹窗需清晰提示即将删除的数据内容，并确认操作
  - 删除确认对话框包含具体删除内容的详细信息
- **司机端计件数据录入界面**
  - 提供所有核心数据字段的输入表单
  - 品类下拉选择（由管理员预设）
  - 上楼选项联动显示上楼单价输入框
  - 时间选择器支持精确到分钟的时间录入
  - 自动计算总金额（件数×单价+上楼费用）
  - 实时显示费用明细组成
  - 支持修改已录入的计件记录（仅限本人数据）
  - 提供数据确认和提交功能
- **管理端数据查看功能**
  - 基于管理员权限的数据范围控制
  - 支持按仓库、日期、品类等维度筛选
  - 只读模式展示司机计件数据
  - **记录详情弹窗功能**：点击记录弹出详情窗口，展示完整信息
- **统计和报表生成**
  - 计件数量统计
  - 收入金额统计
  - 品类分布统计
  - 上楼服务统计

### 6.3 数据库结构设计
- 计件记录表：包含件数、单价、品类、是否上楼、上楼单价、总金额、创建时间、修改时间、**精确工作时间**、仓库ID、司机ID、确认状态等字段
- 品类管理表：存储品类名称、状态等信息
- 权限关联表：管理员与仓库的关联关系
- 用户权限表：存储用户角色和对应权限配置
- **操作日志表**：记录司机对计件记录的修改和删除操作，包含操作类型、操作时间、操作前后数据对比等
- **数据备份表**：保存被删除记录的完整信息，支持数据恢复功能
- **请假申请表**：包含申请ID、司机ID、请假类型、开始时间、结束时间、请假事由、附件路径、申请状态、提交时间、审批时间、审批人ID、审批意见等字段
- **离职申请表**：包含申请ID、司机ID、预计离职日期、离职原因、工作交接说明、申请状态、提交时间、审批时间、审批人ID、审批意见等字段
- **审批流程表**：记录审批操作的详细流程，包含申请ID、申请类型、审批人ID、审批操作、审批时间、审批意见、操作IP等字段

## 7. 司机端计件记录优化功能详细设计
### 7.1 计件记录展示优化
- **日期信息显示**
  - 采用「YYYY-MM-DD」格式完整显示年月日
  - 日期信息使用加粗字体和深色显示，确保醒目易读
  - 当日记录使用特殊标识（如「今日」标签）
  - **精确时间显示**：显示具体工作时间（HH:mm格式）
- **费用明细展示**
  - 清晰显示基础费用计算：件数 × 单价 = 基础费用
  - 上楼费用单独显示（如适用）
  - 总费用 = 基础费用 + 上楼费用
- **筛选和排序功能**
  - 提供日期范围选择器，支持自定义起止日期
  - 快捷筛选选项：今日、前一天、近7天、本周、近30天、本月、上月
  - 支持按日期正序（最早在前）和倒序（最新在前）排列
  - 筛选结果实时更新，显示匹配记录数量

### 7.2 司机操作权限管理
- **编辑权限**
  - 司机仅可编辑本人创建的计件记录
  - 编辑操作需进行二次确认，弹窗显示修改前后数据对比
  - 编辑完成后自动记录操作日志
- **删除权限**
  - 司机可删除本人的错误计件记录
  - 删除前需输入手机号后四位或设定的验证码进行身份确认
  - 删除操作触发二次确认，明确显示即将删除的记录详情
- **操作日志记录**
  - 记录所有修改和删除操作的详细信息
  - 包含操作时间、操作类型、修改前后数据、操作原因等
  - 司机可查看自己的操作历史记录

### 7.3 数据安全与验证机制
- **修改操作安全**
  - 修改前弹出确认对话框，显示「修改前」和「修改后」的数据对比
  - 提供「确认修改」和「取消」按钮，防止误操作
  - 修改成功后显示绿色提示「修改成功」，失败时显示红色错误信息
- **删除验证机制**
  - 删除前要求输入验证信息（手机号后四位）
  - 验证通过后再次确认删除操作
  - 删除确认框显示记录的完整信息（日期、品类、件数、金额等）
- **数据备份与恢复**
  - 所有被删除的记录自动备份到数据备份表
  - 管理员可查看和恢复被误删的数据
  - 备份数据保留完整的原始信息和删除时间

### 7.4 界面设计与交互流程
- **界面布局设计**
  - 日期信息采用卡片顶部显示，使用16px加粗字体
  - 精确时间显示在日期下方，使用14px字体
  - 费用明细采用分层显示：基础费用 + 上楼费用 = 总费用
  - 操作按钮（编辑、删除）布局在记录卡片右侧，图标+文字形式
  - 编辑按钮使用蓝色，删除按钮使用红色，视觉区分明确
- **交互反馈机制**
  - 操作成功时显示绿色Toast提示，持续2秒自动消失
  - 操作失败时显示红色Toast提示，包含具体错误原因
  - 加载过程显示loading动画，提升用户体验
- **确认对话框设计**
  - 修改确认框：标题「确认修改」，内容显示修改前后对比表格
  - 删除确认框：标题「确认删除」，内容显示记录详情和验证输入框
  - 按钮设计：主要操作按钮使用主题色，取消按钮使用灰色边框

### 7.5 功能交互流程
- **编辑流程**
  1. 司机点击记录卡片的「编辑」按钮
  2. 跳转到编辑页面，表单预填充原有数据
  3. 司机修改数据后点击「保存」
  4. 弹出修改确认对话框，显示修改前后对比
  5. 司机确认后提交修改，系统记录操作日志
  6. 显示成功提示，返回记录列表页面
- **删除流程**
  1. 司机点击记录卡片的「删除」按钮
  2. 弹出身份验证对话框，要求输入手机号后四位
  3. 验证通过后弹出删除确认对话框，显示记录详情
  4. 司机确认删除后，系统备份数据并执行删除
  5. 记录操作日志，显示删除成功提示
  6. 刷新记录列表，移除已删除项目

## 8. 普通管理端增强功能详细设计
### 8.1 多仓库管理功能
- **仓库选择器设计**
  - 页面顶部显示仓库选择下拉框，支持搜索功能
  - 显示仓库名称和基本信息（地址、管理司机数量等）
  - 当管理员仅管辖一个仓库时，自动选中且不显示选择器
- **动态数据更新机制**
  - 选择仓库后，页面所有数据模块实时刷新
  - 数据更新过程显示loading状态，提升用户体验
  - 支持数据缓存机制，提高切换速度
- **仓库切换记忆功能**
  - 系统记住管理员最后选择的仓库
  - 下次登录时自动选中上次的仓库
  - 支持手动重置为默认仓库

### 8.2 司机快速检索功能详细设计
- **检索功能实现**
  - 页面顶部显著位置设置司机检索输入框
  - 支持按司机工号、姓名、手机号进行模糊搜索
  - 输入过程中实时显示匹配结果，支持下拉选择
  - 检索结果按相关度排序，优先显示完全匹配项
- **快速gps功能**
  - 支持直接输入特定司机标识（如：A电话号码）进行精确查找
  - 检索成功后自动跳转到对应司机的详细信息页面
  - 显示司机的基本信息、考勤统计、计件记录等完整数据
- **检索历史管理**
  - 自动保存最近10次检索记录
  - 支持点击历史记录快速重复查询
  - 提供清空检索历史功能
- **检索结果展示**
  - 检索结果以卡片形式展示司机基本信息
  - 包含司机头像、姓名、工号、联系方式、所属仓库等
  - 支持一键拨打电话、查看详细资料等快捷操作

### 8.3 计件记录功能对等设计
- **完整功能实现**
  - 具备与司机端相同的计件记录展示功能
  - 精确时间记录显示（YYYY-MM-DD HH:mm格式）
  - 详细费用明细展示（基础费用+上楼费用=总费用）
  - 完整的筛选和排序功能
- **记录详情弹窗功能**
  - **点击交互**：每条计件记录支持点击操作
  - **弹窗设计**：点击后弹出模态窗口展示详细信息
  - **详情内容**：
    - 司机基本信息（姓名、工号、联系方式）
    - 时间详情（录入时间、工作时间）
    - 品类信息（品类名称、规格说明）
    - 数量明细（件数、单价、计算过程）
    - 费用组成（基础费用、上楼费用、总费用）
    - 备注信息（如有）
    - 操作记录（创建时间、最后修改时间）
  - **弹窗交互**：
    - 支持键盘ESC键关闭
    - 点击遮罩层关闭
    - 右上角关闭按钮
    - 弹窗内容支持滚动查看

### 8.4 实时数据同步技术方案
- **数据同步机制**
  - 采用WebSocket实时数据推送
  - 数据变更时自动刷新相关页面模块
  - 支持增量数据更新，减少网络传输
- **性能优化方案**
  - 数据分页加载，每页显示50条记录
  - 虚拟滚动技术处理大量数据展示
  - 图片和非关键资源懒加载
- **响应速度优化**
  - 关键操作响应时间控制在200ms以内
  - 数据加载过程显示进度条或骨架屏
  - 网络异常时显示友好提示信息

### 8.5 界面交互设计方案
- **布局设计**
  - 顶部：仓库选择器 + 司机检索框 + 快捷操作按钮
  - 中部：数据统计卡片 + 筛选条件
  - 主体：计件记录列表（卡片式布局）
  - 底部：分页控件 + 数据导出按钮
- **交互反馈**
  - 记录卡片hover效果，提示可点击
  - 点击记录时显示loading状态
  - 弹窗打开/关闭动画效果
  - 数据更新时的过渡动画
- **响应式设计**
  - 支持不同屏幕尺寸适配
  - 移动端优化的触摸交互
  - 弹窗在小屏幕设备上全屏显示

## 9. 超级管理员端计件报表功能详细设计
### 9.1 数据汇总展示优化
- **记录展示布局**
  - 采用与司机端相同的卡片式布局设计
  - 日期信息采用卡片顶部显示，使用16px加粗字体和深色显示
  - 当日记录使用特殊标识（如「今日」标签）
  - 每条记录显示司机姓名、仓库名称、品类、件数、单价、总金额等完整信息
  - **精确时间显示**：显示具体录入时间（YYYY-MM-DD HH:mm格式）
  - **详细费用明细**：清晰展示基础费用、上楼费用、总费用的详细组成

### 9.2 筛选和排序功能
- **多维度筛选**
  - 日期范围选择器，支持自定义起止日期
  - 快捷筛选选项：今日、前一天、近7天、本周、近30天、本月、上月
  - 司机筛选：支持单选或多选司机
  - 仓库筛选：支持单选或多选仓库
  - 品类筛选：支持单选或多选品类
  - 筛选结果实时更新，显示匹配记录数量和统计金额
- **排序功能**
  - 支持按日期正序（最早在前）和倒序（最新在前）排列
  - 支持按金额从高到低或从低到高排序
  - 支持按司机姓名、仓库名称排序

### 9.3 数据管理操作权限
- **编辑权限**
  - 超级管理员具备所有计件记录的编辑权限
  - 编辑操作需进行二次确认，弹窗显示修改前后数据对比
  - 编辑完成后自动记录操作日志，包含操作人员信息
- **删除权限**
  - 超级管理员可删除任意计件记录
  - 删除操作触发二次确认，明确显示即将删除的记录详情
  - 删除确认框显示记录的完整信息（司机、日期、品类、件数、金额等）
- **批量操作**
  - 支持批量选择记录进行删除操作
  - 批量删除前显示选中记录数量和总金额
  - 批量操作同样需要二次确认

### 9.4 统计分析功能
- **实时统计显示**
  - 页面顶部显示当前筛选条件下的统计数据
  - 总记录数、总件数、总金额统计
  - 按司机分组的统计数据（件数、金额排行）
  - 按仓库分组的统计数据
  - 按品类分组的统计数据和占比
- **趋势分析**
  - 支持按日、周、月维度查看数据趋势
  - 图表展示计件数量和金额变化趋势
  - 司机工作效率对比分析
- **数据导出**
  - 支持将筛选结果导出为Excel格式
  - 导出内容包含所有字段信息和统计汇总
  - 导出文件自动命名（包含日期范围）

### 9.5 界面设计与交互
- **布局设计**
  - 顶部筛选条件区域，支持折叠展开
  - 中部统计数据展示区域
  - 主体内容为记录列表，采用卡片式布局
  - 操作按钮（编辑、删除）布局在记录卡片右侧
  - 编辑按钮使用蓝色，删除按钮使用红色
- **交互反馈**
  - 操作成功时显示绿色Toast提示，持续2秒自动消失
  - 操作失败时显示红色Toast提示，包含具体错误原因
  - 数据加载过程显示loading动画
  - 筛选条件变更时实时更新数据和统计信息

### 9.6 操作日志与数据安全
- **操作日志记录**
  - 记录超级管理员的所有修改和删除操作
  - 包含操作时间、操作人员、操作类型、修改前后数据对比
  - 支持操作日志的查询和导出
- **数据备份机制**
  - 所有被删除的记录自动备份到数据备份表
  - 备份数据包含完整的原始信息、删除时间和操作人员
  - 支持数据恢复功能，可恢复误删的记录

## 10. 请假离职管理功能详细设计
### 10.1 司机端请假申请功能
- **请假申请表单设计**
  - **请假类型选择**：下拉选择框，包含事假、病假、年假、调休、婚假、丧假、产假等选项
  - **时间选择器**：
    - 开始时间选择（年-月-日 时:分格式）
    - 结束时间选择（年-月-日 时:分格式）
    - 自动计算请假时长显示
  - **请假事由**：多行文本输入框，支持最多200字符输入
  - **附件上传**：
    - 支持图片上传（病假条、证明材料等）
    - 最多支持3张图片，每张不超过5MB
    - 支持预览和删除已上传图片
  - **紧急联系方式**：可选填写紧急情况下的联系方式
- **申请提交与管理**
  - 提交前数据验证，必填项检查
  - 提交成功后显示申请编号
  - 支持草稿保存功能
  - 审批中的申请支持撤销操作

### 10.2 司机端离职申请功能
- **离职申请表单设计**
  - **预计离职日期**：日期选择器，不能早于当前日期
  - **离职原因**：
    - 下拉选择：个人发展、薪资待遇、工作环境、家庭原因、其他
    - 选择「其他」时显示自定义输入框
  - **详细说明**：多行文本输入框，详细描述离职原因
  - **工作交接说明**：
    - 当前负责工作内容描述
    - 交接计划和建议
    - 重要事项提醒
  - **联系方式确认**：确认离职后的联系方式
- **离职申请特殊处理**
  - 离职申请提交后不支持撤销
  - 系统自动计算工作年限和相关权益
  - 提交时弹出重要提示确认框

### 10.3 申请状态管理
- **状态定义**
  - **待审批**：申请已提交，等待管理员处理
  - **审批中**：管理员正在审核处理
  - **已通过**：申请审批通过
  - **已驳回**：申请被驳回，显示驳回原因
  - **已撤销**：司机主动撤销申请
- **状态展示**
  - 列表页面显示申请类型、提交时间、状态标签
  - 状态使用不同颜色标识（待审批-橙色、已通过-绿色、已驳回-红色）
  - 支持按状态筛选申请记录
- **申请详情查看**
  - 点击申请记录查看详细信息
  - 显示申请内容、审批进度、审批意见
  - 已驳回申请显示驳回原因和重新申请按钮

### 10.4 管理端审批功能
- **审批工作台设计**
  - **待审批列表**
    - 按提交时间倒序显示待审批申请
    - 显示申请人、申请类型、提交时间、紧急程度
    - 超过24小时未处理的申请标红提醒
    - 支持批量审批操作
  - **申请详情展示**
    - 申请人基本信息（姓名、工号、部门、联系方式）
    - 申请内容完整展示
    - 附件图片预览和下载
    - 申请人历史请假记录参考
- **审批操作界面**
  - **通过操作**
    - 一键通过按钮
    - 可选填写审批意见
    - 通过后自动发送通知给申请人
  - **驳回操作**
    - 驳回原因必填（下拉选择+自定义输入）
    - 常用驳回原因：资料不全、时间冲突、不符合规定等
    - 驳回建议填写（可选）
  - **审批记录**
    - 自动记录审批时间、审批人、审批结果
    - 审批操作不可撤销，但可添加补充说明

### 10.5 审批权限与流程控制
- **权限分级管理**
  - **普通管理端权限**
    - 仅可审批所管辖仓库司机的申请
    - 请假申请：3天以内可直接审批，超过3天需上级确认
    - 离职申请：可进行初审，最终审批需超级管理员确认
  - **超级管理员权限**
    - 可审批全公司所有司机的申请
    - 所有类型申请均可直接审批
    - 可查看和管理所有审批记录
- **审批流程设计**
  - **单级审批**：超级管理员直接审批
  - **多级审批**：普通管理端初审 → 超级管理员终审
  - **紧急审批**：紧急情况下支持电话确认后的快速审批
- **审批时效管理**
  - 普通申请：48小时内完成审批
  - 紧急申请：24小时内完成审批
  - 超时未处理自动提醒上级管理员

### 10.6 数据统计与分析
- **请假统计分析**
  - **个人统计**：每个司机的年度请假天数、类型分布
  - **部门统计**：各仓库请假率、请假类型分析
  - **时间趋势**：按月度、季度统计请假趋势
  - **异常分析**：频繁请假、长期请假的司机标记
- **离职数据分析**
  - **离职率统计**：按月度、年度统计离职率
  - **离职原因分析**：离职原因分类统计和占比
  - **工作年限分析**：不同工作年限段的离职分布
  - **趋势预测**：基于历史数据预测离职趋势
- **审批效率统计**
  - 平均审批时长统计
  - 审批通过率分析
  - 管理员审批效率对比
  - 审批质量评估（驳回后重新申请通过率）

### 10.7 通知与提醒机制
- **申请提交通知**
  - 司机提交申请后，相关管理员立即收到待审批通知
  - 通知内容包含申请人、申请类型、紧急程度
- **审批结果通知**
  - 审批完成后，申请人立即收到结果通知
  - 通过通知：显示审批意见和生效时间
  - 驳回通知：显示驳回原因和重新申请指引
- **超时提醒机制**
  - 申请提交24小时未处理，系统自动提醒审批人
  - 申请提交48小时未处理，自动提醒上级管理员
  - 紧急申请12小时未处理，电话/短信提醒
- **统计报告推送**
  - 每周向管理员推送请假统计报告
  - 每月向高级管理员推送离职分析报告
  - 异常情况实时推送预警通知

## 11. 技术实现方案
### 11.1 前端技术架构
- **框架选择**：采用微信小程序原生开发框架
- **状态管理**：使用Vuex或MobX进行全局状态管理
- **UI组件库**：基于WeUI或Vant Weapp构建统一UI组件
- **数据请求**：封装统一的API请求模块，支持请求拦截和错误处理

### 11.2 实时数据同步技术
- **WebSocket连接**：建立持久化连接，实现数据实时推送
- **数据缓存策略**：本地缓存 + 服务端缓存，提升数据访问速度
- **增量更新机制**：仅传输变更数据，减少网络带宽消耗
- **离线数据处理**：支持离线数据暂存，网络恢复后自动同步

### 11.3 性能优化方案
- **分页加载**：大数据量采用分页加载，每页50条记录
- **虚拟滚动**：长列表使用虚拟滚动技术，提升渲染性能
- **图片优化**：图片压缩 + 懒加载 + CDN加速
- **代码分包**：按功能模块进行代码分包，减少首屏加载时间

### 11.4 数据安全保障
- **权限验证**：前后端双重权限验证，确保数据安全
- **数据加密**：敏感数据传输采用HTTPS + AES加密
- **操作审计**：完整的操作日志记录，支持数据追溯
- **数据备份**：定时数据备份 + 实时增量备份

## 12. 设计风格
### 12.1 配色方案
主色调采用深蓝色(#1E3A8A)，辅助色为橙色(#F97316)，背景色为浅灰色(#F8FAFC)

### 12.2 视觉细节
采用8px圆角设计，卡片式布局带有轻微阴影效果，图标风格统一使用线性图标

### 12.3 整体布局
采用卡片式布局，顶部导航栏固定，内容区域可滚动，底部标签栏区分不同角色入口

## 参考文件
1. 用户上传图片：image.png