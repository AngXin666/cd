# 车队管家小程序需求文档（信息管理中心优化版）

## 1. 小程序概述
### 1.1 小程序名称
车队管家

### 1.2 小程序描述
一款专为车队管理打造的微信小程序，提供多角色权限管理和多层级数据仪表盘数据库，包含超级管理员、数据库管理员和管理员三个不同界面，满足车队运营的分层管理需求。本次优化重点完善信息管理中心的界面交互体验，实现申请类信息的动态状态管理，优化清空功能逻辑，并提升整体视觉设计水平。

## 2. 通知中心图标设计
### 2.1 小铃铛图标规范
- **图标位置**：各端首页右上角合适位置
- **图标样式**：圆形小铃铛设计，直径24px
- **状态显示**：
  - **有未读信息**：图标背景为红色(#FF4D4F)，白色铃铛图案
  - **无未读信息**：图标背景为绿色(#00C896)，白色铃铛图案

### 2.2 功能交互
- **点击行为**：点击小铃铛直接跳转至通知中心页面
- **震动反馈**：点击时提供轻微震动反馈
- **状态切换**：根据后台未读信息数量实时切换图标颜色

## 3. 信息管理中心优化
### 3.1 核心功能细化：申请类信息的动态状态管理
- **实时状态更新**
  - 请假申请、离职申请、车辆申请三类信息的状态变化实时反映
  - 任何申请被任一管理员处理后立即更新状态显示
  - 处理状态包括：「已审批通过」、「已驳回」、「已取消」等明确标识

- **状态显示规则**
  - **未处理状态**：使用默认文字颜色和标准样式
  - **已处理状态**
    + 文字颜色变为灰色
    + 添加「已完成」状态标识
    + 移除处理按钮或操作入口

- **交互限制**
  - 状态为「已处理」的申请项，点击后仅显示查看详情
  - 不再跳转至处理页面，避免重复操作
  - 禁止对已处理申请进行二次处理

### 3.2 交互功能优化：信息筛选与管理的精确性
- **清空功能重构**
  - **操作定义**：「清空」仅清除状态为「已读」或「已处理」的信息条目
  - **保留规则**：必须保留所有「未读」或「待处理」的信息
  - **操作确认**：执行清空前弹出确认对话框
  - **操作记录**：记录清空操作的日志信息

- **状态管理增强**
  - **未读信息**：保持原有标识，确保重要提醒可见
  - **待处理信息**：使用醒目标识突出显示
  - **已读信息**：标记为灰色，便于区分处理状态
  - **已处理信息**：统一采用完成状态样式

### 3.3 视觉与用户体验全面提升
- **整体布局优化**
  - 采用卡片式布局替代传统列表，增强信息层次感
  - 每条信息独立成卡片，带有轻微阴影和圆角设计
  - 卡片间距适中，便于视觉区分和点击操作

- **状态标识改进**
  - **未读/待处理**：红色圆点标识，白色文字
  - **已读/已处理**：灰色圆点标识，灰色文字
  - **紧急提醒**：橙色标识，突出显示

- **字体与色彩调整**
  - 主标题使用16px字体，信息内容使用14px字体
  - 行间距增加至24px，提升阅读舒适度
  - 主色调采用深蓝色(#1890FF)，辅助色为浅灰色(#F5F5F5)

- **操作区域设计**
  - 操作按钮采用圆形胶囊设计，直径32px
  - 按钮间距增大至8px，减少误触风险
  - 状态切换开关使用现代扁平化设计

## 4. 信息管理中心界面设计
### 4.1 列表页整体设计
- **页面结构**
  - 顶部搜索栏，支持关键词搜索和快速筛选
  - 主体卡片式信息列表
  - 底部批量操作工具栏

- **卡片设计**
  - 卡片宽度适配屏幕，左右边距16px
  - 卡片高度根据内容自适应
  - 顶部状态条显示紧急程度和处理状态
  - 主体区域包含申请详情和操作人信息
  - 底部时间戳和操作按钮区域

### 4.2 状态视觉规范
- **未读状态**
  - 左上角红色圆点标识
  - 主标题使用深蓝色文字
  - 卡片背景轻微高亮显示

- **已读状态**
  - 左上角灰色圆点标识
  - 主标题使用灰色文字
  - 卡片保持默认背景色

- **紧急状态**
  - 左上角橙色警示标识
  - 卡片背景使用淡黄色渐变
  - 主标题加粗显示

## 5. 技术实现要求
### 5.1 实时状态同步
- **WebSocket更新**
  - 申请状态变更时立即推送更新消息
  - 客户端实时接收并更新对应列表项
  - 确保多端数据一致性

- **状态渲染逻辑**
  - 根据后台返回的状态码自动匹配前端样式
  - 状态变更时重新渲染卡片组件
  - 保持状态转换的平滑过渡效果

- **通知图标状态同步**
  - 实时统计未读信息数量
  - 根据未读数量动态切换小铃铛图标颜色
  - 保证通知状态的实时准确性

### 5.2 清空功能实现
- **数据过滤规则**\n  - 只筛选状态为「已读」或「已处理」的记录
  - 排除「未读」和「待处理」的任何信息
  - 生成安全的删除确认对话

- **操作日志记录**
  - 记录清空操作的时间、操作人、清空数量
  - 保存清空前的数据快照
  - 支持清空操作的撤销功能（限定时间内）

## 6. 参考文件
1. 原信息管理中心界面截图：image.png
2. 优化后界面设计参考：design_reference.png
3. 状态标识规范文档：status_guidelines.md
4. 技术实现要求说明：technical_requirements.pdf