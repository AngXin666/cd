# 车队管理小程序需求文档

## 1. 小程序概述
### 1.1 小程序名称
车队管家

### 1.2 小程序描述
一款专为车队管理打造的微信小程序，提供多角色权限管理，包含司机端、普通管理端和超级管理员端三个不同界面，满足车队运营的分层管理需求。

## 2. 功能架构
### 2.1 司机端界面
- 司机个人工作台
- 基础信息展示模块
- GPS打卡功能
  - 实时GPS检测
  - 打卡状态显示
  - 打卡记录查询
  - 仓库范围提示

### 2.2 普通管理端界面
- 管理员工作台
- 基础管理功能模块
- 打卡管理功能
  - 司机打卡记录查看
  - 打卡异常提醒
- 司机管理页面
  - 仓库列表展示（每个仓库提供可点击入口）
  - 仓库详情页面
    - 考勤统计区域
      - 出勤日期记录
      - 工作时长统计
      - 迟到/早退记录
      - 考勤率统计
    - 计件统计区域
      - 完成订单数统计
      - 计件类型分类
      - 计件单价展示
      - 总金额汇总
    - 数据筛选功能
      - 按日期范围筛选
      - 按统计维度切换（日/周/月）
- 计件管理功能
  - 计件数据录入界面
  - 管辖仓库范围内计件数据查看
  - 计件数据统计和报表

### 2.3 超级管理员端界面
- 超级管理员控制台
- 系统管理功能模块
- 仓库GPS管理
  - 仓库信息设置
  - GPS范围配置（支持设置仓库坐标和允许打卡的范围半径）
  - 打卡时间段设置（可为不同仓库设置不同的有效打卡时间）
  - 仓库列表管理
- 计件管理功能
  - 全部仓库计件数据查看和管理
  - 品类设置和管理
  - 计件数据统计和报表
  - 上楼单价配置

## 3. 打卡功能详细说明
### 3.1 GPS打卡机制
- 司机必须在管理员预设的仓库GPS范围内才能成功打卡
- 系统自动获取司机当前GPS位置并与仓库范围进行匹配
- 超出范围时显示距离最近仓库的方向和距离提示

### 3.2 仓库管理
- 管理员可添加多个仓库位置
- 每个仓库可独立设置GPS范围（半径）
- 每个仓库可设置不同的打卡有效时间段

### 3.3 打卡时间控制
- 支持设置每日打卡时间段
- 可为不同仓库设置不同的时间规则
- 非有效时间段内无法进行打卡操作

## 4. 仓库详情页面功能说明
### 4.1 页面布局
- 顶部仓库基本信息展示
- 中部分为考勤统计区域和计件统计区域
- 底部提供数据筛选和导出功能

### 4.2 考勤统计功能
- 展示司机在该仓库的详细考勤记录
- 支持查看具体出勤日期、上下班时间
- 自动计算工作时长并标注异常情况
- 统计迟到、早退次数及时长

### 4.3 计件统计功能
- 展示司机在该仓库的计件工作数据
- 按计件类型分类统计完成数量
- 显示各类型计件单价和对应收入
- 提供总计件数和总金额汇总

### 4.4 数据筛选
- 支持按日期范围自定义筛选
- 提供快捷时间选项（今日、本周、本月）
- 数据实时更新，筛选结果即时展示

## 5. 计件管理功能模块
### 5.1 核心数据字段
- 件数（必填项）：记录具体的计件数量
- 单价（必填项）：每件商品的基础单价
- 品类（必填项）：商品分类，可由管理员预设
- 是否需要上楼（默认值为"否"）：标识是否需要额外的上楼服务
- 上楼单价（当选择需要上楼时必填）：上楼服务的额外费用

### 5.2 权限管理
- 普通管理员：仅能查看和管理其管辖仓库范围内的计件考勤数据
- 超级管理员：具备查看和管理全部仓库计件考勤数据的权限

### 5.3 功能实现
- 计件数据录入界面
  - 提供所有核心数据字段的输入表单
  - 品类下拉选择（由管理员预设）
  - 上楼选项联动显示上楼单价输入框
  - 自动计算总金额（件数×单价+上楼费用）
- 数据筛选和查看功能
  - 基于管理员权限的数据范围控制
  - 支持按仓库、日期、品类等维度筛选
- 统计和报表生成
  - 计件数量统计
  - 收入金额统计
  - 品类分布统计
  - 上楼服务统计

### 5.4 数据库结构设计
- 计件记录表：包含件数、单价、品类、是否上楼、上楼单价、总金额、创建时间、仓库ID、司机ID等字段
- 品类管理表：存储品类名称、状态等信息
- 权限关联表：管理员与仓库的关联关系

## 6. 设计风格
### 6.1 配色方案
主色调采用深蓝色(#1E3A8A)，辅助色为橙色(#F97316)，背景色为浅灰色(#F8FAFC)

### 6.2 视觉细节
采用8px圆角设计，卡片式布局带有轻微阴影效果，图标风格统一使用线性图标

### 6.3 整体布局
采用卡片式布局，顶部导航栏固定，内容区域可滚动，底部标签栏区分不同角色入口

## 参考文件
1. 用户上传图片：image.png