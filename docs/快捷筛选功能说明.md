# 快捷筛选功能说明

## 功能介绍

在司机端的"我的计件"页面中，我们添加了三个快捷筛选按钮，帮助您快速查看不同时间段的计件记录和统计数据。

## 快捷按钮

### 1. 前一天 📅
- **功能**：查看昨天的计件记录
- **颜色**：蓝色
- **使用场景**：快速查看昨天的工作情况

### 2. 本周 📅
- **功能**：查看本周（周一到今天）的计件记录
- **颜色**：绿色
- **使用场景**：查看本周的工作进度和累计收入

### 3. 本月 📅
- **功能**：查看本月（1号到今天）的计件记录
- **颜色**：橙色
- **使用场景**：查看本月的工作情况和总收入（默认选中）

## 使用方法

### 基本操作
1. 打开"我的计件"页面
2. 在筛选条件区域，您会看到三个快捷按钮
3. 点击任意一个按钮，系统会自动：
   - 更新开始日期和结束日期
   - 重新加载对应时间段的计件记录
   - 更新总件数和总收入统计
   - 按钮变为选中状态（深色背景）

### 视觉反馈
- **未选中**：浅色渐变背景，深色文字
- **选中**：深色渐变背景，白色文字，带阴影效果
- **点击时**：按钮会有轻微的缩小动画

### 自定义日期
如果您需要查看其他日期范围的数据：
1. 手动修改开始日期或结束日期
2. 所有快捷按钮会自动恢复为未选中状态
3. 系统会根据您选择的日期范围加载数据

## 数据更新说明

### 自动更新机制
当您点击快捷按钮后，系统会自动执行以下操作：

1. **更新日期范围**
   - 根据您选择的快捷方式，自动设置开始日期和结束日期

2. **重新加载数据**
   - 从数据库中获取对应日期范围内的计件记录
   - 如果您选择了特定仓库，只显示该仓库的记录

3. **更新统计数据**
   - 总件数：所有记录的件数总和
   - 总收入：所有记录的金额总和

4. **刷新界面**
   - 计件记录列表更新
   - 统计卡片更新
   - 记录数量更新

### 数据实时性
- ✅ 统计数据会在记录加载完成后立即更新
- ✅ 所有数据都是实时计算的，确保准确性
- ✅ 如果某个时间段没有记录，会显示 0

## 常见问题

### Q1：点击快捷按钮后，统计数据没有变化？
**可能原因**：
1. 该时间段内没有计件记录（显示为 0 是正常的）
2. 网络延迟导致数据加载较慢（请稍等片刻）
3. 选择了特定仓库，但该仓库在此时间段内没有记录

**验证方法**：
1. 检查下方的计件记录列表是否有数据
2. 查看"共 X 条"的记录数量
3. 如果记录列表为空，说明该时间段确实没有数据

### Q2：如何确认快捷按钮是否生效？
**验证步骤**：
1. 观察按钮的颜色变化（选中后变为深色）
2. 查看开始日期和结束日期是否更新
3. 查看计件记录列表的日期范围
4. 查看"共 X 条"的记录数量是否变化

### Q3：为什么有时候总收入是 0？
**可能原因**：
1. 该时间段内确实没有计件记录
2. 您选择了特定仓库，但该仓库在此时间段内没有工作记录
3. 计件记录的金额为 0（可能是数据录入问题）

**解决方法**：
1. 切换到"全部仓库"查看
2. 选择其他时间段
3. 检查计件记录的详细信息

### Q4：快捷按钮和手动选择日期有什么区别？
**区别**：
- **快捷按钮**：一键设置常用的日期范围，操作更快捷
- **手动选择**：可以选择任意日期范围，更灵活

**建议**：
- 日常查看使用快捷按钮
- 需要查看特定日期范围时使用手动选择

## 技术说明

### 数据计算逻辑
```
总件数 = 所有记录的 quantity 字段之和
总收入 = 所有记录的 total_amount 字段之和
```

### 日期计算规则
- **前一天**：昨天的日期（开始日期 = 结束日期 = 昨天）
- **本周**：本周一到今天（如果今天是周日，则从上周一开始）
- **本月**：本月1号到今天

### 数据筛选顺序
1. 按日期范围筛选（开始日期 ≤ 工作日期 ≤ 结束日期）
2. 按仓库筛选（如果选择了特定仓库）
3. 按日期排序（默认降序，最新的在前）

## 使用建议

### 日常使用
1. **每天下班后**：点击"前一天"查看昨天的工作情况
2. **每周末**：点击"本周"查看本周的总收入
3. **每月底**：点击"本月"查看本月的工作统计

### 数据核对
1. 使用快捷按钮快速切换不同时间段
2. 对比不同时间段的工作量和收入
3. 发现异常数据及时编辑或删除

### 效率提升
1. 优先使用快捷按钮，减少手动操作
2. 结合仓库筛选，快速定位特定仓库的数据
3. 使用排序功能，按需查看最新或最早的记录

## 总结

快捷筛选功能让您能够：
- ⚡ 快速查看不同时间段的数据
- 📊 实时更新统计信息
- 🎯 提高数据查询效率
- 💡 更好地了解工作情况

如果您在使用过程中遇到任何问题，请及时反馈给管理员。
