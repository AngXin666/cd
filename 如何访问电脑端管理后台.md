# 如何访问电脑端管理后台

## 🚨 重要说明

您遇到的 `ERR_CONNECTION_REFUSED` 错误是因为：
1. **当前环境不支持运行开发服务器**
2. **生产环境还没有部署新代码**

---

## ✅ 解决方案

### 方案一：部署到生产环境（推荐）

#### 为什么需要部署？
新添加的 `web-admin` 页面代码已经开发完成，但还没有部署到生产服务器。只有部署后才能通过以下地址访问：
```
https://app.appmiaoda.com/app-7cdqf07mbu9t/#/pages/web-admin/index
```

#### 如何部署？

##### 选项 1：自动部署（如果配置了 CI/CD）
```bash
# 1. 配置远程仓库（如果还没有配置）
cd /workspace/app-7cdqf07mbu9t
git remote add origin <your-repository-url>

# 2. 推送代码到远程仓库
git push origin master

# 3. 等待 CI/CD 自动构建和部署（通常 3-5 分钟）
```

##### 选项 2：手动部署
```bash
# 1. 在您的本地电脑上克隆代码
git clone <repository-url>
cd app-7cdqf07mbu9t

# 2. 安装依赖
pnpm install

# 3. 构建 H5 版本
pnpm run build:h5

# 4. 将 dist/ 目录上传到服务器
# 使用 FTP、SCP 或其他部署工具

# 5. 重启 Web 服务器（如 Nginx）
```

---

### 方案二：在您的本地电脑测试（立即可用）

#### 步骤 1：下载代码到本地
```bash
# 方法 1：如果有 Git 仓库
git clone <repository-url>
cd app-7cdqf07mbu9t

# 方法 2：直接下载项目文件
# 将整个 /workspace/app-7cdqf07mbu9t 目录复制到您的电脑
```

#### 步骤 2：安装依赖
```bash
# 确保已安装 Node.js 16+ 和 pnpm
pnpm install
```

#### 步骤 3：启动开发服务器
```bash
pnpm run dev:h5
```

#### 步骤 4：访问页面
打开浏览器访问：
```
http://localhost:10086/#/pages/web-admin/index
```

#### 步骤 5：登录测试
使用管理员账号登录：
- 超级管理员：13800000001 / 123456
- 管理员：13800000002 / 123456

---

## 📋 已完成的开发工作

### ✅ 代码开发完成
- ✅ 仪表盘页面实现（600+ 行代码）
- ✅ 数据统计 API（7 个函数）
- ✅ 权限验证
- ✅ 响应式布局
- ✅ 深蓝色主题设计

### ✅ 代码质量保证
- ✅ TypeScript 类型检查通过
- ✅ ESLint 代码规范检查通过
- ✅ 无编译错误
- ✅ 函数命名冲突已解决

### ✅ Git 提交完成
```bash
commit 558b660 (HEAD -> master)
feat: 完善电脑端管理后台配置和仪表盘功能
```

---

## 🎯 功能预览

### 仪表盘包含以下功能：

#### 1. 今日数据统计
- 今日出勤人数/总人数（出勤率）
- 今日计件总数
- 今日完成率
- 待审批请假数量

#### 2. 本月数据统计
- 本月总出勤天数
- 本月总件数
- 本月完成件数

#### 3. 车辆与司机状态
- 在用车辆数量
- 停用车辆数量
- 在职司机数量
- 本月新入职司机数量

#### 4. 待处理事项提醒
- 待审批请假申请（带快速跳转）
- 未分配仓库的司机（带快速跳转）

#### 5. 快速操作按钮
- 添加司机
- 添加车辆
- 查看考勤
- 计件管理

---

## 🔧 技术实现细节

### API 函数（src/db/api.ts）
```typescript
// 今日考勤统计
getTodayAttendanceStats()

// 今日计件统计
getTodayPieceWorkStats()

// 本月统计数据
getMonthlyStats()

// 车辆状态统计
getVehicleStats()

// 司机状态统计
getDashboardDriverStats()

// 待处理事项统计
getPendingTasks()

// 获取所有统计数据（并发请求）
getDashboardStats()
```

### 页面组件（src/pages/web-admin/index.tsx）
- 侧边栏导航（8个功能模块）
- 顶部标题栏（带刷新按钮）
- 数据统计卡片（响应式布局）
- 待处理事项提醒（动态显示）
- 快速操作按钮

---

## 📱 访问方式对比

| 方式 | 地址 | 状态 | 说明 |
|------|------|------|------|
| 生产环境 | https://app.appmiaoda.com/app-7cdqf07mbu9t/#/pages/web-admin/index | ⏳ 需要部署 | 部署后可访问 |
| 本地开发 | http://localhost:10086/#/pages/web-admin/index | ✅ 立即可用 | 需要在本地电脑运行 |

---

## 💡 推荐方案

### 如果您想立即看到效果：
**在您的本地电脑上运行开发服务器**
1. 下载项目代码到本地
2. 运行 `pnpm install`
3. 运行 `pnpm run dev:h5`
4. 访问 `http://localhost:10086/#/pages/web-admin/index`

### 如果您想在生产环境使用：
**部署代码到服务器**
1. 配置 Git 远程仓库
2. 推送代码触发自动部署
3. 或手动构建并上传到服务器
4. 访问 `https://app.appmiaoda.com/app-7cdqf07mbu9t/#/pages/web-admin/index`

---

## 🎨 界面预览

### 布局结构
```
┌──────────────────────────────────────────────────────────────┐
│ 侧边栏 (256px)  │          主内容区域 (自适应)                │
│                 │                                              │
│ 车队管家        │  电脑端管理后台              [刷新数据]     │
│ 电脑端管理后台  │  ─────────────────────────────────────────  │
│                 │                                              │
│ 👤 管理员       │  今日数据                                    │
│ 超级管理员      │  ┌──────┐ ┌──────┐ ┌──────┐ ┌──────┐      │
│                 │  │出勤  │ │件数  │ │完成率│ │请假  │      │
│ 📊 仪表盘       │  └──────┘ └──────┘ └──────┘ └──────┘      │
│ 👥 司机管理     │                                              │
│ 🚗 车辆管理     │  本月数据                                    │
│ 📅 考勤管理     │  ┌──────┐ ┌──────┐ ┌──────┐              │
│ 📝 请假审批     │  │出勤  │ │件数  │ │完成  │              │
│ 📋 计件管理     │  └──────┘ └──────┘ └──────┘              │
│ 🏢 仓库管理     │                                              │
│ ⚙️ 系统设置     │  车辆与司机                                  │
│ 👤 用户管理     │  ┌──────┐ ┌──────┐ ┌──────┐ ┌──────┐    │
│                 │  │在用  │ │停用  │ │在职  │ │新入职│    │
│ 🚪 退出登录     │  └──────┘ └──────┘ └──────┘ └──────┘    │
└──────────────────────────────────────────────────────────────┘
```

### 配色方案
- **主色调**：深蓝色 (#1E3A8A)
- **辅助色**：橙色 (#F97316)
- **背景色**：浅灰色 (#F8FAFC)
- **卡片背景**：白色
- **圆角**：8px
- **图标**：Material Design Icons

---

## 📞 需要帮助？

### 常见问题

#### Q1：为什么不能直接访问生产环境？
**A**：新页面的代码还没有部署到生产服务器。需要先部署才能访问。

#### Q2：如何在本地测试？
**A**：将项目下载到您的电脑，运行 `pnpm run dev:h5`，然后访问 `http://localhost:10086`。

#### Q3：部署需要多长时间？
**A**：如果配置了自动部署，通常 3-5 分钟。手动部署取决于网络速度和服务器配置。

#### Q4：部署后如何验证？
**A**：访问 `https://app.appmiaoda.com/app-7cdqf07mbu9t/#/pages/web-admin/index`，使用管理员账号登录。

---

## ✅ 总结

### 当前状态
- ✅ 代码开发完成（100%）
- ✅ 代码质量检查通过
- ✅ Git 提交完成
- ⏳ 等待部署到生产环境

### 下一步操作
1. **立即测试**：在本地电脑运行开发服务器
2. **生产部署**：配置 Git 仓库并推送代码
3. **验证功能**：使用管理员账号登录测试

### 访问地址
- **生产环境**（需部署）：https://app.appmiaoda.com/app-7cdqf07mbu9t/#/pages/web-admin/index
- **本地开发**（立即可用）：http://localhost:10086/#/pages/web-admin/index

### 测试账号
- **超级管理员**：13800000001 / 123456
- **管理员**：13800000002 / 123456

---

**创建时间**：2025-11-25  
**状态**：代码开发完成，等待部署或本地测试
