# 登录功能优化

## 优化内容

### 1. 支持手机号直接登录
之前需要输入邮箱格式（如 `13800000001@fleet.com`），现在可以直接输入手机号。

### 2. 智能登录方式
系统会自动识别输入的账号类型：
- **手机号**（11位数字）：使用 `phone + password` 方式登录
- **邮箱**（包含 @）：使用 `email + password` 方式登录
- **账号名**（如 admin）：自动转换为对应的手机号或邮箱

### 3. 账号映射
支持快捷账号名：
- `admin` → `13800000001`（中央管理系统管理员）
- `admin1` → `13800000001`
- `admin2` → `13800000002`
- `admin3` → `13800000003`
- `admin888` → `admin888`

## 使用示例

### 中央管理系统管理员登录

#### 方式一：手机号登录（推荐）
```
账号：13800000001
密码：hye19911206
```

#### 方式二：快捷账号登录
```
账号：admin
密码：hye19911206
```

两种方式效果完全相同！

## 技术实现

### 登录逻辑流程
```typescript
1. 检查账号是否为手机号（11位数字）
2. 如果不是手机号，检查是否为快捷账号名
3. 如果是快捷账号名，转换为对应的手机号
4. 判断最终账号类型：
   - 手机号 → 使用 supabase.auth.signInWithPassword({ phone, password })
   - 邮箱 → 使用 supabase.auth.signInWithPassword({ email, password })
```

### 代码位置
- 文件：`src/pages/login/index.tsx`
- 函数：`handlePasswordLogin()`
- 行数：125-203

## 兼容性

✅ 完全向后兼容，旧的邮箱登录方式仍然可用
✅ 支持所有现有账号类型
✅ 不影响验证码登录功能

## 测试

### 测试账号
| 账号类型 | 账号 | 密码 | 说明 |
|---------|------|------|------|
| 中央管理员 | 13800000001 | hye19911206 | 手机号登录 |
| 中央管理员 | admin | hye19911206 | 快捷账号登录 |
| 司机 | admin1 | 123456 | 快捷账号登录 |
| 车队长 | admin2 | 123456 | 快捷账号登录 |
| 老板 | admin3 | 123456 | 快捷账号登录 |

### 测试步骤
1. 打开小程序登录页面
2. 选择"密码登录"
3. 输入任一测试账号和密码
4. 点击"密码登录"按钮
5. 验证登录成功并跳转到对应页面

## 相关文档
- [中央管理系统管理员账号](ADMIN_ACCOUNT_CREATED.md)
- [中央管理系统设置](CENTRAL_ADMIN_SETUP.md)
- [README](README.md)
