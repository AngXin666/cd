# 测试账号快速登录使用说明

## 功能介绍

为了方便测试不同角色的功能，系统新增了**测试账号快速登录**功能。您可以通过这个功能快速切换不同角色的账号，无需手动输入账号密码。

## 访问入口

### 方式一：通过老板端首页访问
1. 登录老板账号
2. 进入老板端首页
3. 在"快捷功能"区域找到"测试登录"按钮
4. 点击进入测试登录页面

### 方式二：直接访问页面
- 页面路径：`/pages/test-login/index`
- 在浏览器中直接访问该路径

## 功能特点

### 1. 显示所有测试账号
- 老板（super_admin）
- 车队长（manager）
- 平级账号（peer_admin）
- 租赁管理员（lease_admin）
- 司机（driver）

### 2. 当前登录状态
- 显示当前登录的账号信息
- 高亮显示当前账号
- 提供"退出登录"按钮

### 3. 一键登录
- 点击任意账号卡片即可快速登录
- 默认密码：`123456`
- 登录成功后自动跳转到对应角色的首页

### 4. 自动跳转规则
- **司机**：跳转到 `/pages/driver/index`
- **车队长**：跳转到 `/pages/manager/index`
- **老板**：跳转到 `/pages/super-admin/index`
- **其他角色**：跳转到 `/pages/driver/index`

## 使用步骤

1. **进入测试登录页面**
   - 通过老板端首页的"测试登录"按钮进入
   - 或直接访问 `/pages/test-login/index`

2. **查看账号列表**
   - 页面会自动加载所有测试账号
   - 每个账号卡片显示：
     - 角色标签（带颜色区分）
     - 姓名
     - 手机号
     - 邮箱

3. **点击账号登录**
   - 点击任意账号卡片
   - 系统会自动使用默认密码（123456）登录
   - 登录成功后显示提示信息
   - 1秒后自动跳转到对应角色的首页

4. **退出登录**
   - 如需退出当前账号，点击顶部的"退出登录"按钮
   - 退出后可以继续选择其他账号登录

## 注意事项

1. **默认密码**
   - 所有测试账号的默认密码都是：`123456`
   - 如果密码被修改，需要手动输入正确的密码

2. **账号列表刷新**
   - 如果账号列表没有显示，点击底部的"刷新账号列表"按钮
   - 系统会重新加载所有测试账号

3. **登录失败处理**
   - 如果登录失败，会显示错误提示
   - 请检查账号密码是否正确
   - 或联系管理员重置密码

4. **角色权限**
   - 不同角色登录后会看到不同的功能界面
   - 请根据测试需求选择对应的角色账号

## 常见问题

### Q1: 为什么看不到某个角色的账号？
A: 可能是该角色的账号还没有创建。请联系管理员创建对应角色的测试账号。

### Q2: 登录失败怎么办？
A: 
- 检查账号密码是否正确（默认密码：123456）
- 尝试点击"刷新账号列表"按钮
- 如果问题持续，请联系管理员

### Q3: 如何添加新的测试账号？
A: 
- 通过注册功能创建新账号
- 或联系管理员在数据库中添加

### Q4: 测试登录功能在生产环境中会保留吗？
A: 建议在生产环境中移除或限制访问权限，仅在开发和测试环境中使用。

## 技术说明

### 页面路径
- 文件位置：`src/pages/test-login/index.tsx`
- 路由配置：已添加到 `src/app.config.ts`

### 数据来源
- 从 `profiles` 表中查询所有账号
- 按创建时间排序
- 限制显示前 20 个账号

### 登录方式
- 使用 Supabase Auth 的 `signInWithPassword` 方法
- 手机号 + 密码登录
- 默认密码：`123456`

## 更新日志

### 2025-11-28
- ✅ 创建测试账号快速登录页面
- ✅ 添加到老板端首页快捷功能
- ✅ 支持显示所有角色账号
- ✅ 实现一键登录功能
- ✅ 添加当前登录状态显示
- ✅ 实现自动跳转功能
