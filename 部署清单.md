# 🚀 H5热更新部署清单

## ✅ 已完成
- [x] H5代码构建完成（dist文件夹已生成）
- [x] SQL文件已生成（deploy-h5-v1.0.0.sql）

## 📋 接下来要做（3个简单步骤）

### 步骤1：创建Storage Bucket（首次设置，只需一次）

1. 打开链接：https://supabase.com/dashboard/project/wxvrwkpkioalqdsfswwu/storage/buckets

2. 检查是否已有 `h5-app` bucket
   - **如果已有**：跳到步骤2
   - **如果没有**：点击 "New bucket" 按钮

3. 创建bucket（如果需要）：
   - Name: `h5-app`
   - Public bucket: ✅ **必须勾选！**
   - 点击 "Create bucket"

---

### 步骤2：上传H5文件

1. 打开链接：https://supabase.com/dashboard/project/wxvrwkpkioalqdsfswwu/storage/buckets/h5-app

2. 创建文件夹：
   - 点击 "New folder"
   - 输入名称：`v1.0.0`
   - 点击 "Create"

3. 进入 `v1.0.0` 文件夹

4. 上传文件：
   - 点击 "Upload files" 或直接拖拽
   - 选择 `dist` 目录下的**所有文件和文件夹**
   - 确保上传了：
     - `js` 文件夹（包含所有JS文件）
     - `static` 文件夹（包含所有静态资源）
   - 等待上传完成

---

### 步骤3：添加版本记录

1. 打开链接：https://supabase.com/dashboard/project/wxvrwkpkioalqdsfswwu/sql

2. 打开文件 `deploy-h5-v1.0.0.sql`

3. 复制全部内容

4. 粘贴到Supabase SQL编辑器

5. 点击 "Run" 执行

6. 应该看到成功提示和版本列表

---

## 🎉 完成！

现在打开你的APP，应该会自动检测到更新并弹出更新对话框！

---

## 📝 重要信息

- **H5部署URL**: https://wxvrwkpkioalqdsfswwu.supabase.co/storage/v1/object/public/h5-app/v1.0.0/
- **当前版本**: 1.0.0
- **更新类型**: 可选更新（用户可以选择稍后更新）

---

## 🔄 下次更新怎么做？

下次发布新版本时，只需：

```powershell
# 1. 运行部署脚本
.\scripts\deploy-simple.ps1 -Version "1.0.1" -ReleaseNotes "修复登录问题"

# 2. 上传 dist 到 Supabase Storage 的 v1.0.1 文件夹

# 3. 执行生成的 deploy-h5-v1.0.1.sql

# 完成！
```

---

## ❓ 遇到问题？

### 问题1：APP没有弹出更新对话框
- 检查Supabase Storage中的文件是否上传成功
- 检查SQL是否执行成功（查看 h5_versions 表）
- 检查APP是否有网络连接
- 重启APP试试

### 问题2：更新后页面空白
- 检查Storage bucket是否设置为 Public
- 检查文件路径是否正确（应该在 v1.0.0 文件夹下）
- 检查浏览器控制台是否有错误

### 问题3：数据库表已存在错误
- 这是正常的，说明表已经创建过了
- 只需执行 INSERT 语句即可

---

**祝部署顺利！** 🚀
